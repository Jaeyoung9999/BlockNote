exports.id=209,exports.ids=[209],exports.modules={3486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return o}});let n=r(8974),i=r(3658);function o(e,t){return(0,i.normalizePathTrailingSlash)((0,n.addPathPrefix)(e,""))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"callServer",{enumerable:!0,get:function(){return i}});let n=r(2994);async function i(e,t){let r=(0,n.getServerActionDispatcher)();if(!r)throw Error("Invariant: missing action dispatcher.");return new Promise((n,i)=>{r({actionId:e,actionArgs:t,resolve:n,reject:i})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AppRouterAnnouncer",{enumerable:!0,get:function(){return a}});let n=r(7577),i=r(962),o="next-route-announcer";function a(e){let{tree:t}=e,[r,a]=(0,n.useState)(null);(0,n.useEffect)(()=>(a(function(){var e;let t=document.getElementsByName(o)[0];if(null==t?void 0:null==(e=t.shadowRoot)?void 0:e.childNodes[0])return t.shadowRoot.childNodes[0];{let e=document.createElement(o);e.style.cssText="position:absolute";let t=document.createElement("div");return t.ariaLive="assertive",t.id="__next-route-announcer__",t.role="alert",t.style.cssText="position:absolute;border:0;height:1px;margin:-1px;padding:0;width:1px;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;word-wrap:normal",e.attachShadow({mode:"open"}).appendChild(t),document.body.appendChild(e),t}}()),()=>{let e=document.getElementsByTagName(o)[0];(null==e?void 0:e.isConnected)&&document.body.removeChild(e)}),[]);let[s,l]=(0,n.useState)(""),u=(0,n.useRef)();return(0,n.useEffect)(()=>{let e="";if(document.title)e=document.title;else{let t=document.querySelector("h1");t&&(e=t.innerText||t.textContent||"")}void 0!==u.current&&u.current!==e&&l(e),u.current=e},[t]),r?(0,i.createPortal)(s,r):null}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION:function(){return n},FLIGHT_PARAMETERS:function(){return l},NEXT_DID_POSTPONE_HEADER:function(){return d},NEXT_ROUTER_PREFETCH_HEADER:function(){return o},NEXT_ROUTER_STATE_TREE:function(){return i},NEXT_RSC_UNION_QUERY:function(){return u},NEXT_URL:function(){return a},RSC_CONTENT_TYPE_HEADER:function(){return s},RSC_HEADER:function(){return r}});let r="RSC",n="Next-Action",i="Next-Router-State-Tree",o="Next-Router-Prefetch",a="Next-Url",s="text/x-component",l=[[r],[i],[o]],u="_rsc",d="x-nextjs-postponed";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createEmptyCacheNode:function(){return j},default:function(){return N},getServerActionDispatcher:function(){return w},urlToUrlWithoutFlightMarker:function(){return R}});let n=r(8374),i=r(326),o=n._(r(7577)),a=r(2413),s=r(7767),l=r(7584),u=r(7008),d=r(7326),c=r(9727),f=r(6199),h=r(2148),p=r(3486),y=r(8038),_=r(6265),m=r(2492),g=r(9519),v=r(5138),b=r(4237),E=r(7929),S=r(8071),O=null,T=null;function w(){return T}let P={};function R(e){let t=new URL(e,location.origin);return t.searchParams.delete(v.NEXT_RSC_UNION_QUERY),t}function A(e){return e.origin!==window.location.origin}function I(e){let{appRouterState:t,sync:r}=e;return(0,o.useInsertionEffect)(()=>{let{tree:e,pushRef:n,canonicalUrl:i}=t,o={...n.preserveCustomHistoryState?window.history.state:{},__NA:!0,__PRIVATE_NEXTJS_INTERNALS_TREE:e};n.pendingPush&&(0,l.createHrefFromUrl)(new URL(window.location.href))!==i?(n.pendingPush=!1,window.history.pushState(o,"",i)):window.history.replaceState(o,"",i),r(t)},[t,r]),null}function j(){return{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null}}function C(e){null==e&&(e={});let t=window.history.state,r=null==t?void 0:t.__NA;r&&(e.__NA=r);let n=null==t?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;return n&&(e.__PRIVATE_NEXTJS_INTERNALS_TREE=n),e}function x(e){let{headCacheNode:t}=e,r=null!==t?t.head:null,n=null!==t?t.prefetchHead:null,i=null!==n?n:r;return(0,o.useDeferredValue)(r,i)}function M(e){let t,{buildId:r,initialHead:n,initialTree:l,initialCanonicalUrl:c,initialSeedData:v,couldBeIntercepted:w,assetPrefix:R,missingSlots:j}=e,M=(0,o.useMemo)(()=>(0,f.createInitialRouterState)({buildId:r,initialSeedData:v,initialCanonicalUrl:c,initialTree:l,initialParallelRoutes:O,location:null,initialHead:n,couldBeIntercepted:w}),[r,v,c,l,n,w]),[N,k,D]=(0,d.useReducerWithReduxDevtools)(M);(0,o.useEffect)(()=>{O=null},[]);let{canonicalUrl:U}=(0,d.useUnwrapState)(N),{searchParams:L,pathname:F}=(0,o.useMemo)(()=>{let e=new URL(U,"http://n");return{searchParams:e.searchParams,pathname:(0,E.hasBasePath)(e.pathname)?(0,b.removeBasePath)(e.pathname):e.pathname}},[U]),$=(0,o.useCallback)(e=>{let{previousTree:t,serverResponse:r}=e;(0,o.startTransition)(()=>{k({type:s.ACTION_SERVER_PATCH,previousTree:t,serverResponse:r})})},[k]),B=(0,o.useCallback)((e,t,r)=>{let n=new URL((0,p.addBasePath)(e),location.href);return k({type:s.ACTION_NAVIGATE,url:n,isExternalUrl:A(n),locationSearch:location.search,shouldScroll:null==r||r,navigateType:t})},[k]);T=(0,o.useCallback)(e=>{(0,o.startTransition)(()=>{k({...e,type:s.ACTION_SERVER_ACTION})})},[k]);let H=(0,o.useMemo)(()=>({back:()=>window.history.back(),forward:()=>window.history.forward(),prefetch:(e,t)=>{let r;if(!(0,h.isBot)(window.navigator.userAgent)){try{r=new URL((0,p.addBasePath)(e),window.location.href)}catch(t){throw Error("Cannot prefetch '"+e+"' because it cannot be converted to a URL.")}A(r)||(0,o.startTransition)(()=>{var e;k({type:s.ACTION_PREFETCH,url:r,kind:null!=(e=null==t?void 0:t.kind)?e:s.PrefetchKind.FULL})})}},replace:(e,t)=>{void 0===t&&(t={}),(0,o.startTransition)(()=>{var r;B(e,"replace",null==(r=t.scroll)||r)})},push:(e,t)=>{void 0===t&&(t={}),(0,o.startTransition)(()=>{var r;B(e,"push",null==(r=t.scroll)||r)})},refresh:()=>{(0,o.startTransition)(()=>{k({type:s.ACTION_REFRESH,origin:window.location.origin})})},fastRefresh:()=>{throw Error("fastRefresh can only be used in development mode. Please use refresh instead.")}}),[k,B]);(0,o.useEffect)(()=>{window.next&&(window.next.router=H)},[H]),(0,o.useEffect)(()=>{function e(e){var t;e.persisted&&(null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE)&&(P.pendingMpaPath=void 0,k({type:s.ACTION_RESTORE,url:new URL(window.location.href),tree:window.history.state.__PRIVATE_NEXTJS_INTERNALS_TREE}))}return window.addEventListener("pageshow",e),()=>{window.removeEventListener("pageshow",e)}},[k]);let{pushRef:K}=(0,d.useUnwrapState)(N);if(K.mpaNavigation){if(P.pendingMpaPath!==U){let e=window.location;K.pendingPush?e.assign(U):e.replace(U),P.pendingMpaPath=U}(0,o.use)(g.unresolvedThenable)}(0,o.useEffect)(()=>{let e=window.history.pushState.bind(window.history),t=window.history.replaceState.bind(window.history),r=e=>{var t;let r=window.location.href,n=null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;(0,o.startTransition)(()=>{k({type:s.ACTION_RESTORE,url:new URL(null!=e?e:r,r),tree:n})})};window.history.pushState=function(t,n,i){return(null==t?void 0:t.__NA)||(null==t?void 0:t._N)||(t=C(t),i&&r(i)),e(t,n,i)},window.history.replaceState=function(e,n,i){return(null==e?void 0:e.__NA)||(null==e?void 0:e._N)||(e=C(e),i&&r(i)),t(e,n,i)};let n=e=>{let{state:t}=e;if(t){if(!t.__NA){window.location.reload();return}(0,o.startTransition)(()=>{k({type:s.ACTION_RESTORE,url:new URL(window.location.href),tree:t.__PRIVATE_NEXTJS_INTERNALS_TREE})})}};return window.addEventListener("popstate",n),()=>{window.history.pushState=e,window.history.replaceState=t,window.removeEventListener("popstate",n)}},[k]);let{cache:z,tree:W,nextUrl:G,focusAndScrollRef:q}=(0,d.useUnwrapState)(N),V=(0,o.useMemo)(()=>(0,m.findHeadInCache)(z,W[1]),[z,W]),Y=(0,o.useMemo)(()=>(function e(t,r){for(let n of(void 0===r&&(r={}),Object.values(t[1]))){let t=n[0],i=Array.isArray(t),o=i?t[1]:t;!o||o.startsWith(S.PAGE_SEGMENT_KEY)||(i&&("c"===t[2]||"oc"===t[2])?r[t[0]]=t[1].split("/"):i&&(r[t[0]]=t[1]),r=e(n,r))}return r})(W),[W]);if(null!==V){let[e,r]=V;t=(0,i.jsx)(x,{headCacheNode:e},r)}else t=null;let J=(0,i.jsxs)(_.RedirectBoundary,{children:[t,z.rsc,(0,i.jsx)(y.AppRouterAnnouncer,{tree:W})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{appRouterState:(0,d.useUnwrapState)(N),sync:D}),(0,i.jsx)(u.PathParamsContext.Provider,{value:Y,children:(0,i.jsx)(u.PathnameContext.Provider,{value:F,children:(0,i.jsx)(u.SearchParamsContext.Provider,{value:L,children:(0,i.jsx)(a.GlobalLayoutRouterContext.Provider,{value:{buildId:r,changeByServerResponse:$,tree:W,focusAndScrollRef:q,nextUrl:G},children:(0,i.jsx)(a.AppRouterContext.Provider,{value:H,children:(0,i.jsx)(a.LayoutRouterContext.Provider,{value:{childNodes:z.parallelRoutes,tree:W,url:U,loading:z.loading},children:J})})})})})})]})}function N(e){let{globalErrorComponent:t,...r}=e;return(0,i.jsx)(c.ErrorBoundary,{errorComponent:t,children:(0,i.jsx)(M,{...r})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return o}});let n=r(4129),i=r(4749);function o(e){let t=i.staticGenerationAsyncStorage.getStore();if((null==t||!t.forceStatic)&&(null==t?void 0:t.isStaticGeneration))throw new n.BailoutToCSRError(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ClientPageRoot",{enumerable:!0,get:function(){return o}});let n=r(326),i=r(3325);function o(e){let{Component:t,props:r}=e;return r.searchParams=(0,i.createDynamicallyTrackedSearchParams)(r.searchParams||{}),(0,n.jsx)(t,{...r})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ErrorBoundary:function(){return p},ErrorBoundaryHandler:function(){return c},GlobalError:function(){return f},default:function(){return h}});let n=r(1174),i=r(326),o=n._(r(7577)),a=r(7389),s=r(7313),l=r(4749),u={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function d(e){let{error:t}=e,r=l.staticGenerationAsyncStorage.getStore();if((null==r?void 0:r.isRevalidate)||(null==r?void 0:r.isStaticGeneration))throw console.error(t),t;return null}class c extends o.default.Component{static getDerivedStateFromError(e){if((0,s.isNextRouterError)(e))throw e;return{error:e}}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.error?{error:null,previousPathname:e.pathname}:{error:t.error,previousPathname:e.pathname}}render(){return this.state.error?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,(0,i.jsx)(this.props.errorComponent,{error:this.state.error,reset:this.reset})]}):this.props.children}constructor(e){super(e),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function f(e){let{error:t}=e,r=null==t?void 0:t.digest;return(0,i.jsxs)("html",{id:"__next_error__",children:[(0,i.jsx)("head",{}),(0,i.jsxs)("body",{children:[(0,i.jsx)(d,{error:t}),(0,i.jsx)("div",{style:u.error,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:u.text,children:"Application error: a "+(r?"server":"client")+"-side exception has occurred (see the "+(r?"server logs":"browser console")+" for more information)."}),r?(0,i.jsx)("p",{style:u.text,children:"Digest: "+r}):null]})})]})]})}let h=f;function p(e){let{errorComponent:t,errorStyles:r,errorScripts:n,children:o}=e,s=(0,a.usePathname)();return t?(0,i.jsx)(c,{pathname:s,errorComponent:t,errorStyles:r,errorScripts:n,children:o}):(0,i.jsx)(i.Fragment,{children:o})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},442:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=r(706),i=r(2747);function o(e){return e&&e.digest&&((0,i.isRedirectError)(e)||(0,n.isNotFoundError)(e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return O}}),r(1174);let n=r(8374),i=r(326),o=n._(r(7577));r(962);let a=r(2413),s=r(9009),l=r(9519),u=r(9727),d=r(455),c=r(9976),f=r(6265),h=r(1868),p=r(2162),y=r(9886),_=r(5262),m=["bottom","height","left","right","top","width","x","y"];function g(e,t){let r=e.getBoundingClientRect();return r.top>=0&&r.top<=t}class v extends o.default.Component{componentDidMount(){this.handlePotentialScroll()}componentDidUpdate(){this.props.focusAndScrollRef.apply&&this.handlePotentialScroll()}render(){return this.props.children}constructor(...e){super(...e),this.handlePotentialScroll=()=>{let{focusAndScrollRef:e,segmentPath:t}=this.props;if(e.apply){if(0!==e.segmentPaths.length&&!e.segmentPaths.some(e=>t.every((t,r)=>(0,d.matchSegment)(t,e[r]))))return;let r=null,n=e.hashFragment;if(n&&(r=function(e){var t;return"top"===e?document.body:null!=(t=document.getElementById(e))?t:document.getElementsByName(e)[0]}(n)),!r&&(r=null),!(r instanceof Element))return;for(;!(r instanceof HTMLElement)||function(e){if(["sticky","fixed"].includes(getComputedStyle(e).position))return!0;let t=e.getBoundingClientRect();return m.every(e=>0===t[e])}(r);){if(null===r.nextElementSibling)return;r=r.nextElementSibling}e.apply=!1,e.hashFragment=null,e.segmentPaths=[],(0,c.handleSmoothScroll)(()=>{if(n){r.scrollIntoView();return}let e=document.documentElement,t=e.clientHeight;!g(r,t)&&(e.scrollTop=0,g(r,t)||r.scrollIntoView())},{dontForceLayout:!0,onlyHashChange:e.onlyHashChange}),e.onlyHashChange=!1,r.focus()}}}}function b(e){let{segmentPath:t,children:r}=e,n=(0,o.useContext)(a.GlobalLayoutRouterContext);if(!n)throw Error("invariant global layout router not mounted");return(0,i.jsx)(v,{segmentPath:t,focusAndScrollRef:n.focusAndScrollRef,children:r})}function E(e){let{parallelRouterKey:t,url:r,childNodes:n,segmentPath:u,tree:c,cacheKey:f}=e,h=(0,o.useContext)(a.GlobalLayoutRouterContext);if(!h)throw Error("invariant global layout router not mounted");let{buildId:p,changeByServerResponse:y,tree:m}=h,g=n.get(f);if(void 0===g){let e={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};g=e,n.set(f,e)}let v=null!==g.prefetchRsc?g.prefetchRsc:g.rsc,b=(0,o.useDeferredValue)(g.rsc,v),E="object"==typeof b&&null!==b&&"function"==typeof b.then?(0,o.use)(b):b;if(!E){let e=g.lazyData;if(null===e){let t=function e(t,r){if(t){let[n,i]=t,o=2===t.length;if((0,d.matchSegment)(r[0],n)&&r[1].hasOwnProperty(i)){if(o){let t=e(void 0,r[1][i]);return[r[0],{...r[1],[i]:[t[0],t[1],t[2],"refetch"]}]}return[r[0],{...r[1],[i]:e(t.slice(2),r[1][i])}]}}return r}(["",...u],m),n=(0,_.hasInterceptionRouteInCurrentTree)(m);g.lazyData=e=(0,s.fetchServerResponse)(new URL(r,location.origin),t,n?h.nextUrl:null,p),g.lazyDataResolved=!1}let t=(0,o.use)(e);g.lazyDataResolved||(setTimeout(()=>{(0,o.startTransition)(()=>{y({previousTree:m,serverResponse:t})})}),g.lazyDataResolved=!0),(0,o.use)(l.unresolvedThenable)}return(0,i.jsx)(a.LayoutRouterContext.Provider,{value:{tree:c[1][t],childNodes:g.parallelRoutes,url:r,loading:g.loading},children:E})}function S(e){let{children:t,hasLoading:r,loading:n,loadingStyles:a,loadingScripts:s}=e;return r?(0,i.jsx)(o.Suspense,{fallback:(0,i.jsxs)(i.Fragment,{children:[a,s,n]}),children:t}):(0,i.jsx)(i.Fragment,{children:t})}function O(e){let{parallelRouterKey:t,segmentPath:r,error:n,errorStyles:s,errorScripts:l,templateStyles:d,templateScripts:c,template:_,notFound:m,notFoundStyles:g,styles:v}=e,O=(0,o.useContext)(a.LayoutRouterContext);if(!O)throw Error("invariant expected layout router to be mounted");let{childNodes:T,tree:w,url:P,loading:R}=O,A=T.get(t);A||(A=new Map,T.set(t,A));let I=w[1][t][0],j=(0,p.getSegmentValue)(I),C=[I];return(0,i.jsxs)(i.Fragment,{children:[v,C.map(e=>{let o=(0,p.getSegmentValue)(e),v=(0,y.createRouterCacheKey)(e);return(0,i.jsxs)(a.TemplateContext.Provider,{value:(0,i.jsx)(b,{segmentPath:r,children:(0,i.jsx)(u.ErrorBoundary,{errorComponent:n,errorStyles:s,errorScripts:l,children:(0,i.jsx)(S,{hasLoading:!!R,loading:null==R?void 0:R[0],loadingStyles:null==R?void 0:R[1],loadingScripts:null==R?void 0:R[2],children:(0,i.jsx)(h.NotFoundBoundary,{notFound:m,notFoundStyles:g,children:(0,i.jsx)(f.RedirectBoundary,{children:(0,i.jsx)(E,{parallelRouterKey:t,url:P,tree:w,childNodes:A,segmentPath:r,cacheKey:v,isActive:j===o})})})})})}),children:[d,c,_]},(0,y.createRouterCacheKey)(e,!0))})]})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{canSegmentBeOverridden:function(){return o},matchSegment:function(){return i}});let n=r(2357),i=(e,t)=>"string"==typeof e?"string"==typeof t&&e===t:"string"!=typeof t&&e[0]===t[0]&&e[1]===t[1],o=(e,t)=>{var r;return!Array.isArray(e)&&!!Array.isArray(t)&&(null==(r=(0,n.getSegmentParam)(e))?void 0:r.param)===t[0]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},useParams:function(){return h},usePathname:function(){return c},useRouter:function(){return f},useSearchParams:function(){return d},useSelectedLayoutSegment:function(){return y},useSelectedLayoutSegments:function(){return p},useServerInsertedHTML:function(){return u.useServerInsertedHTML}});let n=r(7577),i=r(2413),o=r(7008),a=r(2162),s=r(8071),l=r(7375),u=r(3347);function d(){let e=(0,n.useContext)(o.SearchParamsContext),t=(0,n.useMemo)(()=>e?new l.ReadonlyURLSearchParams(e):null,[e]);{let{bailoutToClientRendering:e}=r(6136);e("useSearchParams()")}return t}function c(){return(0,n.useContext)(o.PathnameContext)}function f(){let e=(0,n.useContext)(i.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function h(){return(0,n.useContext)(o.PathParamsContext)}function p(e){void 0===e&&(e="children");let t=(0,n.useContext)(i.LayoutRouterContext);return t?function e(t,r,n,i){let o;if(void 0===n&&(n=!0),void 0===i&&(i=[]),n)o=t[1][r];else{var l;let e=t[1];o=null!=(l=e.children)?l:Object.values(e)[0]}if(!o)return i;let u=o[0],d=(0,a.getSegmentValue)(u);return!d||d.startsWith(s.PAGE_SEGMENT_KEY)?i:(i.push(d),e(o,r,!1,i))}(t.tree,e):null}function y(e){void 0===e&&(e="children");let t=p(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===s.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(2747),i=r(706);class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotFoundBoundary",{enumerable:!0,get:function(){return d}});let n=r(8374),i=r(326),o=n._(r(7577)),a=r(7389),s=r(706);r(576);let l=r(2413);class u extends o.default.Component{componentDidCatch(){}static getDerivedStateFromError(e){if((0,s.isNotFoundError)(e))return{notFoundTriggered:!0};throw e}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.notFoundTriggered?{notFoundTriggered:!1,previousPathname:e.pathname}:{notFoundTriggered:t.notFoundTriggered,previousPathname:e.pathname}}render(){return this.state.notFoundTriggered?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{name:"robots",content:"noindex"}),!1,this.props.notFoundStyles,this.props.notFound]}):this.props.children}constructor(e){super(e),this.state={notFoundTriggered:!!e.asNotFound,previousPathname:e.pathname}}}function d(e){let{notFound:t,notFoundStyles:r,asNotFound:n,children:s}=e,d=(0,a.usePathname)(),c=(0,o.useContext)(l.MissingSlotContext);return t?(0,i.jsx)(u,{pathname:d,notFound:t,notFoundStyles:r,asNotFound:n,missingSlots:c,children:s}):(0,i.jsx)(i.Fragment,{children:s})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return i},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PromiseQueue",{enumerable:!0,get:function(){return u}});let n=r(8285),i=r(8817);var o=i._("_maxConcurrency"),a=i._("_runningCount"),s=i._("_queue"),l=i._("_processNext");class u{enqueue(e){let t,r;let i=new Promise((e,n)=>{t=e,r=n}),o=async()=>{try{n._(this,a)[a]++;let r=await e();t(r)}catch(e){r(e)}finally{n._(this,a)[a]--,n._(this,l)[l]()}};return n._(this,s)[s].push({promiseFn:i,task:o}),n._(this,l)[l](),i}bump(e){let t=n._(this,s)[s].findIndex(t=>t.promiseFn===e);if(t>-1){let e=n._(this,s)[s].splice(t,1)[0];n._(this,s)[s].unshift(e),n._(this,l)[l](!0)}}constructor(e=5){Object.defineProperty(this,l,{value:d}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),n._(this,o)[o]=e,n._(this,a)[a]=0,n._(this,s)[s]=[]}}function d(e){if(void 0===e&&(e=!1),(n._(this,a)[a]<n._(this,o)[o]||e)&&n._(this,s)[s].length>0){var t;null==(t=n._(this,s)[s].shift())||t.task()}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectBoundary:function(){return d},RedirectErrorBoundary:function(){return u}});let n=r(8374),i=r(326),o=n._(r(7577)),a=r(7389),s=r(2747);function l(e){let{redirect:t,reset:r,redirectType:n}=e,i=(0,a.useRouter)();return(0,o.useEffect)(()=>{o.default.startTransition(()=>{n===s.RedirectType.push?i.push(t,{}):i.replace(t,{}),r()})},[t,n,r,i]),null}class u extends o.default.Component{static getDerivedStateFromError(e){if((0,s.isRedirectError)(e))return{redirect:(0,s.getURLFromRedirectError)(e),redirectType:(0,s.getRedirectTypeFromError)(e)};throw e}render(){let{redirect:e,redirectType:t}=this.state;return null!==e&&null!==t?(0,i.jsx)(l,{redirect:e,redirectType:t,reset:()=>this.setState({redirect:null})}):this.props.children}constructor(e){super(e),this.state={redirect:null,redirectType:null}}}function d(e){let{children:t}=e,r=(0,a.useRouter)();return(0,i.jsx)(u,{router:r,children:t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8778:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2747:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return h},getURLFromRedirectError:function(){return f},isRedirectError:function(){return c},permanentRedirect:function(){return d},redirect:function(){return u}});let i=r(5403),o=r(7849),a=r(8778),s="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let n=Error(s);n.digest=s+";"+t+";"+e+";"+r+";";let o=i.requestAsyncStorage.getStore();return o&&(n.mutableCookies=o.mutableCookies),n}function u(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,i]=e.digest.split(";",4),o=Number(i);return t===s&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(o)&&o in a.RedirectStatusCode}function f(e){return c(e)?e.digest.split(";",3)[2]:null}function h(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(8374),i=r(326),o=n._(r(7577)),a=r(2413);function s(){let e=(0,o.useContext)(a.TemplateContext);return(0,i.jsx)(i.Fragment,{children:e})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"applyFlightData",{enumerable:!0,get:function(){return o}});let n=r(114),i=r(9056);function o(e,t,r,o){let[a,s,l]=r.slice(-3);if(null===s)return!1;if(3===r.length){let r=s[2],i=s[3];t.loading=i,t.rsc=r,t.prefetchRsc=null,(0,n.fillLazyItemsTillLeafWithHead)(t,e,a,s,l,o)}else t.rsc=e.rsc,t.prefetchRsc=e.prefetchRsc,t.parallelRoutes=new Map(e.parallelRoutes),t.loading=e.loading,(0,i.fillCacheWithNewSubTreeData)(t,e,r,o);return!0}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"applyRouterStatePatchToTree",{enumerable:!0,get:function(){return function e(t,r,n,s){let l;let[u,d,c,f,h]=r;if(1===t.length){let e=a(r,n,t);return(0,o.addRefreshMarkerToActiveParallelSegments)(e,s),e}let[p,y]=t;if(!(0,i.matchSegment)(p,u))return null;if(2===t.length)l=a(d[y],n,t);else if(null===(l=e(t.slice(2),d[y],n,s)))return null;let _=[t[0],{...d,[y]:l},c,f];return h&&(_[4]=!0),(0,o.addRefreshMarkerToActiveParallelSegments)(_,s),_}}});let n=r(8071),i=r(455),o=r(4158);function a(e,t,r){let[o,s]=e,[l,u]=t;if(l===n.DEFAULT_SEGMENT_KEY&&o!==n.DEFAULT_SEGMENT_KEY)return e;if((0,i.matchSegment)(o,l)){let t={};for(let e in s)void 0!==u[e]?t[e]=a(s[e],u[e],r):t[e]=s[e];for(let e in u)t[e]||(t[e]=u[e]);let n=[o,t];return e[2]&&(n[2]=e[2]),e[3]&&(n[3]=e[3]),e[4]&&(n[4]=e[4]),n}return t}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clearCacheNodeDataForSegmentPath",{enumerable:!0,get:function(){return function e(t,r,i){let o=i.length<=2,[a,s]=i,l=(0,n.createRouterCacheKey)(s),u=r.parallelRoutes.get(a),d=t.parallelRoutes.get(a);d&&d!==u||(d=new Map(u),t.parallelRoutes.set(a,d));let c=null==u?void 0:u.get(l),f=d.get(l);if(o){f&&f.lazyData&&f!==c||d.set(l,{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null});return}if(!f||!c){f||d.set(l,{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null});return}return f===c&&(f={lazyData:f.lazyData,rsc:f.rsc,prefetchRsc:f.prefetchRsc,head:f.head,prefetchHead:f.prefetchHead,parallelRoutes:new Map(f.parallelRoutes),lazyDataResolved:f.lazyDataResolved,loading:f.loading},d.set(l,f)),e(f,c,i.slice(2))}}});let n=r(9886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{computeChangedPath:function(){return d},extractPathFromFlightRouterState:function(){return u}});let n=r(7356),i=r(8071),o=r(455),a=e=>"/"===e[0]?e.slice(1):e,s=e=>"string"==typeof e?"children"===e?"":e:e[1];function l(e){return e.reduce((e,t)=>""===(t=a(t))||(0,i.isGroupSegment)(t)?e:e+"/"+t,"")||"/"}function u(e){var t;let r=Array.isArray(e[0])?e[0][1]:e[0];if(r===i.DEFAULT_SEGMENT_KEY||n.INTERCEPTION_ROUTE_MARKERS.some(e=>r.startsWith(e)))return;if(r.startsWith(i.PAGE_SEGMENT_KEY))return"";let o=[s(r)],a=null!=(t=e[1])?t:{},d=a.children?u(a.children):void 0;if(void 0!==d)o.push(d);else for(let[e,t]of Object.entries(a)){if("children"===e)continue;let r=u(t);void 0!==r&&o.push(r)}return l(o)}function d(e,t){let r=function e(t,r){let[i,a]=t,[l,d]=r,c=s(i),f=s(l);if(n.INTERCEPTION_ROUTE_MARKERS.some(e=>c.startsWith(e)||f.startsWith(e)))return"";if(!(0,o.matchSegment)(i,l)){var h;return null!=(h=u(r))?h:""}for(let t in a)if(d[t]){let r=e(a[t],d[t]);if(null!==r)return s(l)+"/"+r}return null}(e,t);return null==r||"/"===r?r:l(r.split("/"))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7584:(e,t)=>{"use strict";function r(e,t){return void 0===t&&(t=!0),e.pathname+e.search+(t?e.hash:"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createHrefFromUrl",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createInitialRouterState",{enumerable:!0,get:function(){return u}});let n=r(7584),i=r(114),o=r(3648),a=r(9373),s=r(7767),l=r(4158);function u(e){var t;let{buildId:r,initialTree:u,initialSeedData:d,initialCanonicalUrl:c,initialParallelRoutes:f,location:h,initialHead:p,couldBeIntercepted:y}=e,_=!h,m={lazyData:null,rsc:d[2],prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:_?new Map:f,lazyDataResolved:!1,loading:d[3]},g=h?(0,n.createHrefFromUrl)(h):c;(0,l.addRefreshMarkerToActiveParallelSegments)(u,g);let v=new Map;(null===f||0===f.size)&&(0,i.fillLazyItemsTillLeafWithHead)(m,void 0,u,d,p);let b={buildId:r,tree:u,cache:m,prefetchCache:v,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:g,nextUrl:null!=(t=(0,o.extractPathFromFlightRouterState)(u)||(null==h?void 0:h.pathname))?t:null};if(h){let e=new URL(h.pathname,h.origin),t=[["",u,null,null]];(0,a.createPrefetchCacheEntryForInitialLoad)({url:e,kind:s.PrefetchKind.AUTO,data:[t,void 0,!1,y],tree:b.tree,prefetchCache:b.prefetchCache,nextUrl:b.nextUrl})}return b}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createRouterCacheKey",{enumerable:!0,get:function(){return i}});let n=r(8071);function i(e,t){return(void 0===t&&(t=!1),Array.isArray(e))?e[0]+"|"+e[1]+"|"+e[2]:t&&e.startsWith(n.PAGE_SEGMENT_KEY)?n.PAGE_SEGMENT_KEY:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchServerResponse",{enumerable:!0,get:function(){return d}});let n=r(5138),i=r(2994),o=r(5424),a=r(7767),s=r(2165),{createFromFetch:l}=r(6493);function u(e){return[(0,i.urlToUrlWithoutFlightMarker)(e).toString(),void 0,!1,!1]}async function d(e,t,r,d,c){let f={[n.RSC_HEADER]:"1",[n.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(t))};c===a.PrefetchKind.AUTO&&(f[n.NEXT_ROUTER_PREFETCH_HEADER]="1"),r&&(f[n.NEXT_URL]=r);let h=(0,s.hexHash)([f[n.NEXT_ROUTER_PREFETCH_HEADER]||"0",f[n.NEXT_ROUTER_STATE_TREE],f[n.NEXT_URL]].join(","));try{var p;let t=new URL(e);t.searchParams.set(n.NEXT_RSC_UNION_QUERY,h);let r=await fetch(t,{credentials:"same-origin",headers:f}),a=(0,i.urlToUrlWithoutFlightMarker)(r.url),s=r.redirected?a:void 0,c=r.headers.get("content-type")||"",y=!!r.headers.get(n.NEXT_DID_POSTPONE_HEADER),_=!!(null==(p=r.headers.get("vary"))?void 0:p.includes(n.NEXT_URL));if(c!==n.RSC_CONTENT_TYPE_HEADER||!r.ok)return e.hash&&(a.hash=e.hash),u(a.toString());let[m,g]=await l(Promise.resolve(r),{callServer:o.callServer});if(d!==m)return u(r.url);return[g,s,y,_]}catch(t){return console.error("Failed to fetch RSC payload for "+e+". Falling back to browser navigation.",t),[e.toString(),void 0,!1,!1]}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillCacheWithNewSubTreeData",{enumerable:!0,get:function(){return function e(t,r,a,s){let l=a.length<=5,[u,d]=a,c=(0,o.createRouterCacheKey)(d),f=r.parallelRoutes.get(u);if(!f)return;let h=t.parallelRoutes.get(u);h&&h!==f||(h=new Map(f),t.parallelRoutes.set(u,h));let p=f.get(c),y=h.get(c);if(l){if(!y||!y.lazyData||y===p){let e=a[3];y={lazyData:null,rsc:e[2],prefetchRsc:null,head:null,prefetchHead:null,loading:e[3],parallelRoutes:p?new Map(p.parallelRoutes):new Map,lazyDataResolved:!1},p&&(0,n.invalidateCacheByRouterState)(y,p,a[2]),(0,i.fillLazyItemsTillLeafWithHead)(y,p,a[2],e,a[4],s),h.set(c,y)}return}y&&p&&(y===p&&(y={lazyData:y.lazyData,rsc:y.rsc,prefetchRsc:y.prefetchRsc,head:y.head,prefetchHead:y.prefetchHead,parallelRoutes:new Map(y.parallelRoutes),lazyDataResolved:!1,loading:y.loading},h.set(c,y)),e(y,p,a.slice(2),s))}}});let n=r(2498),i=r(114),o=r(9886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillLazyItemsTillLeafWithHead",{enumerable:!0,get:function(){return function e(t,r,o,a,s,l){if(0===Object.keys(o[1]).length){t.head=s;return}for(let u in o[1]){let d;let c=o[1][u],f=c[0],h=(0,n.createRouterCacheKey)(f),p=null!==a&&void 0!==a[1][u]?a[1][u]:null;if(r){let n=r.parallelRoutes.get(u);if(n){let r;let o=(null==l?void 0:l.kind)==="auto"&&l.status===i.PrefetchCacheEntryStatus.reusable,a=new Map(n),d=a.get(h);r=null!==p?{lazyData:null,rsc:p[2],prefetchRsc:null,head:null,prefetchHead:null,loading:p[3],parallelRoutes:new Map(null==d?void 0:d.parallelRoutes),lazyDataResolved:!1}:o&&d?{lazyData:d.lazyData,rsc:d.rsc,prefetchRsc:d.prefetchRsc,head:d.head,prefetchHead:d.prefetchHead,parallelRoutes:new Map(d.parallelRoutes),lazyDataResolved:d.lazyDataResolved,loading:d.loading}:{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map(null==d?void 0:d.parallelRoutes),lazyDataResolved:!1,loading:null},a.set(h,r),e(r,d,c,p||null,s,l),t.parallelRoutes.set(u,a);continue}}if(null!==p){let e=p[2],t=p[3];d={lazyData:null,rsc:e,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:t}}else d={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};let y=t.parallelRoutes.get(u);y?y.set(h,d):t.parallelRoutes.set(u,new Map([[h,d]])),e(d,void 0,c,p,s,l)}}}});let n=r(9886),i=r(7767);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleMutable",{enumerable:!0,get:function(){return o}});let n=r(3648);function i(e){return void 0!==e}function o(e,t){var r,o,a;let s=null==(o=t.shouldScroll)||o,l=e.nextUrl;if(i(t.patchedTree)){let r=(0,n.computeChangedPath)(e.tree,t.patchedTree);r?l=r:l||(l=e.canonicalUrl)}return{buildId:e.buildId,canonicalUrl:i(t.canonicalUrl)?t.canonicalUrl===e.canonicalUrl?e.canonicalUrl:t.canonicalUrl:e.canonicalUrl,pushRef:{pendingPush:i(t.pendingPush)?t.pendingPush:e.pushRef.pendingPush,mpaNavigation:i(t.mpaNavigation)?t.mpaNavigation:e.pushRef.mpaNavigation,preserveCustomHistoryState:i(t.preserveCustomHistoryState)?t.preserveCustomHistoryState:e.pushRef.preserveCustomHistoryState},focusAndScrollRef:{apply:!!s&&(!!i(null==t?void 0:t.scrollableSegments)||e.focusAndScrollRef.apply),onlyHashChange:!!t.hashFragment&&e.canonicalUrl.split("#",1)[0]===(null==(r=t.canonicalUrl)?void 0:r.split("#",1)[0]),hashFragment:s?t.hashFragment&&""!==t.hashFragment?decodeURIComponent(t.hashFragment.slice(1)):e.focusAndScrollRef.hashFragment:null,segmentPaths:s?null!=(a=null==t?void 0:t.scrollableSegments)?a:e.focusAndScrollRef.segmentPaths:[]},cache:t.cache?t.cache:e.cache,prefetchCache:t.prefetchCache?t.prefetchCache:e.prefetchCache,tree:i(t.patchedTree)?t.patchedTree:e.tree,nextUrl:l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSegmentMismatch",{enumerable:!0,get:function(){return i}});let n=r(941);function i(e,t,r){return(0,n.handleExternalUrl)(e,{},e.canonicalUrl,!0)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheBelowFlightSegmentPath",{enumerable:!0,get:function(){return function e(t,r,i){let o=i.length<=2,[a,s]=i,l=(0,n.createRouterCacheKey)(s),u=r.parallelRoutes.get(a);if(!u)return;let d=t.parallelRoutes.get(a);if(d&&d!==u||(d=new Map(u),t.parallelRoutes.set(a,d)),o){d.delete(l);return}let c=u.get(l),f=d.get(l);f&&c&&(f===c&&(f={lazyData:f.lazyData,rsc:f.rsc,prefetchRsc:f.prefetchRsc,head:f.head,prefetchHead:f.prefetchHead,parallelRoutes:new Map(f.parallelRoutes),lazyDataResolved:f.lazyDataResolved},d.set(l,f)),e(f,c,i.slice(2)))}}});let n=r(9886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheByRouterState",{enumerable:!0,get:function(){return i}});let n=r(9886);function i(e,t,r){for(let i in r[1]){let o=r[1][i][0],a=(0,n.createRouterCacheKey)(o),s=t.parallelRoutes.get(i);if(s){let t=new Map(s);t.delete(a),e.parallelRoutes.set(i,t)}}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNavigatingToNewRootLayout",{enumerable:!0,get:function(){return function e(t,r){let n=t[0],i=r[0];if(Array.isArray(n)&&Array.isArray(i)){if(n[0]!==i[0]||n[2]!==i[2])return!0}else if(n!==i)return!0;if(t[4])return!r[4];if(r[4])return!0;let o=Object.values(t[1])[0],a=Object.values(r[1])[0];return!o||!a||e(o,a)}}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{abortTask:function(){return u},listenForDynamicRequest:function(){return s},updateCacheNodeOnNavigation:function(){return function e(t,r,s,u,d){let c=r[1],f=s[1],h=u[1],p=t.parallelRoutes,y=new Map(p),_={},m=null;for(let t in f){let r;let s=f[t],u=c[t],g=p.get(t),v=h[t],b=s[0],E=(0,o.createRouterCacheKey)(b),S=void 0!==u?u[0]:void 0,O=void 0!==g?g.get(E):void 0;if(null!==(r=b===n.PAGE_SEGMENT_KEY?a(s,void 0!==v?v:null,d):b===n.DEFAULT_SEGMENT_KEY?void 0!==u?{route:u,node:null,children:null}:a(s,void 0!==v?v:null,d):void 0!==S&&(0,i.matchSegment)(b,S)&&void 0!==O&&void 0!==u?null!=v?e(O,u,s,v,d):function(e){let t=l(e,null,null);return{route:e,node:t,children:null}}(s):a(s,void 0!==v?v:null,d))){null===m&&(m=new Map),m.set(t,r);let e=r.node;if(null!==e){let r=new Map(g);r.set(E,e),y.set(t,r)}_[t]=r.route}else _[t]=s}if(null===m)return null;let g={lazyData:null,rsc:t.rsc,prefetchRsc:t.prefetchRsc,head:t.head,prefetchHead:t.prefetchHead,loading:t.loading,parallelRoutes:y,lazyDataResolved:!1};return{route:function(e,t){let r=[e[0],t];return 2 in e&&(r[2]=e[2]),3 in e&&(r[3]=e[3]),4 in e&&(r[4]=e[4]),r}(s,_),node:g,children:m}}},updateCacheNodeOnPopstateRestoration:function(){return function e(t,r){let n=r[1],i=t.parallelRoutes,a=new Map(i);for(let t in n){let r=n[t],s=r[0],l=(0,o.createRouterCacheKey)(s),u=i.get(t);if(void 0!==u){let n=u.get(l);if(void 0!==n){let i=e(n,r),o=new Map(u);o.set(l,i),a.set(t,o)}}}let s=t.rsc,l=f(s)&&"pending"===s.status;return{lazyData:null,rsc:s,head:t.head,prefetchHead:l?t.prefetchHead:null,prefetchRsc:l?t.prefetchRsc:null,loading:l?t.loading:null,parallelRoutes:a,lazyDataResolved:!1}}}});let n=r(8071),i=r(455),o=r(9886);function a(e,t,r){let n=l(e,t,r);return{route:e,node:n,children:null}}function s(e,t){t.then(t=>{for(let r of t[0]){let t=r.slice(0,-3),n=r[r.length-3],a=r[r.length-2],s=r[r.length-1];"string"!=typeof t&&function(e,t,r,n,a){let s=e;for(let e=0;e<t.length;e+=2){let r=t[e],n=t[e+1],o=s.children;if(null!==o){let e=o.get(r);if(void 0!==e){let t=e.route[0];if((0,i.matchSegment)(n,t)){s=e;continue}}}return}(function e(t,r,n,a){let s=t.children,l=t.node;if(null===s){null!==l&&(function e(t,r,n,a,s){let l=r[1],u=n[1],c=a[1],h=t.parallelRoutes;for(let t in l){let r=l[t],n=u[t],a=c[t],f=h.get(t),p=r[0],y=(0,o.createRouterCacheKey)(p),_=void 0!==f?f.get(y):void 0;void 0!==_&&(void 0!==n&&(0,i.matchSegment)(p,n[0])&&null!=a?e(_,r,n,a,s):d(r,_,null))}let p=t.rsc,y=a[2];null===p?t.rsc=y:f(p)&&p.resolve(y);let _=t.head;f(_)&&_.resolve(s)}(l,t.route,r,n,a),t.node=null);return}let u=r[1],c=n[1];for(let t in r){let r=u[t],n=c[t],o=s.get(t);if(void 0!==o){let t=o.route[0];if((0,i.matchSegment)(r[0],t)&&null!=n)return e(o,r,n,a)}}})(s,r,n,a)}(e,t,n,a,s)}u(e,null)},t=>{u(e,t)})}function l(e,t,r){let n=e[1],i=null!==t?t[1]:null,a=new Map;for(let e in n){let t=n[e],s=null!==i?i[e]:null,u=t[0],d=(0,o.createRouterCacheKey)(u),c=l(t,void 0===s?null:s,r),f=new Map;f.set(d,c),a.set(e,f)}let s=0===a.size,u=null!==t?t[2]:null,d=null!==t?t[3]:null;return{lazyData:null,parallelRoutes:a,prefetchRsc:void 0!==u?u:null,prefetchHead:s?r:null,loading:void 0!==d?d:null,rsc:h(),head:s?h():null,lazyDataResolved:!1}}function u(e,t){let r=e.node;if(null===r)return;let n=e.children;if(null===n)d(e.route,r,t);else for(let e of n.values())u(e,t);e.node=null}function d(e,t,r){let n=e[1],i=t.parallelRoutes;for(let e in n){let t=n[e],a=i.get(e);if(void 0===a)continue;let s=t[0],l=(0,o.createRouterCacheKey)(s),u=a.get(l);void 0!==u&&d(t,u,r)}let a=t.rsc;f(a)&&(null===r?a.resolve(null):a.reject(r));let s=t.head;f(s)&&s.resolve(null)}let c=Symbol();function f(e){return e&&e.tag===c}function h(){let e,t;let r=new Promise((r,n)=>{e=r,t=n});return r.status="pending",r.resolve=t=>{"pending"===r.status&&(r.status="fulfilled",r.value=t,e(t))},r.reject=e=>{"pending"===r.status&&(r.status="rejected",r.reason=e,t(e))},r.tag=c,r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createPrefetchCacheEntryForInitialLoad:function(){return u},getOrCreatePrefetchCacheEntry:function(){return l},prunePrefetchCache:function(){return c}});let n=r(7584),i=r(9009),o=r(7767),a=r(1156);function s(e,t){let r=(0,n.createHrefFromUrl)(e,!1);return t?t+"%"+r:r}function l(e){let t,{url:r,nextUrl:n,tree:i,buildId:a,prefetchCache:l,kind:u}=e,c=s(r,n),f=l.get(c);if(f)t=f;else{let e=s(r),n=l.get(e);n&&(t=n)}return t?(t.status=p(t),t.kind!==o.PrefetchKind.FULL&&u===o.PrefetchKind.FULL)?d({tree:i,url:r,buildId:a,nextUrl:n,prefetchCache:l,kind:null!=u?u:o.PrefetchKind.TEMPORARY}):(u&&t.kind===o.PrefetchKind.TEMPORARY&&(t.kind=u),t):d({tree:i,url:r,buildId:a,nextUrl:n,prefetchCache:l,kind:u||o.PrefetchKind.TEMPORARY})}function u(e){let{nextUrl:t,tree:r,prefetchCache:n,url:i,kind:a,data:l}=e,[,,,u]=l,d=u?s(i,t):s(i),c={treeAtTimeOfPrefetch:r,data:Promise.resolve(l),kind:a,prefetchTime:Date.now(),lastUsedTime:Date.now(),key:d,status:o.PrefetchCacheEntryStatus.fresh};return n.set(d,c),c}function d(e){let{url:t,kind:r,tree:n,nextUrl:l,buildId:u,prefetchCache:d}=e,c=s(t),f=a.prefetchQueue.enqueue(()=>(0,i.fetchServerResponse)(t,n,l,u,r).then(e=>{let[,,,r]=e;return r&&function(e){let{url:t,nextUrl:r,prefetchCache:n}=e,i=s(t),o=n.get(i);if(!o)return;let a=s(t,r);n.set(a,o),n.delete(i)}({url:t,nextUrl:l,prefetchCache:d}),e})),h={treeAtTimeOfPrefetch:n,data:f,kind:r,prefetchTime:Date.now(),lastUsedTime:null,key:c,status:o.PrefetchCacheEntryStatus.fresh};return d.set(c,h),h}function c(e){for(let[t,r]of e)p(r)===o.PrefetchCacheEntryStatus.expired&&e.delete(t)}let f=1e3*Number("30"),h=1e3*Number("300");function p(e){let{kind:t,prefetchTime:r,lastUsedTime:n}=e;return Date.now()<(null!=n?n:r)+f?n?o.PrefetchCacheEntryStatus.reusable:o.PrefetchCacheEntryStatus.fresh:"auto"===t&&Date.now()<r+h?o.PrefetchCacheEntryStatus.stale:"full"===t&&Date.now()<r+h?o.PrefetchCacheEntryStatus.reusable:o.PrefetchCacheEntryStatus.expired}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fastRefreshReducer",{enumerable:!0,get:function(){return n}}),r(9009),r(7584),r(5166),r(3772),r(941),r(7252),r(9894),r(2994),r(5652),r(5262);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"findHeadInCache",{enumerable:!0,get:function(){return i}});let n=r(9886);function i(e,t){return function e(t,r,i){if(0===Object.keys(r).length)return[t,i];for(let o in r){let[a,s]=r[o],l=t.parallelRoutes.get(o);if(!l)continue;let u=(0,n.createRouterCacheKey)(a),d=l.get(u);if(!d)continue;let c=e(d,s,i+"/"+u);if(c)return c}return null}(e,t,"")}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2162:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasInterceptionRouteInCurrentTree",{enumerable:!0,get:function(){return function e(t){let[r,i]=t;if(Array.isArray(r)&&("di"===r[2]||"ci"===r[2])||"string"==typeof r&&(0,n.isInterceptionRouteAppPath)(r))return!0;if(i){for(let t in i)if(e(i[t]))return!0}return!1}}});let n=r(7356);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleExternalUrl:function(){return _},navigateReducer:function(){return g}}),r(9009);let n=r(7584),i=r(3193),o=r(5166),a=r(4614),s=r(3772),l=r(7767),u=r(7252),d=r(9894),c=r(1156),f=r(2994),h=r(8071),p=(r(8831),r(9373)),y=r(2895);function _(e,t,r,n){return t.mpaNavigation=!0,t.canonicalUrl=r,t.pendingPush=n,t.scrollableSegments=void 0,(0,u.handleMutable)(e,t)}function m(e){let t=[],[r,n]=e;if(0===Object.keys(n).length)return[[r]];for(let[e,i]of Object.entries(n))for(let n of m(i))""===r?t.push([e,...n]):t.push([r,e,...n]);return t}let g=function(e,t){let{url:r,isExternalUrl:g,navigateType:v,shouldScroll:b}=t,E={},{hash:S}=r,O=(0,n.createHrefFromUrl)(r),T="push"===v;if((0,p.prunePrefetchCache)(e.prefetchCache),E.preserveCustomHistoryState=!1,g)return _(e,E,r.toString(),T);let w=(0,p.getOrCreatePrefetchCacheEntry)({url:r,nextUrl:e.nextUrl,tree:e.tree,buildId:e.buildId,prefetchCache:e.prefetchCache}),{treeAtTimeOfPrefetch:P,data:R}=w;return c.prefetchQueue.bump(R),R.then(t=>{let[r,c]=t,p=!1;if(w.lastUsedTime||(w.lastUsedTime=Date.now(),p=!0),"string"==typeof r)return _(e,E,r,T);if(document.getElementById("__next-page-redirect"))return _(e,E,O,T);let g=e.tree,v=e.cache,R=[];for(let t of r){let r=t.slice(0,-4),n=t.slice(-3)[0],u=["",...r],c=(0,o.applyRouterStatePatchToTree)(u,g,n,O);if(null===c&&(c=(0,o.applyRouterStatePatchToTree)(u,P,n,O)),null!==c){if((0,s.isNavigatingToNewRootLayout)(g,c))return _(e,E,O,T);let o=(0,f.createEmptyCacheNode)(),b=!1;for(let e of(w.status!==l.PrefetchCacheEntryStatus.stale||p?b=(0,d.applyFlightData)(v,o,t,w):(b=function(e,t,r,n){let i=!1;for(let o of(e.rsc=t.rsc,e.prefetchRsc=t.prefetchRsc,e.loading=t.loading,e.parallelRoutes=new Map(t.parallelRoutes),m(n).map(e=>[...r,...e])))(0,y.clearCacheNodeDataForSegmentPath)(e,t,o),i=!0;return i}(o,v,r,n),w.lastUsedTime=Date.now()),(0,a.shouldHardNavigate)(u,g)?(o.rsc=v.rsc,o.prefetchRsc=v.prefetchRsc,(0,i.invalidateCacheBelowFlightSegmentPath)(o,v,r),E.cache=o):b&&(E.cache=o,v=o),g=c,m(n))){let t=[...r,...e];t[t.length-1]!==h.DEFAULT_SEGMENT_KEY&&R.push(t)}}}return E.patchedTree=g,E.canonicalUrl=c?(0,n.createHrefFromUrl)(c):O,E.pendingPush=T,E.scrollableSegments=R,E.hashFragment=S,E.shouldScroll=b,(0,u.handleMutable)(e,E)},()=>e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{prefetchQueue:function(){return a},prefetchReducer:function(){return s}});let n=r(5138),i=r(7815),o=r(9373),a=new i.PromiseQueue(5);function s(e,t){(0,o.prunePrefetchCache)(e.prefetchCache);let{url:r}=t;return r.searchParams.delete(n.NEXT_RSC_UNION_QUERY),(0,o.getOrCreatePrefetchCacheEntry)({url:r,nextUrl:e.nextUrl,prefetchCache:e.prefetchCache,kind:t.kind,tree:e.tree,buildId:e.buildId}),e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"refreshReducer",{enumerable:!0,get:function(){return p}});let n=r(9009),i=r(7584),o=r(5166),a=r(3772),s=r(941),l=r(7252),u=r(114),d=r(2994),c=r(5652),f=r(5262),h=r(4158);function p(e,t){let{origin:r}=t,p={},y=e.canonicalUrl,_=e.tree;p.preserveCustomHistoryState=!1;let m=(0,d.createEmptyCacheNode)(),g=(0,f.hasInterceptionRouteInCurrentTree)(e.tree);return m.lazyData=(0,n.fetchServerResponse)(new URL(y,r),[_[0],_[1],_[2],"refetch"],g?e.nextUrl:null,e.buildId),m.lazyData.then(async r=>{let[n,d]=r;if("string"==typeof n)return(0,s.handleExternalUrl)(e,p,n,e.pushRef.pendingPush);for(let r of(m.lazyData=null,n)){if(3!==r.length)return console.log("REFRESH FAILED"),e;let[n]=r,l=(0,o.applyRouterStatePatchToTree)([""],_,n,e.canonicalUrl);if(null===l)return(0,c.handleSegmentMismatch)(e,t,n);if((0,a.isNavigatingToNewRootLayout)(_,l))return(0,s.handleExternalUrl)(e,p,y,e.pushRef.pendingPush);let f=d?(0,i.createHrefFromUrl)(d):void 0;d&&(p.canonicalUrl=f);let[v,b]=r.slice(-2);if(null!==v){let e=v[2];m.rsc=e,m.prefetchRsc=null,(0,u.fillLazyItemsTillLeafWithHead)(m,void 0,n,v,b),p.prefetchCache=new Map}await (0,h.refreshInactiveParallelSegments)({state:e,updatedTree:l,updatedCache:m,includeNextUrl:g,canonicalUrl:p.canonicalUrl||e.canonicalUrl}),p.cache=m,p.patchedTree=l,p.canonicalUrl=y,_=l}return(0,l.handleMutable)(e,p)},()=>e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"restoreReducer",{enumerable:!0,get:function(){return o}});let n=r(7584),i=r(3648);function o(e,t){var r;let{url:o,tree:a}=t,s=(0,n.createHrefFromUrl)(o),l=a||e.tree,u=e.cache;return{buildId:e.buildId,canonicalUrl:s,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:e.focusAndScrollRef,cache:u,prefetchCache:e.prefetchCache,tree:l,nextUrl:null!=(r=(0,i.extractPathFromFlightRouterState)(l))?r:o.pathname}}r(8831),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverActionReducer",{enumerable:!0,get:function(){return v}});let n=r(5424),i=r(5138),o=r(3486),a=r(7584),s=r(941),l=r(5166),u=r(3772),d=r(7252),c=r(114),f=r(2994),h=r(5262),p=r(5652),y=r(4158),{createFromFetch:_,encodeReply:m}=r(6493);async function g(e,t,r){let a,{actionId:s,actionArgs:l}=r,u=await m(l),d=await fetch("",{method:"POST",headers:{Accept:i.RSC_CONTENT_TYPE_HEADER,[i.ACTION]:s,[i.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(e.tree)),...t?{[i.NEXT_URL]:t}:{}},body:u}),c=d.headers.get("x-action-redirect");try{let e=JSON.parse(d.headers.get("x-action-revalidated")||"[[],0,0]");a={paths:e[0]||[],tag:!!e[1],cookie:e[2]}}catch(e){a={paths:[],tag:!1,cookie:!1}}let f=c?new URL((0,o.addBasePath)(c),new URL(e.canonicalUrl,window.location.href)):void 0;if(d.headers.get("content-type")===i.RSC_CONTENT_TYPE_HEADER){let e=await _(Promise.resolve(d),{callServer:n.callServer});if(c){let[,t]=null!=e?e:[];return{actionFlightData:t,redirectLocation:f,revalidatedParts:a}}let[t,[,r]]=null!=e?e:[];return{actionResult:t,actionFlightData:r,redirectLocation:f,revalidatedParts:a}}return{redirectLocation:f,revalidatedParts:a}}function v(e,t){let{resolve:r,reject:n}=t,i={},o=e.canonicalUrl,_=e.tree;i.preserveCustomHistoryState=!1;let m=e.nextUrl&&(0,h.hasInterceptionRouteInCurrentTree)(e.tree)?e.nextUrl:null;return i.inFlightServerAction=g(e,m,t),i.inFlightServerAction.then(async n=>{let{actionResult:h,actionFlightData:g,redirectLocation:v}=n;if(v&&(e.pushRef.pendingPush=!0,i.pendingPush=!0),!g)return(r(h),v)?(0,s.handleExternalUrl)(e,i,v.href,e.pushRef.pendingPush):e;if("string"==typeof g)return(0,s.handleExternalUrl)(e,i,g,e.pushRef.pendingPush);if(i.inFlightServerAction=null,v){let e=(0,a.createHrefFromUrl)(v,!1);i.canonicalUrl=e}for(let r of g){if(3!==r.length)return console.log("SERVER ACTION APPLY FAILED"),e;let[n]=r,d=(0,l.applyRouterStatePatchToTree)([""],_,n,v?(0,a.createHrefFromUrl)(v):e.canonicalUrl);if(null===d)return(0,p.handleSegmentMismatch)(e,t,n);if((0,u.isNavigatingToNewRootLayout)(_,d))return(0,s.handleExternalUrl)(e,i,o,e.pushRef.pendingPush);let[h,g]=r.slice(-2),b=null!==h?h[2]:null;if(null!==b){let t=(0,f.createEmptyCacheNode)();t.rsc=b,t.prefetchRsc=null,(0,c.fillLazyItemsTillLeafWithHead)(t,void 0,n,h,g),await (0,y.refreshInactiveParallelSegments)({state:e,updatedTree:d,updatedCache:t,includeNextUrl:!!m,canonicalUrl:i.canonicalUrl||e.canonicalUrl}),i.cache=t,i.prefetchCache=new Map}i.patchedTree=d,_=d}return r(h),(0,d.handleMutable)(e,i)},t=>(n(t),e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverPatchReducer",{enumerable:!0,get:function(){return c}});let n=r(7584),i=r(5166),o=r(3772),a=r(941),s=r(9894),l=r(7252),u=r(2994),d=r(5652);function c(e,t){let{serverResponse:r}=t,[c,f]=r,h={};if(h.preserveCustomHistoryState=!1,"string"==typeof c)return(0,a.handleExternalUrl)(e,h,c,e.pushRef.pendingPush);let p=e.tree,y=e.cache;for(let r of c){let l=r.slice(0,-4),[c]=r.slice(-3,-2),_=(0,i.applyRouterStatePatchToTree)(["",...l],p,c,e.canonicalUrl);if(null===_)return(0,d.handleSegmentMismatch)(e,t,c);if((0,o.isNavigatingToNewRootLayout)(p,_))return(0,a.handleExternalUrl)(e,h,e.canonicalUrl,e.pushRef.pendingPush);let m=f?(0,n.createHrefFromUrl)(f):void 0;m&&(h.canonicalUrl=m);let g=(0,u.createEmptyCacheNode)();(0,s.applyFlightData)(y,g,r),h.patchedTree=_,h.cache=g,y=g,p=_}return(0,l.handleMutable)(e,h)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{addRefreshMarkerToActiveParallelSegments:function(){return function e(t,r){let[n,i,,a]=t;for(let s in n.includes(o.PAGE_SEGMENT_KEY)&&"refresh"!==a&&(t[2]=r,t[3]="refresh"),i)e(i[s],r)}},refreshInactiveParallelSegments:function(){return a}});let n=r(9894),i=r(9009),o=r(8071);async function a(e){let t=new Set;await s({...e,rootTree:e.updatedTree,fetchedSegments:t})}async function s(e){let{state:t,updatedTree:r,updatedCache:o,includeNextUrl:a,fetchedSegments:l,rootTree:u=r,canonicalUrl:d}=e,[,c,f,h]=r,p=[];if(f&&f!==d&&"refresh"===h&&!l.has(f)){l.add(f);let e=(0,i.fetchServerResponse)(new URL(f,location.origin),[u[0],u[1],u[2],"refetch"],a?t.nextUrl:null,t.buildId).then(e=>{let t=e[0];if("string"!=typeof t)for(let e of t)(0,n.applyFlightData)(o,o,e)});p.push(e)}for(let e in c){let r=s({state:t,updatedTree:c[e],updatedCache:o,includeNextUrl:a,fetchedSegments:l,rootTree:u,canonicalUrl:d});p.push(r)}await Promise.all(p)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7767:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_FAST_REFRESH:function(){return u},ACTION_NAVIGATE:function(){return o},ACTION_PREFETCH:function(){return l},ACTION_REFRESH:function(){return i},ACTION_RESTORE:function(){return a},ACTION_SERVER_ACTION:function(){return d},ACTION_SERVER_PATCH:function(){return s},PrefetchCacheEntryStatus:function(){return n},PrefetchKind:function(){return r},isThenable:function(){return c}});let i="refresh",o="navigate",a="restore",s="server-patch",l="prefetch",u="fast-refresh",d="server-action";function c(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"})(r||(r={})),function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return n}}),r(7767),r(941),r(4025),r(5608),r(9809),r(1156),r(5703),r(5240);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"shouldHardNavigate",{enumerable:!0,get:function(){return function e(t,r){let[i,o]=r,[a,s]=t;return(0,n.matchSegment)(a,i)?!(t.length<=2)&&e(t.slice(2),o[s]):!!Array.isArray(a)}}});let n=r(455);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createDynamicallyTrackedSearchParams:function(){return s},createUntrackedSearchParams:function(){return a}});let n=r(4749),i=r(2846),o=r(2255);function a(e){let t=n.staticGenerationAsyncStorage.getStore();return t&&t.forceStatic?{}:e}function s(e){let t=n.staticGenerationAsyncStorage.getStore();return t?t.forceStatic?{}:t.isStaticGeneration||t.dynamicShouldError?new Proxy({},{get:(e,r,n)=>("string"==typeof r&&(0,i.trackDynamicDataAccessed)(t,"searchParams."+r),o.ReflectAdapter.get(e,r,n)),has:(e,r)=>("string"==typeof r&&(0,i.trackDynamicDataAccessed)(t,"searchParams."+r),Reflect.has(e,r)),ownKeys:e=>((0,i.trackDynamicDataAccessed)(t,"searchParams"),Reflect.ownKeys(e))}):e:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6488:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return i}});let r="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=r}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unresolvedThenable",{enumerable:!0,get:function(){return r}});let r={then:()=>{}};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{useReducerWithReduxDevtools:function(){return s},useUnwrapState:function(){return a}});let n=r(8374)._(r(7577)),i=r(7767);function o(e){if(e instanceof Map){let t={};for(let[r,n]of e.entries()){if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n._bundlerConfig){t[r]="FlightData";continue}}t[r]=o(n)}return t}if("object"==typeof e&&null!==e){let t={};for(let r in e){let n=e[r];if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n.hasOwnProperty("_bundlerConfig")){t[r]="FlightData";continue}}t[r]=o(n)}return t}return Array.isArray(e)?e.map(o):e}function a(e){return(0,i.isThenable)(e)?(0,n.use)(e):e}r(3879);let s=function(e){return[e,()=>{},()=>{}]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return i}});let n=r(4655);function i(e){return(0,n.pathHasPrefix)(e,"")}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return o}});let n=r(3236),i=r(3067),o=e=>{if(!e.startsWith("/"))return e;let{pathname:t,query:r,hash:o}=(0,i.parsePath)(e);return""+(0,n.removeTrailingSlash)(t)+r+o};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4237:(e,t,r)=>{"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeBasePath",{enumerable:!0,get:function(){return n}}),r(7929),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6401:(e,t)=>{"use strict";function r(e){return new URL(e,"http://n").pathname}function n(e){return/https?:\/\//.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getPathname:function(){return r},isFullStringUrl:function(){return n}})},2846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Postpone:function(){return c},createPostponedAbortSignal:function(){return m},createPrerenderState:function(){return l},formatDynamicAPIAccesses:function(){return y},markCurrentScopeAsDynamic:function(){return u},trackDynamicDataAccessed:function(){return d},trackDynamicFetch:function(){return f},usedDynamicAPIs:function(){return p}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(7577)),i=r(442),o=r(6488),a=r(6401),s="function"==typeof n.default.unstable_postpone;function l(e){return{isDebugSkeleton:e,dynamicAccesses:[]}}function u(e,t){let r=(0,a.getPathname)(e.urlPathname);if(!e.isUnstableCacheCallback){if(e.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)h(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new i.DynamicServerError(`Route ${r} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}}function d(e,t){let r=(0,a.getPathname)(e.urlPathname);if(e.isUnstableCacheCallback)throw Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)h(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new i.DynamicServerError(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}function c({reason:e,prerenderState:t,pathname:r}){h(t,e,r)}function f(e,t){e.prerenderState&&h(e.prerenderState,t,e.urlPathname)}function h(e,t,r){_();let i=`Route ${r} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;e.dynamicAccesses.push({stack:e.isDebugSkeleton?Error().stack:void 0,expression:t}),n.default.unstable_postpone(i)}function p(e){return e.dynamicAccesses.length>0}function y(e){return e.dynamicAccesses.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function _(){if(!s)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function m(e){_();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}},2357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentParam",{enumerable:!0,get:function(){return i}});let n=r(7356);function i(e){let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t));return(t&&(e=e.slice(t.length)),e.startsWith("[[...")&&e.endsWith("]]"))?{type:"optional-catchall",param:e.slice(5,-2)}:e.startsWith("[...")&&e.endsWith("]")?{type:t?"catchall-intercepted":"catchall",param:e.slice(4,-1)}:e.startsWith("[")&&e.endsWith("]")?{type:t?"dynamic-intercepted":"dynamic",param:e.slice(1,-1)}:null}},7356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},extractInterceptionRouteInformation:function(){return a},isInterceptionRouteAppPath:function(){return o}});let n=r(2862),i=["(..)(..)","(.)","(..)","(...)"];function o(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function a(e){let t,r,o;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,o]=e.split(r,2);break}if(!t||!r||!o)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":o="/"===t?`/${o}`:t+"/"+o;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);o=t.split("/").slice(0,-1).concat(o).join("/");break;case"(...)":o="/"+o;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);o=a.slice(0,-2).concat(o).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:o}}},1616:(e,t,r)=>{"use strict";e.exports=r(399)},2413:(e,t,r)=>{"use strict";e.exports=r(1616).vendored.contexts.AppRouterContext},7008:(e,t,r)=>{"use strict";e.exports=r(1616).vendored.contexts.HooksClientContext},3347:(e,t,r)=>{"use strict";e.exports=r(1616).vendored.contexts.ServerInsertedHtml},962:(e,t,r)=>{"use strict";e.exports=r(1616).vendored["react-ssr"].ReactDOM},326:(e,t,r)=>{"use strict";e.exports=r(1616).vendored["react-ssr"].ReactJsxRuntime},6493:(e,t,r)=>{"use strict";e.exports=r(1616).vendored["react-ssr"].ReactServerDOMWebpackClientEdge},7577:(e,t,r)=>{"use strict";e.exports=r(1616).vendored["react-ssr"].React},2255:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},2165:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&4294967295;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},4129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},6058:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},3879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ActionQueueContext:function(){return s},createMutableActionQueue:function(){return d}});let n=r(8374),i=r(7767),o=r(3860),a=n._(r(7577)),s=a.default.createContext(null);function l(e,t){null!==e.pending&&(e.pending=e.pending.next,null!==e.pending?u({actionQueue:e,action:e.pending,setState:t}):e.needsRefresh&&(e.needsRefresh=!1,e.dispatch({type:i.ACTION_REFRESH,origin:window.location.origin},t)))}async function u(e){let{actionQueue:t,action:r,setState:n}=e,o=t.state;if(!o)throw Error("Invariant: Router state not initialized");t.pending=r;let a=r.payload,s=t.action(o,a);function u(e){r.discarded||(t.state=e,t.devToolsInstance&&t.devToolsInstance.send(a,e),l(t,n),r.resolve(e))}(0,i.isThenable)(s)?s.then(u,e=>{l(t,n),r.reject(e)}):u(s)}function d(){let e={state:null,dispatch:(t,r)=>(function(e,t,r){let n={resolve:r,reject:()=>{}};if(t.type!==i.ACTION_RESTORE){let e=new Promise((e,t)=>{n={resolve:e,reject:t}});(0,a.startTransition)(()=>{r(e)})}let o={payload:t,next:null,resolve:n.resolve,reject:n.reject};null===e.pending?(e.last=o,u({actionQueue:e,action:o,setState:r})):t.type===i.ACTION_NAVIGATE||t.type===i.ACTION_RESTORE?(e.pending.discarded=!0,e.last=o,e.pending.payload.type===i.ACTION_SERVER_ACTION&&(e.needsRefresh=!0),u({actionQueue:e,action:o,setState:r})):(null!==e.last&&(e.last.next=o),e.last=o)})(e,t,r),action:async(e,t)=>{if(null===e)throw Error("Invariant: Router state not initialized");return(0,o.reducer)(e,t)},pending:null,last:null};return e}},8974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=r(3067);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:o}=(0,n.parsePath)(e);return""+t+r+i+o}},2862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return o},normalizeRscURL:function(){return a}});let n=r(6058),i=r(8071);function o(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},9976:(e,t)=>{"use strict";function r(e,t){if(void 0===t&&(t={}),t.onlyHashChange){e();return}let r=document.documentElement,n=r.style.scrollBehavior;r.style.scrollBehavior="auto",t.dontForceLayout||r.getClientRects(),e(),r.style.scrollBehavior=n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSmoothScroll",{enumerable:!0,get:function(){return r}})},2148:(e,t)=>{"use strict";function r(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isBot",{enumerable:!0,get:function(){return r}})},3067:(e,t)=>{"use strict";function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},4655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=r(3067);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},3236:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},8071:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return i},PAGE_SEGMENT_KEY:function(){return n},isGroupSegment:function(){return r}});let n="__PAGE__",i="__DEFAULT__"},576:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},9856:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(7577),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,a=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),i=n[0].inst,d=n[1];return s(function(){i.value=r,i.getSnapshot=t,u(i)&&d({inst:i})},[e,r,t]),a(function(){return u(i)&&d({inst:i}),e(function(){u(i)&&d({inst:i})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},7513:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(7577),i=r(4095),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var c=s(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;var h=a(e,(c=u(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var r=n(e);return void 0!==i&&i(t,r)?t:(a=e,s=r)}var a,s,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]))[0],c[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),d(h),h}},4095:(e,t,r)=>{"use strict";e.exports=r(9856)},1508:(e,t,r)=>{"use strict";e.exports=r(7513)},8570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createProxy",{enumerable:!0,get:function(){return n}});let n=r(1749).createClientModuleProxy},9943:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\app-router.js")},3144:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\client-page.js")},7922:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\error-boundary.js")},5106:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\layout-router.js")},525:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\not-found-boundary.js")},5866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}}),r(3370);let n=r(9510);r(1159);let i={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block"},h1:{display:"inline-block",margin:"0 20px 0 0",padding:"0 23px 0 0",fontSize:24,fontWeight:500,verticalAlign:"top",lineHeight:"49px"},h2:{fontSize:14,fontWeight:400,lineHeight:"49px",margin:0}};function o(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("title",{children:"404: This page could not be found."}),(0,n.jsx)("div",{style:i.error,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}),(0,n.jsx)("h1",{className:"next-error-h1",style:i.h1,children:"404"}),(0,n.jsx)("div",{style:i.desc,children:(0,n.jsx)("h2",{style:i.h2,children:"This page could not be found."})})]})})]})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4892:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\Users\\SSAFY\\Desktop\\LEO\\BlockNote\\BlockNote\\node_modules\\next\\dist\\client\\components\\render-from-template-context.js")},9181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createDynamicallyTrackedSearchParams:function(){return s},createUntrackedSearchParams:function(){return a}});let n=r(5869),i=r(6278),o=r(8238);function a(e){let t=n.staticGenerationAsyncStorage.getStore();return t&&t.forceStatic?{}:e}function s(e){let t=n.staticGenerationAsyncStorage.getStore();return t?t.forceStatic?{}:t.isStaticGeneration||t.dynamicShouldError?new Proxy({},{get:(e,r,n)=>("string"==typeof r&&(0,i.trackDynamicDataAccessed)(t,"searchParams."+r),o.ReflectAdapter.get(e,r,n)),has:(e,r)=>("string"==typeof r&&(0,i.trackDynamicDataAccessed)(t,"searchParams."+r),Reflect.has(e,r)),ownKeys:e=>((0,i.trackDynamicDataAccessed)(t,"searchParams"),Reflect.ownKeys(e))}):e:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{AppRouter:function(){return i.default},ClientPageRoot:function(){return d.ClientPageRoot},LayoutRouter:function(){return o.default},NotFoundBoundary:function(){return h.NotFoundBoundary},Postpone:function(){return _.Postpone},RenderFromTemplateContext:function(){return a.default},actionAsyncStorage:function(){return u.actionAsyncStorage},createDynamicallyTrackedSearchParams:function(){return c.createDynamicallyTrackedSearchParams},createUntrackedSearchParams:function(){return c.createUntrackedSearchParams},decodeAction:function(){return n.decodeAction},decodeFormState:function(){return n.decodeFormState},decodeReply:function(){return n.decodeReply},patchFetch:function(){return b},preconnect:function(){return y.preconnect},preloadFont:function(){return y.preloadFont},preloadStyle:function(){return y.preloadStyle},renderToReadableStream:function(){return n.renderToReadableStream},requestAsyncStorage:function(){return l.requestAsyncStorage},serverHooks:function(){return f},staticGenerationAsyncStorage:function(){return s.staticGenerationAsyncStorage},taintObjectReference:function(){return m.taintObjectReference}});let n=r(1749),i=g(r(9943)),o=g(r(5106)),a=g(r(4892)),s=r(5869),l=r(4580),u=r(2934),d=r(3144),c=r(9181),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(4789)),h=r(525),p=r(670);r(7922);let y=r(135),_=r(9257),m=r(526);function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(){return(0,p.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:s.staticGenerationAsyncStorage})}},9257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Postpone",{enumerable:!0,get:function(){return n.Postpone}});let n=r(6278)},135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{preconnect:function(){return a},preloadFont:function(){return o},preloadStyle:function(){return i}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(7049));function i(e,t){let r={as:"style"};"string"==typeof t&&(r.crossOrigin=t),n.default.preload(e,r)}function o(e,t,r){let i={as:"font",type:t};"string"==typeof r&&(i.crossOrigin=r),n.default.preload(e,i)}function a(e,t){n.default.preconnect(e,"string"==typeof t?{crossOrigin:t}:void 0)}},526:(e,t,r)=>{"use strict";function n(){throw Error("Taint can only be used with the taint flag.")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{taintObjectReference:function(){return i},taintUniqueValue:function(){return o}}),r(1159);let i=n,o=n},7049:(e,t,r)=>{"use strict";e.exports=r(3191).vendored["react-rsc"].ReactDOM},9510:(e,t,r)=>{"use strict";e.exports=r(3191).vendored["react-rsc"].ReactJsxRuntime},1749:(e,t,r)=>{"use strict";e.exports=r(3191).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},8238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},9183:()=>{},2402:()=>{},3557:(e,t,r)=>{"use strict";let n,i,o,a,s;r.d(t,{EH:()=>tC,WT:()=>t8,_A:()=>rh,Wo:()=>ry,kB:()=>rp,$P:()=>r_});var l=r(7577),u=Object.defineProperty,d="@liveblocks/core",c="2.9.0",f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function h(e){console.error(e)}function p(e,t){throw Error(t)}function y(e,t="Expected value to be non-nullable"){return e}function _(){let e,t;return[new Promise((r,n)=>{e=r,t=n}),e,t]}function m(){let[e,t,r]=_();return{promise:e,resolve:t,reject:r}}function g(){let e=new Set,t=new Set,r=null;function n(e){return t.add(e),()=>t.delete(e)}function i(t){return e.add(t),()=>e.delete(t)}async function o(e){let t;return new Promise(r=>{t=n(t=>{(void 0===e||e(t))&&r(t)})}).finally(()=>t?.())}function a(r){e.forEach(e=>e(r)),e.clear(),t.forEach(e=>e(r))}return{notify:function(e){null!==r?r.push(e):a(e)},subscribe:n,subscribeOnce:i,_forceClear:function(){e.clear(),t.clear()},count:function(){return e.size+t.size},waitUntil:o,pause:function(){r=[]},unpause:function(){if(null!==r){for(let e of r)a(e);r=null}},observable:{subscribe:n,subscribeOnce:i,waitUntil:o}}}var v={};((e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})})(v,{error:()=>O,errorWithTitle:()=>P,warn:()=>S,warnWithTitle:()=>w});var b="background:#0e0d12;border-radius:9999px;color:#fff;padding:3px 7px;font-family:sans-serif;font-weight:600;";function E(e){return"undefined"==typeof window?console[e]:(t,...r)=>console[e]("%cLiveblocks",b,t,...r)}var S=E("warn"),O=E("error");function T(e){return"undefined"==typeof window?console[e]:(t,r,...n)=>console[e](`%cLiveblocks%c ${t}`,b,"font-weight:600",r,...n)}var w=T("warn"),P=T("error"),R=class{constructor(e){this.curr=e}get current(){return this.curr}allowPatching(e){let t=this,r=!0;e({...this.curr,patch(e){if(r)for(let r of(t.curr=Object.assign({},t.curr,e),Object.entries(e))){let[e,t]=r;"patch"!==e&&(this[e]=t)}else throw Error("Can no longer patch stale context")}}),r=!1}},A=1,I=class{get initialState(){let e=this.states.values()[Symbol.iterator]().next();if(!e.done)return e.value;throw Error("No states defined yet")}get currentState(){if(null===this.currentStateOrNull){if(0===this.runningState)throw Error("Not started yet");throw Error("Already stopped")}return this.currentStateOrNull}start(){if(0!==this.runningState)throw Error("State machine has already started");return this.runningState=1,this.currentStateOrNull=this.initialState,this.enter(null),this}stop(){if(1!==this.runningState)throw Error("Cannot stop a state machine that hasn't started yet");this.exit(null),this.runningState=2,this.currentStateOrNull=null}constructor(e){this.id=A++,this.runningState=0,this.currentStateOrNull=null,this.states=new Set,this.enterFns=new Map,this.cleanupStack=[],this.knownEventTypes=new Set,this.allowedTransitions=new Map,this.currentContext=new R(e),this.eventHub={didReceiveEvent:g(),willTransition:g(),didIgnoreEvent:g(),willExitState:g(),didEnterState:g()},this.events={didReceiveEvent:this.eventHub.didReceiveEvent.observable,willTransition:this.eventHub.willTransition.observable,didIgnoreEvent:this.eventHub.didIgnoreEvent.observable,willExitState:this.eventHub.willExitState.observable,didEnterState:this.eventHub.didEnterState.observable}}get context(){return this.currentContext.current}addState(e){if(0!==this.runningState)throw Error("Already started");return this.states.add(e),this}onEnter(e,t){if(0!==this.runningState)throw Error("Already started");if(this.enterFns.has(e))throw Error(`enter/exit function for ${e} already exists`);return this.enterFns.set(e,t),this}onEnterAsync(e,t,r,n){return this.onEnter(e,()=>{let e=new AbortController,i=e.signal,o=!1;return t(this.currentContext.current,i).then(e=>{i.aborted||(o=!0,this.transition({type:"ASYNC_OK",data:e},r))},e=>{i.aborted||(o=!0,this.transition({type:"ASYNC_ERROR",reason:e},n))}),()=>{o||e.abort()}})}getStatesMatching(e){let t=[];if("*"===e)for(let e of this.states)t.push(e);else if(e.endsWith(".*")){let r=e.slice(0,-1);for(let e of this.states)e.startsWith(r)&&t.push(e)}else this.states.has(e)&&t.push(e);if(0===t.length)throw Error(`No states match ${JSON.stringify(e)}`);return t}addTransitions(e,t){if(0!==this.runningState)throw Error("Already started");for(let r of this.getStatesMatching(e)){let n=this.allowedTransitions.get(r);for(let[i,o]of(void 0===n&&(n=new Map,this.allowedTransitions.set(r,n)),Object.entries(t))){if(n.has(i))throw Error(`Trying to set transition "${i}" on "${r}" (via "${e}"), but a transition already exists there.`);let t=o;if(this.knownEventTypes.add(i),void 0!==t){let e="function"==typeof t?t:()=>t;n.set(i,e)}}}return this}addTimedTransition(e,t,r){return this.onEnter(e,()=>{let e=setTimeout(()=>{this.transition({type:"TIMER"},r)},"function"==typeof t?t(this.currentContext.current):t);return()=>{clearTimeout(e)}})}getTargetFn(e){return this.allowedTransitions.get(this.currentState)?.get(e)}exit(e){this.eventHub.willExitState.notify(this.currentState),this.currentContext.allowPatching(t=>{e=e??this.cleanupStack.length;for(let r=0;r<e;r++)this.cleanupStack.pop()?.(t)})}enter(e){let t=function(e,t){let r=e.split(".");if(t<1||t>r.length+1)throw Error("Invalid number of levels");let n=[];t>r.length&&n.push("*");for(let e=r.length-t+1;e<r.length;e++){let t=r.slice(0,e);t.length>0&&n.push(t.join(".")+".*")}return n.push(e),n}(this.currentState,e??this.currentState.split(".").length+1);this.currentContext.allowPatching(e=>{for(let r of t){let t=this.enterFns.get(r),n=t?.(e);"function"==typeof n?this.cleanupStack.push(n):this.cleanupStack.push(null)}}),this.eventHub.didEnterState.notify(this.currentState)}send(e){if(!this.knownEventTypes.has(e.type))throw Error(`Invalid event ${JSON.stringify(e.type)}`);if(2===this.runningState)return;let t=this.getTargetFn(e.type);if(void 0!==t)return this.transition(e,t);this.eventHub.didIgnoreEvent.notify(e)}transition(e,t){let r,n;this.eventHub.didReceiveEvent.notify(e);let i=this.currentState,o=("function"==typeof t?t:()=>t)(e,this.currentContext.current);if(null===o){this.eventHub.didIgnoreEvent.notify(e);return}if("string"==typeof o?r=o:(r=o.target,n=Array.isArray(o.effect)?o.effect:[o.effect]),!this.states.has(r))throw Error(`Invalid next state name: ${JSON.stringify(r)}`);this.eventHub.willTransition.notify({from:i,to:r});let[a,s]=function(e,t){if(e===t)return[0,0];let r=e.split("."),n=t.split("."),i=Math.min(r.length,n.length),o=0;for(;o<i&&r[o]===n[o];o++);return[r.length-o,n.length-o]}(this.currentState,r);if(a>0&&this.exit(a),this.currentStateOrNull=r,void 0!==n){let t=n;this.currentContext.allowPatching(r=>{for(let n of t)"function"==typeof n?n(r,e):r.patch(n)})}s>0&&this.enter(s)}};function j(e){throw Error(e)}function C(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function x(e){return Object.entries(e)}function M(e){try{return JSON.parse(e)}catch(e){return}}function N(e){return JSON.parse(JSON.stringify(e))}function k(e){return e.filter(e=>null!=e)}function D(e){let t={...e};return Object.keys(e).forEach(e=>{void 0===t[e]&&delete t[e]}),t}async function U(e,t,r){let n;return Promise.race([e,new Promise((e,i)=>{n=setTimeout(()=>{i(Error(r))},t)})]).finally(()=>clearTimeout(n))}function L(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw setTimeout(()=>{t=null},5e3),e})),t)}var F=((n=F||{})[n.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",n[n.USER_JOINED=101]="USER_JOINED",n[n.USER_LEFT=102]="USER_LEFT",n[n.BROADCASTED_EVENT=103]="BROADCASTED_EVENT",n[n.ROOM_STATE=104]="ROOM_STATE",n[n.INITIAL_STORAGE_STATE=200]="INITIAL_STORAGE_STATE",n[n.UPDATE_STORAGE=201]="UPDATE_STORAGE",n[n.REJECT_STORAGE_OP=299]="REJECT_STORAGE_OP",n[n.UPDATE_YDOC=300]="UPDATE_YDOC",n[n.THREAD_CREATED=400]="THREAD_CREATED",n[n.THREAD_DELETED=407]="THREAD_DELETED",n[n.THREAD_METADATA_UPDATED=401]="THREAD_METADATA_UPDATED",n[n.THREAD_UPDATED=408]="THREAD_UPDATED",n[n.COMMENT_CREATED=402]="COMMENT_CREATED",n[n.COMMENT_EDITED=403]="COMMENT_EDITED",n[n.COMMENT_DELETED=404]="COMMENT_DELETED",n[n.COMMENT_REACTION_ADDED=405]="COMMENT_REACTION_ADDED",n[n.COMMENT_REACTION_REMOVED=406]="COMMENT_REACTION_REMOVED",n),$=((i=$||{})[i.CLOSE_NORMAL=1e3]="CLOSE_NORMAL",i[i.CLOSE_ABNORMAL=1006]="CLOSE_ABNORMAL",i[i.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",i[i.TRY_AGAIN_LATER=1013]="TRY_AGAIN_LATER",i[i.INVALID_MESSAGE_FORMAT=4e3]="INVALID_MESSAGE_FORMAT",i[i.NOT_ALLOWED=4001]="NOT_ALLOWED",i[i.MAX_NUMBER_OF_MESSAGES_PER_SECONDS=4002]="MAX_NUMBER_OF_MESSAGES_PER_SECONDS",i[i.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS=4003]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS",i[i.MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP=4004]="MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP",i[i.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM=4005]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM",i[i.ROOM_ID_UPDATED=4006]="ROOM_ID_UPDATED",i[i.KICKED=4100]="KICKED",i[i.TOKEN_EXPIRED=4109]="TOKEN_EXPIRED",i[i.CLOSE_WITHOUT_RETRY=4999]="CLOSE_WITHOUT_RETRY",i);function B(e){return 4999===e||e>=4e3&&e<4100}function H(e){return 1013===e||e>=4200&&e<4300}function K(e){let t=e.currentState;switch(t){case"@ok.connected":case"@ok.awaiting-pong":return"connected";case"@idle.initial":return"initial";case"@auth.busy":case"@auth.backoff":case"@connecting.busy":case"@connecting.backoff":case"@idle.zombie":return e.context.successCount>0?"reconnecting":"connecting";case"@idle.failed":return"disconnected";default:return p(t,"Unknown state")}}var z=[250,500,1e3,2e3,4e3,8e3,1e4],W=z[0]-1,G=[2e3,3e4,6e4,3e5],q=class extends Error{constructor(e){super(e)}},V=class extends Error{constructor(e,t){super(e),this.code=t}};function Y(e,t){return t.find(t=>t>e)??t[t.length-1]}function J(e){e.patch({backoffDelay:Y(e.backoffDelay,z)})}function X(e){e.patch({backoffDelay:Y(e.backoffDelay,G)})}function Q(e){e.patch({successCount:0})}function Z(e,t){let r=2===e?O:1===e?S:()=>{};return()=>{r(t)}}function ee(e){let t="Connection to Liveblocks websocket server";return r=>{e instanceof Error?S(`${t} could not be established. ${String(e)}`):S(en(e)?`${t} closed prematurely (code: ${e.code}). Retrying in ${r.backoffDelay}ms.`:`${t} could not be established.`)}}function et(e){let t=[`code: ${e.code}`];return e.reason&&t.push(`reason: ${e.reason}`),e=>{S(`Connection to Liveblocks websocket server closed (${t.join(", ")}). Retrying in ${e.backoffDelay}ms.`)}}var er=Z(1,"Connection to WebSocket closed permanently. Won't retry.");function en(e){return!(e instanceof Error)&&"close"===e.type}var ei=e=>t=>t.patch(e),eo=class{constructor(e,t=!1,r=!0){let{machine:n,events:i,cleanups:o}=function(e,t){let r=g();r.pause();let n=g();function i(e,t){return()=>{let r=new V(e,t);n.notify(r)}}let o=new I({successCount:0,authValue:null,socket:null,backoffDelay:W}).addState("@idle.initial").addState("@idle.failed").addState("@idle.zombie").addState("@auth.busy").addState("@auth.backoff").addState("@connecting.busy").addState("@connecting.backoff").addState("@ok.connected").addState("@ok.awaiting-pong");o.addTransitions("*",{RECONNECT:{target:"@auth.backoff",effect:[J,Q]},DISCONNECT:"@idle.initial"}),o.onEnter("@idle.*",Q).addTransitions("@idle.*",{CONNECT:(e,t)=>null!==t.authValue?"@connecting.busy":"@auth.busy"}),o.addTransitions("@auth.backoff",{NAVIGATOR_ONLINE:{target:"@auth.busy",effect:ei({backoffDelay:W})}}).addTimedTransition("@auth.backoff",e=>e.backoffDelay,"@auth.busy").onEnterAsync("@auth.busy",()=>U(e.authenticate(),1e4,"Timed out during auth"),e=>({target:"@connecting.busy",effect:ei({authValue:e.data})}),e=>e.reason instanceof q?{target:"@idle.failed",effect:[Z(2,e.reason.message),i(e.reason.message,-1)]}:{target:"@auth.backoff",effect:[J,Z(2,`Authentication failed: ${e.reason instanceof Error?e.reason.message:String(e.reason)}`)]});let a=e=>o.send({type:"EXPLICIT_SOCKET_ERROR",event:e}),s=e=>o.send({type:"EXPLICIT_SOCKET_CLOSE",event:e}),l=e=>"pong"===e.data?o.send({type:"PONG"}):r.notify(e);function u(e){e&&(e.removeEventListener("error",a),e.removeEventListener("close",s),e.removeEventListener("message",l),e.close())}o.addTransitions("@connecting.backoff",{NAVIGATOR_ONLINE:{target:"@connecting.busy",effect:ei({backoffDelay:W})}}).addTimedTransition("@connecting.backoff",e=>e.backoffDelay,"@connecting.busy").onEnterAsync("@connecting.busy",async(r,n)=>{let i=null,o=null;return U(new Promise((n,u)=>{if(null===r.authValue)throw Error("No auth authValue");let d=e.createSocket(r.authValue);function c(e){i=e,d.removeEventListener("message",l),u(e)}o=d;let[f,h]=_();function p(e){let t=M(e.data);t?.type===104&&h()}t.waitForActorId||h(),d.addEventListener("message",l),t.waitForActorId&&d.addEventListener("message",p),d.addEventListener("error",c),d.addEventListener("close",c),d.addEventListener("open",()=>{d.addEventListener("error",a),d.addEventListener("close",s);let e=()=>{d.removeEventListener("error",c),d.removeEventListener("close",c),d.removeEventListener("message",p)};f.then(()=>{n([d,e])})})}),1e4,"Timed out during websocket connection").then(([e,t])=>{if(t(),n.aborted)throw Error("Aborted");if(i)throw i;return e}).catch(e=>{throw u(o),e})},e=>({target:"@ok.connected",effect:ei({socket:e.data,backoffDelay:W})}),e=>{let t=e.reason;if(t instanceof q)return{target:"@idle.failed",effect:[Z(2,t.message),i(t.message,-1)]};if(en(t)){if(4109===t.code)return"@auth.busy";if(H(t.code))return{target:"@connecting.backoff",effect:[X,ee(t)]};if(B(t.code))return{target:"@idle.failed",effect:[Z(2,t.reason),i(t.reason,t.code)]}}return{target:"@auth.backoff",effect:[J,ee(t)]}});let d={target:"@ok.awaiting-pong",effect:e=>{e.socket?.send("ping")}},c=()=>{let t="undefined"!=typeof document?document:void 0;return t?.visibilityState==="hidden"&&e.canZombie()?"@idle.zombie":d};if(o.addTimedTransition("@ok.connected",3e4,c).addTransitions("@ok.connected",{NAVIGATOR_OFFLINE:c,WINDOW_GOT_FOCUS:d}),o.addTransitions("@idle.zombie",{WINDOW_GOT_FOCUS:"@connecting.backoff"}),o.onEnter("@ok.*",e=>{e.patch({successCount:e.successCount+1});let t=setTimeout(r.unpause,0);return e=>{u(e.socket),e.patch({socket:null}),clearTimeout(t),r.pause()}}).addTransitions("@ok.awaiting-pong",{PONG:"@ok.connected"}).addTimedTransition("@ok.awaiting-pong",2e3,{target:"@connecting.busy",effect:Z(1,"Received no pong from server, assume implicit connection loss.")}).addTransitions("@ok.*",{EXPLICIT_SOCKET_ERROR:(e,t)=>t.socket?.readyState===1?null:{target:"@connecting.backoff",effect:J},EXPLICIT_SOCKET_CLOSE:e=>{var t;return B(e.event.code)?{target:"@idle.failed",effect:[er,i(e.event.reason,e.event.code)]}:(t=e.event.code)>=4100&&t<4200?4109===e.event.code?"@auth.busy":{target:"@auth.backoff",effect:[J,et(e.event)]}:H(e.event.code)?{target:"@connecting.backoff",effect:[X,et(e.event)]}:{target:"@connecting.backoff",effect:[J,et(e.event)]}}}),"undefined"!=typeof document){let e="undefined"!=typeof document?document:void 0,t="undefined"!=typeof window?window:void 0,r=t??e;o.onEnter("*",n=>{function i(){o.send({type:"NAVIGATOR_OFFLINE"})}function a(){o.send({type:"NAVIGATOR_ONLINE"})}function s(){e?.visibilityState==="visible"&&o.send({type:"WINDOW_GOT_FOCUS"})}return t?.addEventListener("online",a),t?.addEventListener("offline",i),r?.addEventListener("visibilitychange",s),()=>{r?.removeEventListener("visibilitychange",s),t?.removeEventListener("online",a),t?.removeEventListener("offline",i),u(n.socket)}})}let f=[],{statusDidChange:h,didConnect:p,didDisconnect:y,unsubscribe:m}=function(e){let t=g(),r=g(),n=g(),i=null,o=e.events.didEnterState.subscribe(()=>{let o=K(e);o!==i&&t.notify(o),"connected"===i&&"connected"!==o?n.notify():"connected"!==i&&"connected"===o&&r.notify(),i=o});return{statusDidChange:t.observable,didConnect:r.observable,didDisconnect:n.observable,unsubscribe:o}}(o);return f.push(m),t.enableDebugLogging&&f.push(function(e){let t=new Date().getTime();function r(...n){S(`${((new Date().getTime()-t)/1e3).toFixed(2)} [FSM #${e.id}]`,...n)}let n=[e.events.didReceiveEvent.subscribe(e=>r(`Event ${e.type}`)),e.events.willTransition.subscribe(({from:e,to:t})=>r("Transitioning",e,"",t)),e.events.didIgnoreEvent.subscribe(e=>r("Ignored event",e.type,e,"(current state won't handle it)"))];return()=>{for(let e of n)e()}}(o)),o.start(),{machine:o,cleanups:f,events:{statusDidChange:h,didConnect:p,didDisconnect:y,onMessage:r.observable,onLiveblocksError:n.observable}}}(e,{waitForActorId:r,enableDebugLogging:t});this.machine=n,this.events=i,this.cleanups=o}getStatus(){try{return K(this.machine)}catch{return"initial"}}get authValue(){return this.machine.context.authValue}connect(){this.machine.send({type:"CONNECT"})}reconnect(){this.machine.send({type:"RECONNECT"})}disconnect(){this.machine.send({type:"DISCONNECT"})}destroy(){let e;for(this.machine.stop();e=this.cleanups.pop();)e()}send(e){let t=this.machine.context?.socket;null===t?S("Cannot send: not connected yet",e):1!==t.readyState?S("Cannot send: WebSocket no longer open",e):t.send(e)}_privateSendMachineEvent(e){this.machine.send(e)}};function ea(e){return e.includes("room:write")}function es(e){return e.includes("comments:write")||e.includes("room:write")}function el(e){var t;let r=e.split(".");if(3!==r.length)throw Error("Authentication error: invalid JWT token");let n=M(function(e){try{let t=e.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){return atob(e)}}(r[1]));if(!(n&&C(t=n)&&("acc"===t.k||"id"===t.k||"sec-legacy"===t.k)))throw Error("Authentication error: expected a valid token but did not get one. Hint: if you are using a callback, ensure the room is passed when creating the token. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientCallback");return{raw:e,parsed:n}}async function eu(e,t,r){let n;let i=await e(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){let e=`${(await i.text()).trim()||"reason not provided in auth response"} (${i.status} returned by POST ${t})`;if(401===i.status||403===i.status)throw new q(`Unauthorized: ${e}`);throw Error(`Failed to authenticate: ${e}`)}try{n=await i.json()}catch(e){throw Error(`Expected a JSON response when doing a POST request on "${t}". ${String(e)}`)}if(!C(n)||"string"!=typeof n.token)throw Error(`Expected a JSON response of the form \`{ token: "..." }\` when doing a POST request on "${t}", but got ${JSON.stringify(n)}`);let{token:o}=n;return{token:o}}var ed=Symbol();function ec(e,...t){return"object"!=typeof e||null===e||Array.isArray(e)?JSON.stringify(e,...t):JSON.stringify(Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{}),...t)}g().observable,Date.now();var ef=class{constructor(e){this.input=e;let{promise:t,resolve:r,reject:n}=m();this.promise=t,this.resolve=r,this.reject=n}},eh=class{constructor(e,t){this.queue=[],this.error=!1,this.callback=e,this.size=t.size??50,this.delay=t.delay}clearDelayTimeout(){void 0!==this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0)}schedule(){this.queue.length===this.size?this.flush():1===this.queue.length&&(this.clearDelayTimeout(),this.delayTimeoutId=setTimeout(()=>void this.flush(),this.delay))}async flush(){if(0===this.queue.length)return;let e=this.queue.splice(0),t=e.map(e=>e.input);try{let r=await this.callback(t);this.error=!1,e.forEach((t,n)=>{let i=r?.[n];Array.isArray(r)?e.length!==r.length?t.reject(Error(`Callback must return an array of the same length as the number of provided items. Expected ${e.length}, but got ${r.length}.`)):i instanceof Error?t.reject(i):t.resolve(i):t.reject(Error("Callback must return an array."))})}catch(t){this.error=!0,e.forEach(e=>{e.reject(t)})}}get(e){let t=this.queue.find(t=>ec(t.input)===ec(e));if(t)return t.promise;let r=new ef(e);return this.queue.push(r),this.schedule(),r.promise}clear(){this.queue=[],this.error=!1,this.clearDelayTimeout()}};function ep(e){let t=new Map,r=g();function n(e,n){t.set(e,n),r.notify()}async function i(r){let i=ec(r);if(!t.has(i))try{n(i,{isLoading:!0});let t=await e.get(r);n(i,{isLoading:!1,data:t})}catch(e){n(i,{isLoading:!1,error:e})}}return{...r.observable,get:i,getState:function(e){let r=ec(e);return t.get(r)}}}function ey(e){let t=!0,r=!1,n=e,i=new Set;function o(){if(r)for(let e of(r=!1,i))e(n)}return{get:function(){return n},set:function(e){let i=n,a=e(i);a!==i&&(n=a,r=!0),t&&o()},batch:function(e){if(!1===t)return e();t=!1;try{e()}finally{t=!0,o()}},subscribe:function(e){return i.add(e),()=>{i.delete(e)}}}}function e_(e){let t=e.editedAt?new Date(e.editedAt):void 0,r=new Date(e.createdAt),n=e.reactions.map(e=>({...e,createdAt:new Date(e.createdAt)}));if(e.body)return{...e,reactions:n,createdAt:r,editedAt:t};{let i=new Date(e.deletedAt);return{...e,reactions:n,createdAt:r,editedAt:t,deletedAt:i}}}function em(e){let t=e.updatedAt?new Date(e.updatedAt):void 0,r=new Date(e.createdAt),n=e.comments.map(e=>e_(e));return{...e,createdAt:r,updatedAt:t,comments:n}}function eg(e){let t=new Date(e.notifiedAt),r=e.readAt?new Date(e.readAt):null;if("activities"in e){let n=e.activities.map(e=>({...e,createdAt:new Date(e.createdAt)}));return{...e,notifiedAt:t,readAt:r,activities:n}}return{...e,notifiedAt:t,readAt:r}}function ev(e){let t=new Date(e.deletedAt);return{...e,deletedAt:t}}function eb(e){let t=new Date(e.deletedAt);return{...e,deletedAt:t}}function eE(e){return"public"===e.type?e.publicApiKey:e.token.raw}function eS(e,t,r){let n=new URL(t,e);return void 0!==r&&(n.search=(r instanceof URLSearchParams?r:function(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))null!=n&&t.set(r,n.toString());return t}(r)).toString()),n.toString()}function eO(e,...t){return e.reduce((e,r,n)=>e+encodeURIComponent(t[n-1]??"")+r)}var eT=eR(0),ew=eR(1),eP=eT+eR(-1);function eR(e){let t=32+(e<0?95+e:e);if(t<32||t>126)throw Error(`Invalid n value: ${e}`);return String.fromCharCode(t)}function eA(e,t){return void 0!==e&&void 0!==t?function(e,t){if(e<t)return eI(e,t);if(e>t)return eI(t,e);throw Error("Cannot compute value between two equal positions")}(e,t):void 0!==e?function(e){for(let t=0;t<=e.length-1;t++){let r=e.charCodeAt(t);if(!(r>=126))return e.substring(0,t)+String.fromCharCode(r+1)}return e+ew}(e):void 0!==t?function(e){let t=e.length-1;for(let r=0;r<=t;r++){let n=e.charCodeAt(r);if(!(n<=32)){if(r!==t)return e.substring(0,r+1);if(33===n)return e.substring(0,r)+eP;return e.substring(0,r)+String.fromCharCode(n-1)}}return ew}(t):ew}function eI(e,t){let r=0,n=e.length,i=t.length;for(;;){let a=r<n?e.charCodeAt(r):32,s=r<i?t.charCodeAt(r):126;if(a===s){r++;continue}if(s-a!=1){var o;return((o=r)<e.length?e.substring(0,o):e+eT.repeat(o-e.length))+String.fromCharCode(s+a>>1)}{let t=r+1,n=e.substring(0,t);return n.length<t&&(n+=eT.repeat(t-n.length)),n+eI(e.substring(t),"")}}}function ej(e){return!function(e){if(""===e)return!1;let t=e.length-1,r=e.charCodeAt(t);if(r<33||r>126)return!1;for(let r=0;r<t;r++){let t=e.charCodeAt(r);if(t<32||t>126)return!1}return!0}(e)?function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t.push(n<32?32:n>126?126:n)}for(;t.length>0&&32===t[t.length-1];)t.length--;return t.length>0?String.fromCharCode(...t):ew}(e):e}var eC=((o=eC||{})[o.INIT=0]="INIT",o[o.SET_PARENT_KEY=1]="SET_PARENT_KEY",o[o.CREATE_LIST=2]="CREATE_LIST",o[o.UPDATE_OBJECT=3]="UPDATE_OBJECT",o[o.CREATE_OBJECT=4]="CREATE_OBJECT",o[o.DELETE_CRDT=5]="DELETE_CRDT",o[o.DELETE_OBJECT_KEY=6]="DELETE_OBJECT_KEY",o[o.CREATE_MAP=7]="CREATE_MAP",o[o.CREATE_REGISTER=8]="CREATE_REGISTER",o);function ex(e,t,r=ej(t)){return Object.freeze({type:"HasParent",node:e,key:t,pos:r})}var eM=Object.freeze({type:"NoParent"}),eN=class{constructor(){this._parent=eM}_getParentKeyOrThrow(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldKey;default:return p(this.parent,"Unknown state")}}get _parentPos(){switch(this.parent.type){case"HasParent":return this.parent.pos;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldPos;default:return p(this.parent,"Unknown state")}}get _pool(){return this.__pool}get roomId(){return this.__pool?this.__pool.roomId:null}get _id(){return this.__id}get parent(){return this._parent}get _parentKey(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":return null;case"Orphaned":return this.parent.oldKey;default:return p(this.parent,"Unknown state")}}_apply(e,t){return 5===e.type&&"HasParent"===this.parent.type?this.parent.node._detachChild(this):{modified:!1}}_setParentLink(e,t){switch(this.parent.type){case"HasParent":if(this.parent.node!==e)throw Error("Cannot set parent: node already has a parent");this._parent=ex(e,t);return;case"Orphaned":case"NoParent":this._parent=ex(e,t);return;default:return p(this.parent,"Unknown state")}}_attach(e,t){if(this.__id||this.__pool)throw Error("Cannot attach node: already attached");t.addNode(e,this),this.__id=e,this.__pool=t}_detach(){switch(this.__pool&&this.__id&&this.__pool.deleteNode(this.__id),this.parent.type){case"HasParent":this._parent=function(e,t=ej(e)){return Object.freeze({type:"Orphaned",oldKey:e,oldPos:t})}(this.parent.key,this.parent.pos);break;case"NoParent":this._parent=eM;break;case"Orphaned":break;default:p(this.parent,"Unknown state")}this.__pool=void 0}invalidate(){(void 0!==this._cachedImmutable||void 0!==this._cachedTreeNode)&&(this._cachedImmutable=void 0,this._cachedTreeNode=void 0,"HasParent"===this.parent.type&&this.parent.node.invalidate())}toTreeNode(e){return(void 0===this._cachedTreeNode||this._cachedTreeNodeKey!==e)&&(this._cachedTreeNodeKey=e,this._cachedTreeNode=this._toTreeNode(e)),this._cachedTreeNode}toImmutable(){return void 0===this._cachedImmutable&&(this._cachedImmutable=this._toImmutable()),this._cachedImmutable}},ek=((a=ek||{})[a.OBJECT=0]="OBJECT",a[a.LIST=1]="LIST",a[a.MAP=2]="MAP",a[a.REGISTER=3]="REGISTER",a),eD=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t<63?"_":"-",""),eU=class e extends eN{constructor(e){super(),this._data=e}get data(){return this._data}static _deserialize([t,r],n,i){let o=new e(r.data);return o._attach(t,i),o}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize register if parentId or parentKey is undefined");return[{type:8,opId:r?.generateOpId(),id:this._id,parentId:e,parentKey:t,data:this.data}]}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveRegister if parent is missing");return{type:3,parentId:y(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key,data:this.data}}_attachChild(e){throw Error("Method not implemented.")}_detachChild(e){throw Error("Method not implemented.")}_apply(e,t){return super._apply(e,t)}_toTreeNode(e){return{type:"Json",id:this._id??eD(),key:e,payload:this._data}}_toImmutable(){return this._data}clone(){return N(this.data)}};function eL(e,t){let r=e._parentPos,n=t._parentPos;return r===n?0:r<n?-1:1}var eF=class e extends eN{constructor(e){let t;for(let r of(super(),this._items=[],this._implicitlyDeletedItems=new WeakSet,this._unacknowledgedSets=new Map,e)){let e=eA(t),n=e3(r);n._setParentLink(this,e),this._items.push(n),t=e}}static _deserialize([t],r,n){let i=new e([]);i._attach(t,n);let o=r.get(t);if(void 0===o)return i;for(let[e,t]of o){let o=eQ([e,t],r,n);o._setParentLink(i,t.parentKey),i._insertAndSort(o)}return i}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=[],i={id:this._id,opId:r?.generateOpId(),type:2,parentId:e,parentKey:t};for(let e of(n.push(i),this._items)){let t=e._getParentKeyOrThrow(),i=eG(e._toOps(this._id,t,r),void 0),o=i[0].opId;void 0!==o&&this._unacknowledgedSets.set(t,o),n.push(...i)}return n}_insertAndSort(e){this._items.push(e),this._sortItems()}_sortItems(){this._items.sort(eL),this.invalidate()}_indexOfPosition(e){return this._items.findIndex(t=>t._getParentKeyOrThrow()===e)}_attach(e,t){for(let r of(super._attach(e,t),this._items))r._attach(t.generateId(),t)}_detach(){for(let e of(super._detach(),this._items))e._detach()}_applySetRemote(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:t,parentKey:r}=e,n=eJ(e);n._attach(t,this._pool),n._setParentLink(this,r);let i=e.deletedId,o=this._indexOfPosition(r);if(-1!==o){let t=this._items[o];if(t._id===i)return t._detach(),this._items[o]=n,{modified:eB(this,[eH(o,n)]),reverse:[]};{this._implicitlyDeletedItems.add(t),this._items[o]=n;let r=[eH(o,n)],i=this._detachItemAssociatedToSetOperation(e.deletedId);return i&&r.push(i),{modified:eB(this,r),reverse:[]}}}{let t=[],i=this._detachItemAssociatedToSetOperation(e.deletedId);return i&&t.push(i),this._insertAndSort(n),t.push(ez(this._indexOfPosition(r),n)),{reverse:[],modified:eB(this,t)}}}_applySetAck(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let t=[],r=this._detachItemAssociatedToSetOperation(e.deletedId);r&&t.push(r);let n=this._unacknowledgedSets.get(e.parentKey);if(void 0!==n){if(n!==e.opId)return 0===t.length?{modified:!1}:{modified:eB(this,t),reverse:[]};this._unacknowledgedSets.delete(e.parentKey)}let i=this._indexOfPosition(e.parentKey),o=this._items.find(t=>t._id===e.id);if(void 0!==o){if(o._parentKey===e.parentKey)return{modified:t.length>0&&eB(this,t),reverse:[]};-1!==i&&(this._implicitlyDeletedItems.add(this._items[i]),this._items.splice(i,1),t.push(eK(i)));let r=this._items.indexOf(o);o._setParentLink(this,e.parentKey),this._sortItems();let n=this._items.indexOf(o);return n!==r&&t.push(eW(r,n,o)),{modified:t.length>0&&eB(this,t),reverse:[]}}{let r=this._pool.getNode(e.id);if(r&&this._implicitlyDeletedItems.has(r)){r._setParentLink(this,e.parentKey),this._implicitlyDeletedItems.delete(r),this._insertAndSort(r);let n=this._items.indexOf(r);return{modified:eB(this,[-1===i?ez(n,r):eH(n,r),...t]),reverse:[]}}{-1!==i&&this._items.splice(i,1);let{newItem:r,newIndex:n}=this._createAttachItemAndSort(e,e.parentKey);return{modified:eB(this,[-1===i?ez(n,r):eH(n,r),...t]),reverse:[]}}}}_detachItemAssociatedToSetOperation(e){if(void 0===e||void 0===this._pool)return null;let t=this._pool.getNode(e);if(void 0===t)return null;let r=this._detachChild(t);return!1===r.modified?null:r.modified.updates[0]}_applyRemoteInsert(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let t=ej(e.parentKey),r=this._indexOfPosition(t);-1!==r&&this._shiftItemPosition(r,t);let{newItem:n,newIndex:i}=this._createAttachItemAndSort(e,t);return{modified:eB(this,[ez(i,n)]),reverse:[]}}_applyInsertAck(e){let t=this._items.find(t=>t._id===e.id),r=ej(e.parentKey),n=this._indexOfPosition(r);if(t){if(t._parentKey===r)return{modified:!1};{let e=this._items.indexOf(t);-1!==n&&this._shiftItemPosition(n,r),t._setParentLink(this,r),this._sortItems();let i=this._indexOfPosition(r);return i===e?{modified:!1}:{modified:eB(this,[eW(e,i,t)]),reverse:[]}}}{let t=y(this._pool).getNode(e.id);if(t&&this._implicitlyDeletedItems.has(t))return t._setParentLink(this,r),this._implicitlyDeletedItems.delete(t),this._insertAndSort(t),{modified:eB(this,[ez(this._indexOfPosition(r),t)]),reverse:[]};{-1!==n&&this._shiftItemPosition(n,r);let{newItem:t,newIndex:i}=this._createAttachItemAndSort(e,r);return{modified:eB(this,[ez(i,t)]),reverse:[]}}}}_applyInsertUndoRedo(e){let{id:t,parentKey:r}=e,n=eJ(e);if(this._pool?.getNode(t)!==void 0)return{modified:!1};n._attach(t,y(this._pool)),n._setParentLink(this,r);let i=this._indexOfPosition(r),o=r;return -1!==i&&(o=eA(this._items[i]?._parentPos,this._items[i+1]?._parentPos),n._setParentLink(this,o)),this._insertAndSort(n),{modified:eB(this,[ez(this._indexOfPosition(o),n)]),reverse:[{type:5,id:t}]}}_applySetUndoRedo(e){let{id:t,parentKey:r}=e,n=eJ(e);if(this._pool?.getNode(t)!==void 0)return{modified:!1};this._unacknowledgedSets.set(r,y(e.opId));let i=this._indexOfPosition(r);if(n._attach(t,y(this._pool)),n._setParentLink(this,r),-1===i)return this._insertAndSort(n),this._detachItemAssociatedToSetOperation(e.deletedId),{reverse:[{type:5,id:t}],modified:eB(this,[ez(this._indexOfPosition(r),n)])};{let t=this._items[i];t._detach(),this._items[i]=n;let o=eG(t._toOps(y(this._id),r,this._pool),e.id),a=[eH(i,n)],s=this._detachItemAssociatedToSetOperation(e.deletedId);return s&&a.push(s),{modified:eB(this,a),reverse:o}}}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");return!1!==(r="set"===e.intent?1===t?this._applySetRemote(e):2===t?this._applySetAck(e):this._applySetUndoRedo(e):1===t?this._applyRemoteInsert(e):2===t?this._applyInsertAck(e):this._applyInsertUndoRedo(e)).modified&&this.invalidate(),r}_detachChild(e){if(e){let t=y(e._parentKey),r=e._toOps(y(this._id),t,this._pool),n=this._items.indexOf(e);return -1===n?{modified:!1}:(this._items.splice(n,1),this.invalidate(),e._detach(),{modified:eB(this,[eK(n)]),reverse:r})}return{modified:!1}}_applySetChildKeyRemote(e,t){if(this._implicitlyDeletedItems.has(t))return this._implicitlyDeletedItems.delete(t),t._setParentLink(this,e),this._insertAndSort(t),{modified:eB(this,[ez(this._items.indexOf(t),t)]),reverse:[]};if(e===t._parentKey)return{modified:!1};let r=this._indexOfPosition(e);if(-1===r){let r=this._items.indexOf(t);t._setParentLink(this,e),this._sortItems();let n=this._items.indexOf(t);return n===r?{modified:!1}:{modified:eB(this,[eW(r,n,t)]),reverse:[]}}{this._items[r]._setParentLink(this,eA(e,this._items[r+1]?._parentPos));let n=this._items.indexOf(t);t._setParentLink(this,e),this._sortItems();let i=this._items.indexOf(t);return i===n?{modified:!1}:{modified:eB(this,[eW(n,i,t)]),reverse:[]}}}_applySetChildKeyAck(e,t){let r=y(t._parentKey);if(this._implicitlyDeletedItems.has(t)){let r=this._indexOfPosition(e);return this._implicitlyDeletedItems.delete(t),-1!==r&&this._items[r]._setParentLink(this,eA(e,this._items[r+1]?._parentPos)),t._setParentLink(this,e),this._insertAndSort(t),{modified:!1}}{if(e===r)return{modified:!1};let n=this._items.indexOf(t),i=this._indexOfPosition(e);-1!==i&&this._items[i]._setParentLink(this,eA(e,this._items[i+1]?._parentPos)),t._setParentLink(this,e),this._sortItems();let o=this._items.indexOf(t);return n===o?{modified:!1}:{modified:eB(this,[eW(n,o,t)]),reverse:[]}}}_applySetChildKeyUndoRedo(e,t){let r=y(t._parentKey),n=this._items.indexOf(t),i=this._indexOfPosition(e);-1!==i&&this._items[i]._setParentLink(this,eA(e,this._items[i+1]?._parentPos)),t._setParentLink(this,e),this._sortItems();let o=this._items.indexOf(t);return n===o?{modified:!1}:{modified:eB(this,[eW(n,o,t)]),reverse:[{type:1,id:y(t._id),parentKey:r}]}}_setChildKey(e,t,r){return 1===r?this._applySetChildKeyRemote(e,t):2===r?this._applySetChildKeyAck(e,t):this._applySetChildKeyUndoRedo(e,t)}_apply(e,t){return super._apply(e,t)}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveList if parent is missing");return{type:1,parentId:y(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get length(){return this._items.length}push(e){return this._pool?.assertStorageIsWritable(),this.insert(e,this.length)}insert(e,t){if(this._pool?.assertStorageIsWritable(),t<0||t>this._items.length)throw Error(`Cannot insert list item at index "${t}". index should be between 0 and ${this._items.length}`);let r=eA(this._items[t-1]?this._items[t-1]._parentPos:void 0,this._items[t]?this._items[t]._parentPos:void 0),n=e3(e);if(n._setParentLink(this,r),this._insertAndSort(n),this._pool&&this._id){let e=this._pool.generateId();n._attach(e,this._pool),this._pool.dispatch(n._toOps(this._id,r,this._pool),[{type:5,id:e}],new Map([[this._id,eB(this,[ez(t,n)])]]))}}move(e,t){if(this._pool?.assertStorageIsWritable(),t<0)throw Error("targetIndex cannot be less than 0");if(t>=this._items.length)throw Error("targetIndex cannot be greater or equal than the list length");if(e<0)throw Error("index cannot be less than 0");if(e>=this._items.length)throw Error("index cannot be greater or equal than the list length");let r=null,n=null;e<t?(n=t===this._items.length-1?void 0:this._items[t+1]._parentPos,r=this._items[t]._parentPos):(n=this._items[t]._parentPos,r=0===t?void 0:this._items[t-1]._parentPos);let i=eA(r,n),o=this._items[e],a=o._getParentKeyOrThrow();if(o._setParentLink(this,i),this._sortItems(),this._pool&&this._id){let r=new Map([[this._id,eB(this,[eW(e,t,o)])]]);this._pool.dispatch([{type:1,id:y(o._id),opId:this._pool.generateOpId(),parentKey:i}],[{type:1,id:y(o._id),parentKey:a}],r)}}delete(e){if(this._pool?.assertStorageIsWritable(),e<0||e>=this._items.length)throw Error(`Cannot delete list item at index "${e}". index should be between 0 and ${this._items.length-1}`);let t=this._items[e];if(t._detach(),this._items.splice(e,1),this.invalidate(),this._pool){let r=t._id;if(r){let n=new Map;n.set(y(this._id),eB(this,[eK(e)])),this._pool.dispatch([{id:r,opId:this._pool.generateOpId(),type:5}],t._toOps(y(this._id),t._getParentKeyOrThrow()),n)}}}clear(){if(this._pool?.assertStorageIsWritable(),this._pool){let e=[],t=[],r=[];for(let n of this._items){n._detach();let i=n._id;i&&(e.push({type:5,id:i,opId:this._pool.generateOpId()}),t.push(...n._toOps(y(this._id),n._getParentKeyOrThrow())),r.push(eK(0)))}this._items=[],this.invalidate();let n=new Map;n.set(y(this._id),eB(this,r)),this._pool.dispatch(e,t,n)}else{for(let e of this._items)e._detach();this._items=[],this.invalidate()}}set(e,t){if(this._pool?.assertStorageIsWritable(),e<0||e>=this._items.length)throw Error(`Cannot set list item at index "${e}". index should be between 0 and ${this._items.length-1}`);let r=this._items[e],n=r._getParentKeyOrThrow(),i=r._id;r._detach();let o=e3(t);if(o._setParentLink(this,n),this._items[e]=o,this.invalidate(),this._pool&&this._id){let t=this._pool.generateId();o._attach(t,this._pool);let a=new Map;a.set(this._id,eB(this,[eH(e,o)]));let s=eG(o._toOps(this._id,n,this._pool),i);this._unacknowledgedSets.set(n,y(s[0].opId));let l=eG(r._toOps(this._id,n,void 0),t);this._pool.dispatch(s,l,a)}}toArray(){return this._items.map(e=>e2(e))}every(e){return this.toArray().every(e)}filter(e){return this.toArray().filter(e)}find(e){return this.toArray().find(e)}findIndex(e){return this.toArray().findIndex(e)}forEach(e){return this.toArray().forEach(e)}get(e){if(!(e<0)&&!(e>=this._items.length))return e2(this._items[e])}indexOf(e,t){return this.toArray().indexOf(e,t)}lastIndexOf(e,t){return this.toArray().lastIndexOf(e,t)}map(e){return this._items.map((t,r)=>e(e2(t),r))}some(e){return this.toArray().some(e)}[Symbol.iterator](){return new e$(this._items)}_createAttachItemAndSort(e,t){let r=eJ(e);return r._attach(e.id,y(this._pool)),r._setParentLink(this,t),this._insertAndSort(r),{newItem:r,newIndex:this._indexOfPosition(t)}}_shiftItemPosition(e,t){let r=eA(t,this._items.length>e+1?this._items[e+1]?._parentPos:void 0);this._items[e]._setParentLink(this,r)}_toTreeNode(e){return{type:"LiveList",id:this._id??eD(),key:e,payload:this._items.map((e,t)=>e.toTreeNode(t.toString()))}}toImmutable(){return super.toImmutable()}_toImmutable(){return this._items.map(e=>e.toImmutable())}clone(){return new e(this._items.map(e=>e.clone()))}},e$=class{constructor(e){this._innerIterator=e[Symbol.iterator]()}[Symbol.iterator](){return this}next(){let e=this._innerIterator.next();return e.done?{done:!0,value:void 0}:{value:e2(e.value)}}};function eB(e,t){return{node:e,type:"LiveList",updates:t}}function eH(e,t){return{index:e,type:"set",item:t instanceof eU?t.data:t}}function eK(e){return{index:e,type:"delete"}}function ez(e,t){return{index:e,type:"insert",item:t instanceof eU?t.data:t}}function eW(e,t,r){return{index:t,type:"move",previousIndex:e,item:r instanceof eU?r.data:r}}function eG(e,t){return e.map((e,r)=>0===r?{...e,intent:"set",deletedId:t}:e)}var eq=e=>e,eV=class e extends eN{constructor(e){if(super(),this.unacknowledgedSet=new Map,e){let t=[];for(let[r,n]of e){let e=e3(n);e._setParentLink(this,r),t.push([r,e])}this._map=new Map(t)}else this._map=new Map}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=[],i={id:this._id,opId:r?.generateOpId(),type:7,parentId:e,parentKey:t};for(let[e,t]of(n.push(i),this._map))n.push(...t._toOps(this._id,e,r));return n}static _deserialize([t,r],n,i){let o=new e;o._attach(t,i);let a=n.get(t);if(void 0===a)return o;for(let[e,t]of a){let r=eQ([e,t],n,i);r._setParentLink(o,t.parentKey),o._map.set(t.parentKey,r),o.invalidate()}return o}_attach(e,t){for(let[r,n]of(super._attach(e,t),this._map))e0(n)&&n._attach(t.generateId(),t)}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:n,parentKey:i,opId:o}=e,a=eJ(e);if(void 0!==this._pool.getNode(n))return{modified:!1};if(2===t){let e=this.unacknowledgedSet.get(i);if(e===o)return this.unacknowledgedSet.delete(i),{modified:!1};if(void 0!==e)return{modified:!1}}else 1===t&&this.unacknowledgedSet.delete(i);let s=this._map.get(i);if(s){let e=y(this._id);r=s._toOps(e,i),s._detach()}else r=[{type:5,id:n}];return a._setParentLink(this,i),a._attach(n,this._pool),this._map.set(i,a),this.invalidate(),{modified:{node:this,type:"LiveMap",updates:{[i]:{type:"update"}}},reverse:r}}_detach(){for(let e of(super._detach(),this._map.values()))e._detach()}_detachChild(e){let t=y(this._id),r=y(e._parentKey),n=e._toOps(t,r,this._pool);for(let[t,r]of this._map)r===e&&(this._map.delete(t),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveMap",updates:{[r]:{type:"delete"}}},reverse:n}}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveMap if parent is missing");return{type:2,parentId:y(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get(e){let t=this._map.get(e);if(void 0!==t)return e2(t)}set(e,t){this._pool?.assertStorageIsWritable();let r=this._map.get(e);r&&r._detach();let n=e3(t);if(n._setParentLink(this,e),this._map.set(e,n),this.invalidate(),this._pool&&this._id){let t=this._pool.generateId();n._attach(t,this._pool);let i=new Map;i.set(this._id,{node:this,type:"LiveMap",updates:{[e]:{type:"update"}}});let o=n._toOps(this._id,e,this._pool);this.unacknowledgedSet.set(e,y(o[0].opId)),this._pool.dispatch(n._toOps(this._id,e,this._pool),r?r._toOps(this._id,e):[{type:5,id:t}],i)}}get size(){return this._map.size}has(e){return this._map.has(e)}delete(e){this._pool?.assertStorageIsWritable();let t=this._map.get(e);if(void 0===t)return!1;if(t._detach(),this._map.delete(e),this.invalidate(),this._pool&&t._id){let r=y(this._id),n=new Map;n.set(r,{node:this,type:"LiveMap",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:5,id:t._id,opId:this._pool.generateOpId()}],t._toOps(r,e),n)}return!0}entries(){let e=this._map.entries();return{[Symbol.iterator](){return this},next(){let t=e.next();return t.done?{done:!0,value:void 0}:{value:[t.value[0],e2(t.value[1])]}}}}[Symbol.iterator](){return this.entries()}keys(){return this._map.keys()}values(){let e=this._map.values();return{[Symbol.iterator](){return this},next(){let t=e.next();return t.done?{done:!0,value:void 0}:{value:e2(t.value)}}}}forEach(e){for(let t of this)e(t[1],t[0],this)}_toTreeNode(e){return{type:"LiveMap",id:this._id??eD(),key:e,payload:Array.from(this._map.entries()).map(([e,t])=>t.toTreeNode(e))}}toImmutable(){return super.toImmutable()}_toImmutable(){let e=new Map;for(let[t,r]of this._map)e.set(t,r.toImmutable());return eq(e)}clone(){return new e(Array.from(this._map).map(([e,t])=>[e,t.clone()]))}},eY=class e extends eN{static _buildRootAndParentToChildren(e){let t=new Map,r=null;for(let[n,i]of e)if(0!==i.type||void 0!==i.parentId&&void 0!==i.parentKey){let e=[n,i],r=t.get(i.parentId);void 0!==r?r.push(e):t.set(i.parentId,[e])}else r=[n,i];if(null===r)throw Error("Root can't be null");return[r,t]}static _fromItems(t,r){let[n,i]=e._buildRootAndParentToChildren(t);return e._deserialize(n,i,r)}constructor(e={}){super(),this._propToLastUpdate=new Map;let t=D(e);for(let e of Object.keys(t)){let r=t[e];e0(r)&&r._setParentLink(this,e)}this._map=new Map(Object.entries(t))}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=r?.generateOpId(),i=[],o={type:4,id:this._id,opId:n,parentId:e,parentKey:t,data:{}};for(let[e,t]of(i.push(o),this._map))e0(t)?i.push(...t._toOps(this._id,e,r)):o.data[e]=t;return i}static _deserialize([t,r],n,i){let o=new e(r.data);return o._attach(t,i),this._deserializeChildren(o,n,i)}static _deserializeChildren(e,t,r){let n=t.get(y(e._id));if(void 0===n)return e;for(let[i,o]of n){let n=function([e,t],r,n){switch(t.type){case 0:return eY._deserialize([e,t],r,n);case 1:return eF._deserialize([e,t],r,n);case 2:return eV._deserialize([e,t],r,n);case 3:return t.data;default:throw Error("Unexpected CRDT type")}}([i,o],t,r);eZ(n)&&n._setParentLink(e,o.parentKey),e._map.set(o.parentKey,n),e.invalidate()}return e}_attach(e,t){for(let[r,n]of(super._attach(e,t),this._map))e0(n)&&n._attach(t.generateId(),t)}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:n,opId:i,parentKey:o}=e,a=eX(e);if(void 0!==this._pool.getNode(n))return this._propToLastUpdate.get(o)===i&&this._propToLastUpdate.delete(o),{modified:!1};if(0===t)this._propToLastUpdate.set(o,y(i));else if(void 0===this._propToLastUpdate.get(o));else if(this._propToLastUpdate.get(o)===i)return this._propToLastUpdate.delete(o),{modified:!1};else return{modified:!1};let s=y(this._id),l=this._map.get(o);return e0(l)?(r=l._toOps(s,o),l._detach()):r=void 0===l?[{type:6,id:s,key:o}]:[{type:3,id:s,data:{[o]:l}}],this._map.set(o,a),this.invalidate(),eZ(a)&&(a._setParentLink(this,o),a._attach(n,this._pool)),{reverse:r,modified:{node:this,type:"LiveObject",updates:{[o]:{type:"update"}}}}}_detachChild(e){if(e){let t=y(this._id),r=y(e._parentKey),n=e._toOps(t,r,this._pool);for(let[t,r]of this._map)r===e&&(this._map.delete(t),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveObject",updates:{[r]:{type:"delete"}}},reverse:n}}return{modified:!1}}_detach(){for(let e of(super._detach(),this._map.values()))e0(e)&&e._detach()}_apply(e,t){return 3===e.type?this._applyUpdate(e,t):6===e.type?this._applyDeleteObjectKey(e,t):super._apply(e,t)}_serialize(){let e={};for(let[t,r]of this._map)e0(r)||(e[t]=r);return"HasParent"===this.parent.type&&this.parent.node._id?{type:0,parentId:this.parent.node._id,parentKey:this.parent.key,data:e}:{type:0,data:e}}_applyUpdate(e,t){let r=!1,n=y(this._id),i=[],o={type:3,id:n,data:{}};for(let t in e.data){let e=this._map.get(t);e0(e)?(i.push(...e._toOps(n,t)),e._detach()):void 0!==e?o.data[t]=e:void 0===e&&i.push({type:6,id:n,key:t})}let a={};for(let n in e.data){let i=e.data[n];if(void 0===i)continue;if(t)this._propToLastUpdate.set(n,y(e.opId));else if(void 0===this._propToLastUpdate.get(n))r=!0;else{if(this._propToLastUpdate.get(n)!==e.opId)continue;this._propToLastUpdate.delete(n);continue}let o=this._map.get(n);e0(o)&&o._detach(),r=!0,a[n]={type:"update"},this._map.set(n,i),this.invalidate()}return 0!==Object.keys(o.data).length&&i.unshift(o),r?{modified:{node:this,type:"LiveObject",updates:a},reverse:i}:{modified:!1}}_applyDeleteObjectKey(e,t){let r=e.key;if(!1===this._map.has(r)||!t&&void 0!==this._propToLastUpdate.get(r))return{modified:!1};let n=this._map.get(r),i=y(this._id),o=[];return e0(n)?(o=n._toOps(i,e.key),n._detach()):void 0!==n&&(o=[{type:3,id:i,data:{[r]:n}}]),this._map.delete(r),this.invalidate(),{modified:{node:this,type:"LiveObject",updates:{[e.key]:{type:"delete"}}},reverse:o}}toObject(){return Object.fromEntries(this._map)}set(e,t){this._pool?.assertStorageIsWritable(),this.update({[e]:t})}get(e){return this._map.get(e)}delete(e){let t;this._pool?.assertStorageIsWritable();let r=this._map.get(e);if(void 0===r)return;if(void 0===this._pool||void 0===this._id){e0(r)&&r._detach(),this._map.delete(e),this.invalidate();return}e0(r)?(r._detach(),t=r._toOps(this._id,e)):t=[{type:3,data:{[e]:r},id:this._id}],this._map.delete(e),this.invalidate();let n=new Map;n.set(this._id,{node:this,type:"LiveObject",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:6,key:e,id:this._id,opId:this._pool.generateOpId()}],t,n)}update(e){if(this._pool?.assertStorageIsWritable(),void 0===this._pool||void 0===this._id){for(let t in e){let r=e[t];if(void 0===r)continue;let n=this._map.get(t);e0(n)&&n._detach(),e0(r)&&r._setParentLink(this,t),this._map.set(t,r),this.invalidate()}return}let t=[],r=[],n=this._pool.generateOpId(),i={},o={id:this._id,type:3,data:{}},a={};for(let s in e){let l=e[s];if(void 0===l)continue;let u=this._map.get(s);if(e0(u)?(r.push(...u._toOps(this._id,s)),u._detach()):void 0===u?r.push({type:6,id:this._id,key:s}):o.data[s]=u,e0(l)){l._setParentLink(this,s),l._attach(this._pool.generateId(),this._pool);let e=l._toOps(this._id,s,this._pool),r=e.find(e=>e.parentId===this._id);r&&this._propToLastUpdate.set(s,y(r.opId)),t.push(...e)}else i[s]=l,this._propToLastUpdate.set(s,n);this._map.set(s,l),this.invalidate(),a[s]={type:"update"}}0!==Object.keys(o.data).length&&r.unshift(o),0!==Object.keys(i).length&&t.unshift({opId:n,id:this._id,type:3,data:i});let s=new Map;s.set(this._id,{node:this,type:"LiveObject",updates:a}),this._pool.dispatch(t,r,s)}toImmutable(){return super.toImmutable()}toTreeNode(e){return super.toTreeNode(e)}_toTreeNode(e){let t=this._id??eD();return{type:"LiveObject",id:t,key:e,payload:Array.from(this._map.entries()).map(([e,r])=>e0(r)?r.toTreeNode(e):{type:"Json",id:`${t}:${e}`,key:e,payload:r})}}_toImmutable(){let e={};for(let[t,r]of this._map)e[t]=eZ(r)?r.toImmutable():r;return e}clone(){return new e(Object.fromEntries(Array.from(this._map).map(([e,t])=>[e,eZ(t)?t.clone():N(t)])))}};function eJ(e){return e3(eX(e))}function eX(e){switch(e.type){case 8:return e.data;case 4:return new eY(e.data);case 7:return new eV;case 2:return new eF([]);default:return p(e,"Unknown creation Op")}}function eQ([e,t],r,n){switch(t.type){case 0:return eY._deserialize([e,t],r,n);case 1:return eF._deserialize([e,t],r,n);case 2:return eV._deserialize([e,t],r,n);case 3:return eU._deserialize([e,t],r,n);default:throw Error("Unexpected CRDT type")}}function eZ(e){return e1(e)||e instanceof eV||function(e){return e instanceof eY}(e)}function e0(e){return eZ(e)||e instanceof eU}function e1(e){return e instanceof eF}function e2(e){return e instanceof eU?e.data:e instanceof eF||e instanceof eV||e instanceof eY?e:p(e,"Unknown AbstractCrdt")}function e3(e){return e instanceof eY||e instanceof eV||e instanceof eF?e:new eU(e)}function e4(e,t){return void 0===e?t:"LiveObject"===e.type&&"LiveObject"===t.type?function(e,t){let r=e.updates;for(let[e,n]of x(t.updates))r[e]=n;return{...t,updates:r}}(e,t):"LiveMap"===e.type&&"LiveMap"===t.type?function(e,t){let r=e.updates;for(let[e,n]of x(t.updates))r[e]=n;return{...t,updates:r}}(e,t):"LiveList"===e.type&&"LiveList"===t.type?function(e,t){let r=e.updates;return{...t,updates:r.concat(t.updates)}}(e,t):t}async function e7(e,t,r,n){let i=r.length>0?r[r.length-1]:0,o=0;for(;;){o++;let a=e();try{return await a}catch(e){if(n?.(e)||e instanceof e5)throw e;if(o>=t)throw Error(`Failed after ${t} attempts: ${String(e)}`)}let s=r[o-1]??i;S(`Attempt ${o} was unsuccessful. Retrying in ${s} milliseconds.`),await function(e){return new Promise(t=>setTimeout(t,e))}(s)}}var e5=class extends Error{constructor(e){super(e)}};function e6(e){return`${e}_${eD()}`}function e9(e){return Array.isArray(e)}var e8=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function te(e){let t=[],r=Object.entries(e),n=[],i=[],o=[];return r.forEach(([e,t])=>{if(!e8.test(e))throw Error("Key must only contain letters, numbers, _");tn(t)?n.push([e,t]):ti(t)?i.push([e,t]):"object"!=typeof t||"startsWith"in t||o.push([e,t])}),t=[...tt(n),...tr(i)],o.forEach(([e,r])=>{let n=Object.entries(r),i=[],o=[];n.forEach(([t,r])=>{if(tl(t))throw Error("Key cannot be empty");tn(r)?i.push([ta(e,t),r]):ti(r)&&o.push([ta(e,t),r])}),t=[...t,...tt(i),...tr(o)]}),t.map(({key:e,operator:t,value:r})=>to(e,t,ts(r))).join(" AND ")}var tt=e=>{let t=[];return e.forEach(([e,r])=>{t.push({key:e,operator:":",value:r})}),t},tr=e=>{let t=[];return e.forEach(([e,r])=>{"startsWith"in r&&"string"==typeof r.startsWith&&t.push({key:e,operator:"^",value:r.startsWith})}),t},tn=e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e,ti=e=>"object"==typeof e&&null!==e&&"startsWith"in e,to=(e,t,r)=>`${e}${t}${r}`,ta=(e,t)=>t?`${e}[${JSON.stringify(t)}]`:e,ts=e=>{if("string"==typeof e){if(tl(e))throw Error("Value cannot be empty");return JSON.stringify(e)}return e.toString()},tl=e=>!e||""===e.toString().trim(),tu=((s=tu||{})[s.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",s[s.BROADCAST_EVENT=103]="BROADCAST_EVENT",s[s.FETCH_STORAGE=200]="FETCH_STORAGE",s[s.UPDATE_STORAGE=201]="UPDATE_STORAGE",s[s.FETCH_YDOC=300]="FETCH_YDOC",s[s.UPDATE_YDOC=301]="UPDATE_YDOC",s);function td(e,t){let r=!1,n={...e};return Object.keys(t).forEach(e=>{let i=t[e];n[e]!==i&&(void 0===i?delete n[e]:n[e]=i,r=!0)}),r?n:e}var tc=class{constructor(){this._ev=g()}get didInvalidate(){return this._ev.observable}invalidate(){void 0!==this._cache&&(this._cache=void 0,this._ev.notify())}get current(){return this._cache??(this._cache=this._toImmutable())}},tf=class extends tc{constructor(){super(),this._connections=new Map,this._presences=new Map,this._users=new Map}connectionIds(){return this._connections.keys()}_toImmutable(){return k(Array.from(this._presences.keys()).map(e=>this.getUser(Number(e))))}clearOthers(){this._connections=new Map,this._presences=new Map,this._users=new Map,this.invalidate()}_getUser(e){let t=this._connections.get(e),r=this._presences.get(e);if(void 0!==t&&void 0!==r)return function(e,t){let{connectionId:r,id:n,info:i}=e,o=ea(e.scopes);return eq(D({connectionId:r,id:n,info:i,canWrite:o,canComment:es(e.scopes),isReadOnly:!o,presence:t}))}(t,r)}getUser(e){let t=this._users.get(e);if(t)return t;let r=this._getUser(e);if(r)return this._users.set(e,r),r}_invalidateUser(e){this._users.has(e)&&this._users.delete(e),this.invalidate()}setConnection(e,t,r,n){this._connections.set(e,eq({connectionId:e,id:t,info:r,scopes:n})),this._presences.has(e)&&this._invalidateUser(e)}removeConnection(e){this._connections.delete(e),this._presences.delete(e),this._invalidateUser(e)}setOther(e,t){this._presences.set(e,eq(D(t))),this._connections.has(e)&&this._invalidateUser(e)}patchOther(e,t){let r=this._presences.get(e);if(void 0===r)return;let n=td(r,t);r!==n&&(this._presences.set(e,eq(n)),this._invalidateUser(e))}},th=class extends tc{constructor(e){super(),this._data=eq(D(e))}_toImmutable(){return this._data}patch(e){let t=this._data,r=td(t,e);t!==r&&(this._data=eq(r),this.invalidate())}},tp=class extends tc{constructor(e){super(),this._value=eq(e)}_toImmutable(){return this._value}set(e){this._value=eq(e),this.invalidate()}},ty=class extends tc{constructor(...e){super();let t=e.pop();this._refs=e,this._refs.forEach(e=>{e.didInvalidate.subscribe(()=>this.invalidate())}),this._transform=t}_toImmutable(){return this._transform(...this._refs.map(e=>e.current))}};function t_(e,t){return{type:"User",id:`${t.connectionId}`,key:e,payload:{connectionId:t.connectionId,id:t.id,info:t.info,presence:t.presence,isReadOnly:!t.canWrite}}}var tm=[2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3],tg=class extends Error{constructor(e,t,r){super(e),this.message=e,this.status=t,this.details=r}},tv=class extends Error{constructor(e,t,r){super(e),this.message=e,this.status=t,this.details=r}};function tb(e,t,r,n,i){if("number"!=typeof t||t<r||void 0!==n&&t>n)throw Error(void 0!==n?`${e} should be between ${i??r} and ${n}.`:`${e} should be at least ${i??r}.`);return t}function tE(e,...t){return()=>{}}var tS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tO=RegExp(Object.keys(tS).map(e=>`\\${e}`).join("|"),"g"),tT=class{constructor(e,t){this._strings=e,this._values=t}toString(){return this._strings.reduce((e,t,r)=>{var n;return e+((n=y(this._values[r-1]))instanceof tT?n.toString():Array.isArray(n)?(n.length<=0?new tT([""],[]):new tT(["",...Array(n.length-1).fill(""),""],n)).toString():String(n).replace(tO,e=>tS[e]))+t})}},tw={_:"\\_","*":"\\*","#":"\\#","`":"\\`","~":"\\~","!":"\\!","|":"\\|","(":"\\(",")":"\\)","{":"\\{","}":"\\}","[":"\\[","]":"\\]"},tP=RegExp(Object.keys(tw).map(e=>`\\${e}`).join("|"),"g"),tR=class{constructor(e,t){this._strings=e,this._values=t}toString(){return this._strings.reduce((e,t,r)=>{var n;return e+((n=y(this._values[r-1]))instanceof tR?n.toString():Array.isArray(n)?(n.length<=0?new tR([""],[]):new tR(["",...Array(n.length-1).fill(""),""],n)).toString():String(n).replace(tP,e=>tw[e]))+t})}};function tA(e){let t={};for(let r in e){let n=e[r];void 0!==n&&(t[r]=function e(t){return t instanceof eY?tA(t.toObject()):t instanceof eF?t.toArray().map(e):t instanceof eV?function(t){let r={};for(let[n,i]of t.entries())r[n]=e(i);return r}(t):t instanceof eU?t.data:Array.isArray(t)?t.map(e):C(t)?tA(t):t}(n))}return t}function tI(e){if(Array.isArray(e))return new eF(e.map(tI));if(!C(e))return e;{let t={};for(let r in e){let n=e[r];void 0!==n&&(t[r]=tI(n))}return new eY(t)}}(function(e,t,r){let n=Symbol.for(e),i=`${t||"dev"} (esm)`;f[n]?f[n]===i||h(`Multiple copies of Liveblocks are being loaded in your project. This will cause issues! See https://liveblocks.io/docs/errors/dupes 

Conflicts:
- ${e} ${f[n]} (already loaded)
- ${e} ${i} (trying to load this now)`):f[n]=i,t&&c&&t!==c&&h(`Cross-linked versions of Liveblocks found, which will cause issues! See https://liveblocks.io/docs/errors/cross-linked 

Conflicts:
- ${d} is at ${c}
- ${e} is at ${t}

Always upgrade all Liveblocks packages to the same version number.`)})(d,c,0),r(4095);var tj=r(1508);function tC(e){let[t,r]=l.useState(!1);return l.useEffect(()=>{r(!0)},[]),l.createElement(l.Suspense,{fallback:e.fallback},t?"function"==typeof e.children?e.children():e.children:e.fallback)}var tx=l.createContext(null);function tM(){return l.useContext(tx)}function tN(e){let t=new Set;t.add("constructor");let r=e.constructor.prototype;do for(let n of Reflect.ownKeys(r)){if(t.has(n))continue;let i=Reflect.getOwnPropertyDescriptor(r,n);"function"==typeof i?.value&&(t.add(n),e[n]=e[n].bind(e))}while((r=Reflect.getPrototypeOf(r))&&r!==Object.prototype)}function tk(e,t){return e.createdAt.getTime()-t.createdAt.getTime()}function tD(e,t){return(t.updatedAt??t.createdAt).getTime()-(e.updatedAt??e.createdAt).getTime()}function tU(e){return"string"==typeof e}var tL=Object.freeze({isLoading:!1,data:void 0});function tF(e,t){return`${e}-${ec(t??{})}`}function t$(e){return`USER_THREADS:${ec(e??{})}`}function tB(e){return`${e}:NOTIFICATION_SETTINGS`}function tH(e){return`${e}-VERSIONS`}function tK(e,t){let r=e.threads;null!==t.roomId&&(r=r.filter(e=>e.roomId===t.roomId));let n=t.query;return n&&(r=r.filter(e=>(void 0===n.resolved||e.resolved===n.resolved)&&function(e,t){let r=e.metadata;return void 0===t.metadata||Object.entries(t.metadata).every(([e,t])=>{var n,i;return void 0===t||(n=r[e],C(i=t)&&tU(i.startsWith)?tU(n)&&n.startsWith(i.startsWith):n===i)})}(e,n))),r.sort("last-update"===t.orderBy?tD:tk)}var tz=Promise.resolve(),tW=Object.freeze({isLoading:!0}),tG=class{constructor(e){this._cachedPromise=null,this._paginationState=null,this._fetchPage=e,this._eventSource=g(),this._pendingFetchMore=null,this.observable=this._eventSource.observable,tN(this)}patchPaginationState(e){let t=this._paginationState;null!==t&&(this._paginationState={...t,...e},this._eventSource.notify())}async _fetchMore(){let e=this._paginationState;if(e?.cursor){this.patchPaginationState({isFetchingMore:!0});try{let t=await this._fetchPage(e.cursor);this.patchPaginationState({cursor:t,fetchMoreError:void 0,isFetchingMore:!1})}catch(e){this.patchPaginationState({isFetchingMore:!1,fetchMoreError:e})}}}fetchMore(){let e=this._paginationState;return e?.cursor===null?tz:(this._pendingFetchMore||(this._pendingFetchMore=this._fetchMore().finally(()=>{this._pendingFetchMore=null})),this._pendingFetchMore)}get(){let e=this._cachedPromise;if(null===e||"pending"===e.status)return tW;if("rejected"===e.status)return{isLoading:!1,error:e.reason};let t=this._paginationState;return{isLoading:!1,data:{fetchMore:this.fetchMore,isFetchingMore:t.isFetchingMore,fetchMoreError:t.fetchMoreError,hasFetchedAll:null===t.cursor}}}waitUntilLoaded(){var e;if(this._cachedPromise)return this._cachedPromise;let t=("status"in(e=e7(()=>this._fetchPage(void 0),5,[5e3,5e3,1e4,15e3]).then(e=>{this._paginationState={cursor:e,isFetchingMore:!1,fetchMoreError:void 0}}))||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})),e);return t.then(()=>this._eventSource.notify(),()=>{this._eventSource.notify(),setTimeout(()=>{this._cachedPromise=null,this._eventSource.notify()},5e3)}),this._cachedPromise=t,t}},tq=class{constructor(e){this._prevState=null,this._stateCached=null,this._notificationsLastRequestedAt=null,this._roomThreadsLastRequestedAtByRoom=new Map,this._roomThreads=new Map,this._userThreadsLastRequestedAt=null,this._userThreads=new Map;let t=async t=>{if(void 0===e)throw new e5("Client is required in order to load threads for the room");let r=await e.getInboxNotifications({cursor:t});return this.updateThreadsAndNotifications(r.threads,r.inboxNotifications),null===this._notificationsLastRequestedAt&&(this._notificationsLastRequestedAt=r.requestedAt),r.nextCursor};this._client=e,this._notifications=new tG(t),this._notifications.observable.subscribe(()=>this._store.set(e=>({...e}))),this._store=ey({rawThreadsById:{},queries3:{},queries4:{},optimisticUpdates:[],notificationsById:{},settingsByRoomId:{},versionsByRoomId:{}}),tN(this)}get(){let e=this._store.get();return(this._prevState!==e||null===this._stateCached)&&(this._prevState=e,this._stateCached=function(e){let t={threadsById:{...e.rawThreadsById},notificationsById:{...e.notificationsById},settingsByRoomId:{...e.settingsByRoomId}};for(let r of e.optimisticUpdates)switch(r.type){case"create-thread":t.threadsById[r.thread.id]=r.thread;break;case"edit-thread-metadata":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt||void 0!==e.updatedAt&&e.updatedAt>r.updatedAt)break;t.threadsById[e.id]={...e,updatedAt:r.updatedAt,metadata:{...e.metadata,...r.metadata}};break}case"mark-thread-as-resolved":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt)break;t.threadsById[e.id]={...e,resolved:!0};break}case"mark-thread-as-unresolved":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt)break;t.threadsById[e.id]={...e,resolved:!1};break}case"create-comment":{let e=t.threadsById[r.comment.threadId];if(void 0===e)break;t.threadsById[e.id]=tV(e,r.comment);let n=Object.values(t.notificationsById).find(t=>"thread"===t.kind&&t.threadId===e.id);if(void 0===n)break;t.notificationsById[n.id]={...n,notifiedAt:r.comment.createdAt,readAt:r.comment.createdAt};break}case"edit-comment":{let e=t.threadsById[r.comment.threadId];if(void 0===e)break;t.threadsById[e.id]=tV(e,r.comment);break}case"delete-comment":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=tY(e,r.commentId,r.deletedAt);break}case"delete-thread":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[r.threadId]={...e,deletedAt:r.deletedAt,updatedAt:r.deletedAt,comments:[]};break}case"add-reaction":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=tJ(e,r.commentId,r.reaction);break}case"remove-reaction":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=tX(e,r.commentId,r.emoji,r.userId,r.removedAt);break}case"mark-inbox-notification-as-read":{let e=t.notificationsById[r.inboxNotificationId];if(void 0===e)break;t.notificationsById[r.inboxNotificationId]={...e,readAt:r.readAt};break}case"mark-all-inbox-notifications-as-read":for(let e in t.notificationsById){let n=t.notificationsById[e];if(void 0===n)break;t.notificationsById[e]={...n,readAt:r.readAt}}break;case"delete-inbox-notification":delete t.notificationsById[r.inboxNotificationId];break;case"delete-all-inbox-notifications":t.notificationsById={};break;case"update-notification-settings":{let e=t.settingsByRoomId[r.roomId];if(void 0===e)break;t.settingsByRoomId[r.roomId]={...e,...r.settings}}}let r=Object.values(t.threadsById).filter(e=>!e.deletedAt).filter(e=>e.comments.some(e=>void 0===e.deletedAt));return{notifications:Object.values(t.notificationsById).filter(e=>"thread"!==e.kind||t.threadsById[e.threadId]&&t.threadsById[e.threadId]?.deletedAt===void 0).sort((e,t)=>t.notifiedAt.getTime()-e.notifiedAt.getTime()),notificationsById:t.notificationsById,settingsByRoomId:t.settingsByRoomId,queries3:e.queries3,queries4:e.queries4,threads:r,threadsById:t.threadsById,versionsByRoomId:e.versionsByRoomId}}(e)),this._stateCached}batch(e){return this._store.batch(e)}getFullState(){return this.get()}getRoomThreadsAsync(e,t){let r=tF(e,t),n=this._roomThreads.get(r);if(void 0===n)return tW;let i=n.get();if(i.isLoading||i.error)return i;let o=tK(this.getFullState(),{roomId:e,query:t,orderBy:"age"}),a=i.data;return{isLoading:!1,threads:o,hasFetchedAll:a.hasFetchedAll,isFetchingMore:a.isFetchingMore,fetchMoreError:a.fetchMoreError,fetchMore:a.fetchMore}}getUserThreadsAsync(e){let t=t$(e),r=this._userThreads.get(t);if(void 0===r)return tW;let n=r.get();if(n.isLoading||n.error)return n;let i=tK(this.getFullState(),{roomId:null,query:e,orderBy:"last-update"}),o=n.data;return{isLoading:!1,threads:i,hasFetchedAll:o.hasFetchedAll,isFetchingMore:o.isFetchingMore,fetchMoreError:o.fetchMoreError,fetchMore:o.fetchMore}}getInboxNotificationsAsync(){let e=this._notifications.get();if(e.isLoading||e.error)return e;let t=e.data;return{isLoading:!1,inboxNotifications:this.getFullState().notifications,hasFetchedAll:t.hasFetchedAll,isFetchingMore:t.isFetchingMore,fetchMoreError:t.fetchMoreError,fetchMore:t.fetchMore}}getNotificationSettingsAsync(e){let t=this.get(),r=t.queries3[tB(e)];return void 0===r||r.isLoading?tW:void 0!==r.error?r:{isLoading:!1,settings:y(t.settingsByRoomId[e])}}getVersionsAsync(e){let t=this.get(),r=t.queries4[tH(e)];return void 0===r||r.isLoading?tW:void 0!==r.error?r:{isLoading:!1,versions:y(t.versionsByRoomId[e])}}_hasOptimisticUpdates(){return this._store.get().optimisticUpdates.length>0}subscribe(e){return this._store.subscribe(e)}_subscribeOptimisticUpdates(e){return this.subscribe(e)}subscribeThreads(e){return this.subscribe(e)}subscribeUserThreads(e){return this.subscribe(e)}subscribeThreadsOrInboxNotifications(e){return this.subscribe(e)}subscribeNotificationSettings(e){return this.subscribe(e)}subscribeVersions(e){return this.subscribe(e)}updateThreadsCache(e){this._store.set(t=>{let r=e(t.rawThreadsById);return r!==t.rawThreadsById?{...t,rawThreadsById:r}:t})}updateInboxNotificationsCache(e){this._store.set(t=>{let r=e(t.notificationsById);return r!==t.notificationsById?{...t,notificationsById:r}:t})}setNotificationSettings(e,t){this._store.set(r=>({...r,settingsByRoomId:{...r.settingsByRoomId,[e]:t}}))}setVersions(e,t){this._store.set(r=>({...r,versionsByRoomId:{...r.versionsByRoomId,[e]:t}}))}setQuery3State(e,t){this._store.set(r=>({...r,queries3:{...r.queries3,[e]:t}}))}setQuery4State(e,t){this._store.set(r=>({...r,queries4:{...r.queries4,[e]:t}}))}updateOptimisticUpdatesCache(e){this._store.set(t=>({...t,optimisticUpdates:e(t.optimisticUpdates)}))}force_set(e){return this._store.set(e)}updateInboxNotification(e,t,r){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.updateInboxNotificationsCache(t=>{let n=t[e];return n?{...t,[e]:r(n)}:t})})}updateAllInboxNotifications(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateInboxNotificationsCache(e=>(function(e,t){let r={};for(let n of Object.entries(e)){let e=n[0];if("__proto__"===e)continue;let i=n[1];r[e]=t(i,e)}return r})(e,t))})}deleteInboxNotification(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.updateInboxNotificationsCache(t=>{let{[e]:r,...n}=t;return void 0===r?t:n})})}deleteAllInboxNotifications(e){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateInboxNotificationsCache(()=>({}))})}createThread(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateThreadsCache(e=>({...e,[t.id]:t}))})}updateThread(e,t,r,n){this._store.batch(()=>{null!==t&&this.removeOptimisticUpdate(t),this.updateThreadsCache(t=>{let i=t[e];return!i||void 0!==i.deletedAt||n&&i.updatedAt&&i.updatedAt>n?t:{...t,[e]:r(i)}})})}patchThread(e,t,r,n){return this.updateThread(e,t,e=>({...e,...D(r)}),n)}addReaction(e,t,r,n,i){this.updateThread(e,t,e=>tJ(e,r,n),i)}removeReaction(e,t,r,n,i,o){this.updateThread(e,t,e=>tX(e,r,n,i,o),o)}deleteThread(e,t){return this.updateThread(e,t,e=>({...e,updatedAt:new Date,deletedAt:new Date}))}createComment(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(t);let r=this._store.get().rawThreadsById[e.threadId];r&&(this.updateThreadsCache(t=>({...t,[e.threadId]:tV(r,e)})),this.updateInboxNotificationsCache(t=>{let r=Object.values(t).find(t=>"thread"===t.kind&&t.threadId===e.threadId);return r?{...t,[r.id]:{...r,notifiedAt:e.createdAt,readAt:e.createdAt}}:t}))})}editComment(e,t,r){return this.updateThread(e,t,e=>tV(e,r))}deleteComment(e,t,r,n){return this.updateThread(e,t,e=>tY(e,r,n),n)}updateThreadAndNotification(e,t){this._store.batch(()=>{this.updateThreadsCache(t=>{let r=t[e.id];return void 0===r||0>tD(e,r)?{...t,[e.id]:e}:t}),void 0!==t&&this.updateInboxNotificationsCache(e=>({...e,[t.id]:t}))})}updateThreadsAndNotifications(e,t,r=[],n=[]){this._store.batch(()=>{this.updateThreadsCache(t=>(function(e,t){let r={...e};return t.newThreads.forEach(e=>{let t=r[e.id];!(t&&0>tD(t,e))&&(r[e.id]=e)}),t.deletedThreads.forEach(({id:e,deletedAt:t})=>{let n=r[e];void 0!==n&&(n.deletedAt=t,n.updatedAt=t,n.comments=[])}),r})(t,{newThreads:e,deletedThreads:r})),this.updateInboxNotificationsCache(e=>(function(e,t){let r={...e};return t.newInboxNotifications.forEach(e=>{let t=r[e.id];(!t||1!=(t.notifiedAt>e.notifiedAt?1:t.notifiedAt<e.notifiedAt?-1:t.readAt&&e.readAt?t.readAt>e.readAt?1:t.readAt<e.readAt?-1:0:t.readAt||e.readAt?t.readAt?1:-1:0))&&(r[e.id]=e)}),t.deletedNotifications.forEach(({id:e})=>delete r[e]),r})(e,{newInboxNotifications:t,deletedNotifications:n}))})}updateRoomInboxNotificationSettings2(e,t,r){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.setNotificationSettings(e,r)})}updateRoomInboxNotificationSettings(e,t,r){this._store.batch(()=>{this.setQuery3OK(r),this.setNotificationSettings(e,t)})}updateRoomVersions(e,t,r){this._store.batch(()=>{this.setVersions(e,t),void 0!==r&&this.setQuery4OK(r)})}addOptimisticUpdate(e){let t=eD(),r={...e,id:t};return this.updateOptimisticUpdatesCache(e=>[...e,r]),t}removeOptimisticUpdate(e){this.updateOptimisticUpdatesCache(t=>t.filter(t=>t.id!==e))}setQuery3Loading(e){this.setQuery3State(e,tW)}setQuery3OK(e){this.setQuery3State(e,tL)}setQuery3Error(e,t){this.setQuery3State(e,{isLoading:!1,error:t})}setQuery4Loading(e){this.setQuery4State(e,tW)}setQuery4OK(e){this.setQuery4State(e,tL)}setQuery4Error(e,t){this.setQuery4State(e,{isLoading:!1,error:t})}async fetchNotificationsDeltaUpdate(){let e=this._notificationsLastRequestedAt;if(null===e){v.warn("Notifications polled before first page loaded");return}let t=y(this._client,"Client is required in order to load notifications for the room"),r=await t.getInboxNotificationsSince(e);e<r.requestedAt&&(this._notificationsLastRequestedAt=r.requestedAt),this.updateThreadsAndNotifications(r.threads.updated,r.inboxNotifications.updated,r.threads.deleted,r.inboxNotifications.deleted)}waitUntilNotificationsLoaded(){return this._notifications.waitUntilLoaded()}waitUntilRoomThreadsLoaded(e,t){let r=async r=>{if(void 0===this._client)throw new e5("Client is required in order to load threads for the room");let n=this._client.getRoom(e);if(null===n)throw new e5(`Room with id ${e} is not available on client`);let i=await n.getThreads({cursor:r,query:t});this.updateThreadsAndNotifications(i.threads,i.inboxNotifications);let o=this._roomThreadsLastRequestedAtByRoom.get(e);return(void 0===o||o>i.requestedAt)&&this._roomThreadsLastRequestedAtByRoom.set(e,i.requestedAt),i.nextCursor},n=tF(e,t),i=this._roomThreads.get(n);return void 0===i&&(i=new tG(r)),i.observable.subscribe(()=>this._store.set(e=>({...e}))),this._roomThreads.set(n,i),i.waitUntilLoaded()}async fetchRoomThreadsDeltaUpdate(e){let t=this._roomThreadsLastRequestedAtByRoom.get(e);if(void 0===t){v.warn("Room threads polled before first page loaded");return}let r=y(this._client,"Client is required in order to load notifications for the room"),n=y(r.getRoom(e),`Room with id ${e} is not available on client`),i=await n.getThreadsSince({since:t});this.updateThreadsAndNotifications(i.threads.updated,i.inboxNotifications.updated,i.threads.deleted,i.inboxNotifications.deleted),t<i.requestedAt&&this._roomThreadsLastRequestedAtByRoom.set(e,i.requestedAt)}waitUntilUserThreadsLoaded(e){let t=t$(e),r=async t=>{if(void 0===this._client)throw new e5("Client is required in order to load threads for the room");let r=await this._client[ed].getUserThreads_experimental({cursor:t,query:e});return this.updateThreadsAndNotifications(r.threads,r.inboxNotifications),null===this._userThreadsLastRequestedAt&&(this._userThreadsLastRequestedAt=r.requestedAt),r.nextCursor},n=this._userThreads.get(t);return void 0===n&&(n=new tG(r)),n.observable.subscribe(()=>this._store.set(e=>({...e}))),this._userThreads.set(t,n),n.waitUntilLoaded()}async fetchUserThreadsDeltaUpdate(){let e=this._userThreadsLastRequestedAt;if(null===e){v.warn("User threads polled before first page loaded");return}let t=y(this._client,"Client is required in order to load threads for the user"),r=await t[ed].getUserThreadsSince_experimental({since:e});e<r.requestedAt&&(this._notificationsLastRequestedAt=r.requestedAt),this.updateThreadsAndNotifications(r.threads.updated,r.inboxNotifications.updated,r.threads.deleted,r.inboxNotifications.deleted)}};function tV(e,t){if(void 0!==e.deletedAt)return e;if(t.threadId!==e.id)return v.warn(`Comment ${t.id} does not belong to thread ${e.id}`),e;let r=e.comments.find(e=>e.id===t.id);if(void 0===r){let r=new Date(Math.max(e.updatedAt?.getTime()||0,t.createdAt.getTime()));return{...e,updatedAt:r,comments:[...e.comments,t]}}if(void 0!==r.deletedAt)return e;if(void 0===r.editedAt||void 0===t.editedAt||r.editedAt<=t.editedAt){let r=e.comments.map(e=>e.id===t.id?t:e);return{...e,updatedAt:new Date(Math.max(e.updatedAt?.getTime()||0,t.editedAt?.getTime()||t.createdAt.getTime())),comments:r}}return e}function tY(e,t,r){if(void 0!==e.deletedAt)return e;let n=e.comments.find(e=>e.id===t);if(void 0===n||void 0!==n.deletedAt)return e;let i=e.comments.map(e=>e.id===t?{...e,deletedAt:r,body:void 0,attachments:[]}:e);return i.every(e=>void 0!==e.deletedAt)?{...e,deletedAt:r,updatedAt:r}:{...e,updatedAt:r,comments:i}}function tJ(e,t,r){if(void 0!==e.deletedAt)return e;let n=e.comments.find(e=>e.id===t);if(void 0===n||void 0!==n.deletedAt)return e;let i=e.comments.map(e=>e.id===t?{...e,reactions:function(e,t){let r=e.find(e=>e.emoji===t.emoji);return void 0===r?[...e,{emoji:t.emoji,createdAt:t.createdAt,users:[{id:t.userId}]}]:!1===r.users.some(e=>e.id===t.userId)?e.map(e=>e.emoji===t.emoji?{...e,users:[...e.users,{id:t.userId}]}:e):e}(e.reactions,r)}:e);return{...e,updatedAt:new Date(Math.max(r.createdAt.getTime(),e.updatedAt?.getTime()||0)),comments:i}}function tX(e,t,r,n,i){if(void 0!==e.deletedAt)return e;let o=e.comments.find(e=>e.id===t);if(void 0===o||void 0!==o.deletedAt)return e;let a=e.comments.map(e=>e.id===t?{...e,reactions:e.reactions.map(e=>e.emoji===r?{...e,users:e.users.filter(e=>e.id!==n)}:e).filter(e=>e.users.length>0)}:e);return{...e,updatedAt:new Date(Math.max(i.getTime(),e.updatedAt?.getTime()||0)),comments:a}}var tQ=e=>e;function tZ(e){return(0,l.useReducer)(tQ,e)[0]}function t0(e){let t=tZ(e);if("function"!=typeof t)return t;{let t=function(e){let t=(0,l.useRef)(e);return(0,l.useEffect)(()=>{t.current=e},[e]),t}(e);return(0,l.useCallback)((...e)=>t.current(...e),[t])}}var t1=e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e},t2=(0,l.createContext)(null),t3=new WeakMap,t4=new WeakMap;function t7(e){let t=t3.get(e);return t||(t=new tq(e),t3.set(e,t)),t}function t5(){return(0,l.useContext)(t2)}function t6(){return t5()??j("LiveblocksProvider is missing from the React tree.")}function t9(e){return function(e){let t=t5();if(!e?.allowNesting&&null!==t)throw Error("You cannot nest multiple LiveblocksProvider instances in the same React tree.")}(e),l.createElement(t2.Provider,{value:e.client},e.children)}function t8(e){let{children:t,...r}=e,n={publicApiKey:tZ(r.publicApiKey),throttle:tZ(r.throttle),lostConnectionTimeout:tZ(r.lostConnectionTimeout),backgroundKeepAliveTimeout:tZ(r.backgroundKeepAliveTimeout),polyfills:tZ(r.polyfills),unstable_fallbackToHTTP:tZ(r.unstable_fallbackToHTTP),unstable_streamData:tZ(r.unstable_streamData),authEndpoint:t0(r.authEndpoint),resolveMentionSuggestions:t0(r.resolveMentionSuggestions),resolveUsers:t0(r.resolveUsers),resolveRoomsInfo:t0(r.resolveRoomsInfo),baseUrl:tZ(r.baseUrl),enableDebugLogging:tZ(r.enableDebugLogging)},i=(0,l.useMemo)(()=>(function(e){var t;let r=tb("throttle",e.throttle??100,16,1e3),n=tb("lostConnectionTimeout",e.lostConnectionTimeout??5e3,200,3e4,1e3),i=function(e){if(void 0!==e)return tb("backgroundKeepAliveTimeout",e,15e3)}(e.backgroundKeepAliveTimeout),o="string"==typeof(t=e.baseUrl)&&t.startsWith("http")?t:"https://api.liveblocks.io",a=function(e){let t=function(e){let{publicApiKey:t,authEndpoint:r}=e;if(void 0!==r&&void 0!==t)throw Error("You cannot simultaneously use `publicApiKey` and `authEndpoint` options. Please pick one and leave the other option unspecified. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient");if("string"==typeof t){if(t.startsWith("sk_"))throw Error("Invalid `publicApiKey` option. The value you passed is a secret key, which should not be used from the client. Please only ever pass a public key here. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");if(!t.startsWith("pk_"))throw Error("Invalid key. Please use the public key format: pk_<public key>. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");return{type:"public",publicApiKey:t}}if("string"==typeof r)return{type:"private",url:r};if("function"==typeof r)return{type:"custom",callback:r};if(void 0!==r)throw Error("The `authEndpoint` option must be a string or a function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientAuthEndpoint");throw Error("Invalid Liveblocks client options. Please provide either a `publicApiKey` or `authEndpoint` option. They cannot both be empty. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient")}(e),r=new Set,n=[],i=[],o=new Map;function a(e,t){return"comments:read"===e?t.includes("comments:read")||t.includes("comments:write")||t.includes("room:read")||t.includes("room:write"):"room:read"===e&&(t.includes("room:read")||t.includes("room:write"))}async function s(n){let i=e.polyfills?.fetch??("undefined"==typeof window?void 0:window.fetch);if("private"===t.type){if(void 0===i)throw new q("To use Liveblocks client in a non-DOM environment with a url as auth endpoint, you need to provide a fetch polyfill.");let e=el((await eu(i,t.url,{room:n.roomId})).token);if(r.has(e.raw))throw new q("The same Liveblocks auth token was issued from the backend before. Caching Liveblocks tokens is not supported.");return e}if("custom"===t.type){let e=await t.callback(n.roomId);if(e&&"object"==typeof e){if("string"==typeof e.token)return el(e.token);if("string"==typeof e.error){let t=`Authentication failed: ${"reason"in e&&"string"==typeof e.reason?e.reason:"Forbidden"}`;if("forbidden"===e.error)throw new q(t);throw Error(t)}}throw Error('Your authentication callback function should return a token, but it did not. Hint: the return value should look like: { token: "..." }')}throw Error("Unexpected authentication type. Must be private or custom.")}return{reset:function(){r.clear(),n.length=0,i.length=0,o.clear()},getAuthValue:async function(e){let l;if("public"===t.type)return{type:"public",publicApiKey:t.publicApiKey};let u=function(e){let t=Math.ceil(Date.now()/1e3);for(let r=n.length-1;r>=0;r--){let o=n[r];if(i[r]<=t){n.splice(r,1),i.splice(r,1);continue}if("id"===o.parsed.k)return o;if("acc"===o.parsed.k){if(!e.roomId&&0===Object.entries(o.parsed.perms).length)return o;for(let[t,r]of Object.entries(o.parsed.perms))if(e.roomId){if(t.includes("*")&&e.roomId.startsWith(t.replace("*",""))||e.roomId===t&&a(e.requestedScope,r))return o}else if(t.includes("*")&&a(e.requestedScope,r))return o}}}(e);if(void 0!==u)return{type:"secret",token:u};e.roomId?void 0===(l=o.get(e.roomId))&&(l=s(e),o.set(e.roomId,l)):void 0===(l=o.get("liveblocks-user-token"))&&(l=s(e),o.set("liveblocks-user-token",l));try{let e=await l,t=Math.floor(Date.now()/1e3)+(e.parsed.exp-e.parsed.iat)-30;return r.add(e.raw),"sec-legacy"!==e.parsed.k&&(n.push(e),i.push(t)),{type:"secret",token:e}}finally{e.roomId?o.delete(e.roomId):o.delete("liveblocks-user-token")}}}}(e),s=new Map;function l(e){let t=()=>{if(e.unsubs.delete(t)){if(0===e.unsubs.size){var r;(r=e.room).id,s.delete(r.id),r.destroy()}}else S("This leave function was already called. Calling it more than once has no effect.")};return e.unsubs.add(t),{room:e.room,leave:t}}let u=ey(null),d=function({baseUrl:e,authManager:t,currentUserIdStore:r,fetcher:n}){async function i(i,o,a){let s;i.startsWith("/v2/c/")||j("Expected a /v2/c/* endpoint");let l=await t.getAuthValue({requestedScope:"comments:read"});if("secret"===l.type&&"acc"===l.token.parsed.k){let e=l.token.parsed.uid;r.set(()=>e)}let u=eS(e,i,a),d=await n(u.toString(),{...o,headers:{...o?.headers,Authorization:`Bearer ${eE(l)}`,"X-LB-Client":c||"dev"}});if(!d.ok&&d.status>=400&&d.status<600){let e;try{let t=await d.json();e=new tv(t.message,d.status,t)}catch{e=new tv(d.statusText,d.status)}throw e}try{s=await d.json()}catch{s={}}return s}async function o(e){let t=await i(eO`/v2/c/inbox-notifications`,void 0,{cursor:e?.cursor,limit:50});return{inboxNotifications:t.inboxNotifications.map(eg),threads:t.threads.map(em),nextCursor:t.meta.nextCursor,requestedAt:new Date(t.meta.requestedAt)}}async function a(e){let t=await i(eO`/v2/c/inbox-notifications/delta`,void 0,{since:e.toISOString()});return{inboxNotifications:{updated:t.inboxNotifications.map(eg),deleted:t.deletedInboxNotifications.map(eb)},threads:{updated:t.threads.map(em),deleted:t.deletedThreads.map(ev)},requestedAt:new Date(t.meta.requestedAt)}}async function s(){let{count:e}=await i(eO`/v2/c/inbox-notifications/count`);return e}async function l(){await i(eO`/v2/c/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:"all"})})}async function u(e){await i(eO`/v2/c/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:e})})}let d=new eh(async e=>{let t=e.flat();return await u(t),t},{delay:50});return{getInboxNotifications:o,getInboxNotificationsSince:a,getUnreadInboxNotificationsCount:s,markAllInboxNotificationsAsRead:l,markInboxNotificationAsRead:async function(e){await d.get(e)},deleteAllInboxNotifications:async function(){await i(eO`/v2/c/inbox-notifications`,{method:"DELETE"})},deleteInboxNotification:async function(e){await i(eO`/v2/c/inbox-notifications/${e}`,{method:"DELETE"})},getUserThreads_experimental:async function(e){let t;e?.query&&(t=te(e.query));let r=await i(eO`/v2/c/threads`,void 0,{cursor:e.cursor,query:t,limit:50});return{threads:r.threads.map(em),inboxNotifications:r.inboxNotifications.map(eg),nextCursor:r.meta.nextCursor,requestedAt:new Date(r.meta.requestedAt)}},getUserThreadsSince_experimental:async function(e){let t=await i(eO`/v2/c/threads`,void 0,{since:e.since.toISOString()});return{threads:{updated:t.threads.map(em),deleted:t.deletedThreads.map(ev)},inboxNotifications:{updated:t.inboxNotifications.map(eg),deleted:t.deletedInboxNotifications.map(eb)},requestedAt:new Date(t.meta.requestedAt)}}}}({baseUrl:o,fetcher:e.polyfills?.fetch||fetch,authManager:a,currentUserIdStore:u}),f=e.resolveUsers,h=tE(()=>!f,"Set the resolveUsers option in createClient to specify user info."),_=ep(new eh(async e=>{let t=e.flat(),r=await f?.({userIds:t});return h(),r??t.map(()=>void 0)},{delay:50})),v=e.resolveRoomsInfo,b=tE(()=>!v,"Set the resolveRoomsInfo option in createClient to specify room info."),E=ep(new eh(async e=>{let t=e.flat(),r=await v?.({roomIds:t});return b(),r??t.map(()=>void 0)},{delay:50}));return Object.defineProperty({enterRoom:function(t,...u){var d;let f=s.get(t);if(void 0!==f)return l(f);let h=u[0]??{},_=function(e,t){let r,n,i;let o=e.initialPresence,a=e.initialStorage,[s,l]=function(){let e="undefined"!=typeof document?document:void 0,t={current:null};function r(){e?.visibilityState==="hidden"?t.current=t.current??Date.now():t.current=null}return e?.addEventListener("visibilitychange",r),[t,()=>{e?.removeEventListener("visibilitychange",r)}]}(),u={...t.delegates,canZombie:()=>void 0!==t.backgroundKeepAliveTimeout&&null!==s.current&&Date.now()>s.current+t.backgroundKeepAliveTimeout&&"synchronizing"!==ec()},d=new eo(u,t.enableDebugLogging),f={buffer:{flushTimerID:void 0,lastFlushedAt:0,presenceUpdates:{type:"full",data:o},messages:[],storageOperations:[]},staticSessionInfo:new tp(null),dynamicSessionInfo:new tp(null),myPresence:new th(o),others:new tf,initialStorage:a,idFactory:null,provider:void 0,onProviderUpdate:g(),clock:0,opClock:0,nodes:new Map,root:void 0,undoStack:[],redoStack:[],pausedHistory:null,activeBatch:null,unacknowledgedOps:new Map,opStackTraces:void 0},h=e=>e(),_=t.unstable_batchedUpdates??h,v=!1;d.events.onMessage.subscribe(function(e){if("string"!=typeof e.data)return;let t=function(e){let t=M(e);return void 0===t?null:e9(t)?k(t.map(e=>J(e))):k([J(t)])}(e.data);if(null===t||0===t.length)return;let r={storageUpdates:new Map,others:[]};_(()=>{for(let e of t)switch(e.type){case 101:{let t=function(e){f.others.setConnection(e.actor,e.id,e.info,e.scopes),f.buffer.messages.push({type:100,data:f.myPresence.current,targetActor:e.actor}),X();let t=f.others.getUser(e.actor);return t?{type:"enter",user:t}:void 0}(e);t&&r.others.push(t);break}case 100:{let t=function(e){if(void 0!==e.targetActor){let t=f.others.getUser(e.actor);f.others.setOther(e.actor,e.data);let r=f.others.getUser(e.actor);if(void 0===t&&void 0!==r)return{type:"enter",user:r}}else f.others.patchOther(e.actor,e.data);let t=f.others.getUser(e.actor);return t?{type:"update",updates:e.data,user:t}:void 0}(e);t&&r.others.push(t);break}case 103:{let t=f.others.current;E.customEvent.notify({connectionId:e.actor,user:e.actor<0?null:t.find(t=>t.connectionId===e.actor)??null,event:e.event});break}case 102:{let t=function(e){let t=f.others.getUser(e.actor);return t?(f.others.removeConnection(e.actor),{type:"leave",user:t}):null}(e);t&&r.others.push(t);break}case 300:E.ydoc.notify(e);break;case 104:r.others.push(function(e,t){var r;let n;for(let i of(f.dynamicSessionInfo.set({actor:e.actor,nonce:e.nonce,scopes:e.scopes}),f.idFactory=(r=e.actor,n=0,()=>`${r}:${n++}`),$(t),f.others.connectionIds()))void 0===e.users[i]&&f.others.removeConnection(i);for(let t in e.users){let r=e.users[t],n=Number(t);f.others.setConnection(n,r.id,r.info,r.scopes)}return{type:"reset"}}(e,h));break;case 200:et(e);break;case 201:for(let[t,n]of G(e.ops,!1).updates.storageUpdates)r.storageUpdates.set(t,e4(r.storageUpdates.get(t),n));break;case 299:P("Storage mutation rejection error",e.reason);break;case 400:case 407:case 401:case 408:case 405:case 406:case 402:case 403:case 404:E.comments.notify(e)}z(r,h)})}),d.events.statusDidChange.subscribe(function(e){let t=d.authValue;if(null!==t){let e=eE(t);if(e!==r){if(r=e,"secret"===t.type){let e=t.token.parsed;f.staticSessionInfo.set({userId:"sec-legacy"===e.k?e.id:e.uid,userInfo:"sec-legacy"===e.k?e.info:e.ui})}else f.staticSessionInfo.set({userId:void 0,userInfo:void 0})}}_(()=>{E.status.notify(e),$(h)})}),d.events.statusDidChange.subscribe(function(e){"reconnecting"===e?n=setTimeout(()=>{_(()=>{E.lostConnection.notify("lost"),v=!0,f.others.clearOthers(),z({others:[{type:"reset"}]},h)})},t.lostConnectionTimeout):(clearTimeout(n),v&&("disconnected"===e?_(()=>{E.lostConnection.notify("failed")}):_(()=>{E.lostConnection.notify("restored")}),v=!1))}),d.events.didConnect.subscribe(function(){f.buffer.presenceUpdates={type:"full",data:{...f.myPresence.current}},null!==Z&&en({flush:!1}),X()}),d.events.didDisconnect.subscribe(function(){clearTimeout(f.buffer.flushTimerID)}),d.events.onLiveblocksError.subscribe(e=>{_(()=>{E.error.notify(e)})});let b={roomId:t.roomId,getNode:e=>f.nodes.get(e),addNode:(e,t)=>void f.nodes.set(e,t),deleteNode:e=>void f.nodes.delete(e),generateId:()=>`${W()}:${f.clock++}`,generateOpId:()=>`${W()}:${f.opClock++}`,dispatch(e,t,r){let n=f.activeBatch;if(n){for(let t of e)n.ops.push(t);for(let[e,t]of r)n.updates.storageUpdates.set(e,e4(n.updates.storageUpdates.get(e),t));n.reverseOps.unshift(...t)}else _(()=>{K(t,h),f.redoStack.length=0,Q(e),z({storageUpdates:r},h)})},assertStorageIsWritable:()=>{let e=f.dynamicSessionInfo.current?.scopes;if(void 0!==e&&!ea(e))throw Error("Cannot write to storage with a read only user, please ensure the user has write permissions")}},E={status:g(),lostConnection:g(),customEvent:g(),self:g(),myPresence:g(),others:g(),error:g(),storageBatch:g(),history:g(),storageDidLoad:g(),storageStatus:g(),ydoc:g(),comments:g()};async function O(e,r,n,i){e.startsWith("/v2/c/rooms/")||j("Expected a /v2/c/rooms/* endpoint");let o=eS(t.baseUrl,e,i),a=t.polyfills?.fetch||fetch;return await a(o,{...n,headers:{...n?.headers,Authorization:`Bearer ${eE(r)}`,"X-LB-Client":c||"dev"}})}async function T(e,t){return O(eO`/v2/c/rooms/${t}/storage`,e,{method:"GET",headers:{"Content-Type":"application/json"}})}async function w(e,r){if(!d.authValue)throw Error("Not authorized");return O("/send-message"===e?eO`/v2/c/rooms/${t.roomId}/send-message`:eO`/v2/c/rooms/${t.roomId}/text-metadata`,d.authValue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}async function R(e,r){if(!d.authValue)throw Error("Not authorized");return O(eO`/v2/c/rooms/${t.roomId}/text-mentions`,d.authValue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,mentionId:r})})}async function A(e){if(!d.authValue)throw Error("Not authorized");return O(eO`/v2/c/rooms/${t.roomId}/text-mentions/${e}`,d.authValue,{method:"DELETE"})}async function I(e,r){let n=await u.authenticate();return O(eO`/v2/c/rooms/${t.roomId}/text-metadata`,n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,rootKey:r})})}async function C(){let e=await u.authenticate();return O(eO`/v2/c/rooms/${t.roomId}/versions`,e,{method:"GET"})}async function x(e){let r=await u.authenticate();return O(eO`/v2/c/rooms/${t.roomId}/y-version/${e}`,r,{method:"GET"})}async function D(){let e=await u.authenticate();return O(eO`/v2/c/rooms/${t.roomId}/version`,e,{method:"POST"})}function U(e){let r=JSON.stringify(e),n=f.dynamicSessionInfo.current?.nonce;if(t.unstable_fallbackToHTTP&&n&&new TextEncoder().encode(r).length>1047552){w("/send-message",{nonce:n,messages:e}).then(e=>{e.ok||403!==e.status||d.reconnect()}),S("Message was too large for websockets and sent over HTTP instead");return}d.send(r)}let F=new ty(f.staticSessionInfo,f.dynamicSessionInfo,f.myPresence,(e,t,r)=>{if(null===e||null===t)return null;{let n=ea(t.scopes);return{connectionId:t.actor,id:e.userId,info:e.userInfo,presence:r,canWrite:n,canComment:es(t.scopes)}}});function $(e){let t=F.current;null!==t&&t!==i&&(e(()=>{E.self.notify(t)}),i=t)}let B=new ty(F,e=>null!==e?t_("Me",e):null);function H(e,t){f.undoStack.length>=50&&f.undoStack.shift(),f.undoStack.push(e),Y(t)}function K(e,t){null!==f.pausedHistory?f.pausedHistory.unshift(...e):H(e,t)}function z(e,t){let r=e.storageUpdates,n=e.others;t(()=>{if(void 0!==n&&n.length>0){let e=f.others.current;for(let t of n)E.others.notify({...t,others:e})}if(e.presence&&($(h),E.myPresence.notify(f.myPresence.current)),void 0!==r&&r.size>0){let e=Array.from(r.values());E.storageBatch.notify(e)}ey()})}function W(){let e=f.dynamicSessionInfo.current;if(e)return e.actor;throw Error("Internal. Tried to get connection id but connection was never open")}function G(e,t){let r={reverse:[],storageUpdates:new Map,presence:!1},n=new Set,i=e.map(e=>"presence"===e.type||e.opId?e:{...e,opId:b.generateOpId()});for(let e of i)if("presence"===e.type){let t={type:"presence",data:{}};for(let r in e.data)t.data[r]=f.myPresence.current[r];if(f.myPresence.patch(e.data),null===f.buffer.presenceUpdates)f.buffer.presenceUpdates={type:"partial",data:e.data};else for(let t in e.data)f.buffer.presenceUpdates.data[t]=e.data[t];r.reverse.unshift(t),r.presence=!0}else{let i;if(t)i=0;else{let t=y(e.opId);i=f.unacknowledgedOps.delete(t)?2:1}let o=function(e,t){if(5===e.type&&"ACK"===e.id)return{modified:!1};switch(e.type){case 6:case 3:case 5:{let r=f.nodes.get(e.id);if(void 0===r)return{modified:!1};return r._apply(e,0===t)}case 1:{let r=f.nodes.get(e.id);if(void 0===r)return{modified:!1};if("HasParent"===r.parent.type&&e1(r.parent.node))return r.parent.node._setChildKey(ej(e.parentKey),r,t);return{modified:!1}}case 4:case 2:case 7:case 8:{if(void 0===e.parentId)return{modified:!1};let r=f.nodes.get(e.parentId);if(void 0===r)return{modified:!1};return r._attachChild(e,t)}}}(e,i);if(o.modified){let t=o.modified.node._id;t&&n.has(t)||(r.storageUpdates.set(y(o.modified.node._id),e4(r.storageUpdates.get(y(o.modified.node._id)),o.modified)),r.reverse.unshift(...o.reverse)),(2===e.type||7===e.type||4===e.type)&&n.add(y(e.id))}}return{ops:i,reverse:r.reverse,updates:{storageUpdates:r.storageUpdates,presence:r.presence}}}function q(){return f.undoStack.length>0}function V(){return f.redoStack.length>0}function Y(e){e(()=>{E.history.notify({canUndo:q(),canRedo:V()})})}function J(e){var t;return null===(t=e)||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||e9(t)?null:e}function X(){let e=f.buffer.storageOperations;if(e.length>0){for(let t of e)f.unacknowledgedOps.set(y(t.opId),t);ey()}if("connected"!==d.getStatus()){f.buffer.storageOperations=[];return}let r=Date.now(),n=r-f.buffer.lastFlushedAt;if(n>=t.throttleDelay){let e=function(){let e=[];for(let t of(f.buffer.presenceUpdates&&e.push("full"===f.buffer.presenceUpdates.type?{type:100,targetActor:-1,data:f.buffer.presenceUpdates.data}:{type:100,data:f.buffer.presenceUpdates.data}),f.buffer.messages))e.push(t);return f.buffer.storageOperations.length>0&&e.push({type:201,ops:f.buffer.storageOperations}),e}();if(0===e.length)return;U(e),f.buffer={flushTimerID:void 0,lastFlushedAt:r,messages:[],storageOperations:[],presenceUpdates:null}}else clearTimeout(f.buffer.flushTimerID),f.buffer.flushTimerID=setTimeout(X,t.throttleDelay-n)}function Q(e){let{storageOperations:t}=f.buffer;for(let r of e)t.push(r);X()}let Z=null,ee=null;function et(e){let t=new Map(f.unacknowledgedOps);(function(e,t){if(0===e.items.length)throw Error("Internal error: cannot load storage without items");void 0!==f.root?function(e,t){if(void 0===f.root)return;let r=new Map;for(let[e,t]of f.nodes)r.set(e,t._serialize());z(G(function(e,t){let r=[];return e.forEach((e,n)=>{t.get(n)||r.push({type:5,id:n})}),t.forEach((t,n)=>{let i=e.get(n);if(i)0===t.type&&(0!==i.type||JSON.stringify(t.data)!==JSON.stringify(i.data))&&r.push({type:3,id:n,data:t.data}),t.parentKey!==i.parentKey&&r.push({type:1,id:n,parentKey:y(t.parentKey,"Parent key must not be missing")});else switch(t.type){case 3:r.push({type:8,id:n,parentId:t.parentId,parentKey:t.parentKey,data:t.data});break;case 1:r.push({type:2,id:n,parentId:t.parentId,parentKey:t.parentKey});break;case 0:if(void 0===t.parentId||void 0===t.parentKey)throw Error("Internal error. Cannot serialize storage root into an operation");r.push({type:4,id:n,parentId:t.parentId,parentKey:t.parentKey,data:t.data});break;case 2:r.push({type:7,id:n,parentId:t.parentId,parentKey:t.parentKey})}}),r}(r,new Map(e)),!1).updates,t)}(e.items,t):f.root=eY._fromItems(e.items,b);let r=F.current?.canWrite??!0,n=f.undoStack.length;for(let e in f.initialStorage)if(void 0===f.root.get(e)){if(r){var i;f.root.set(e,void 0===(i=f.initialStorage[e])?void 0:eZ(i)?i.clone():N(i))}else S(`Attempted to populate missing storage key '${e}', but current user has no write access`)}f.undoStack.length=n})(e,h),function(e,t){if(0===e.size)return;let r=[],n=G(Array.from(e.values()),!0);r.push({type:201,ops:n.ops}),z(n.updates,t),U(r)}(t,h),ee?.(),ey(),E.storageDidLoad.notify()}async function er(){if(!d.authValue)return;let e=await T(d.authValue,t.roomId);et({type:200,items:await e.json()})}function en(e){let r=f.buffer.messages;t.unstable_streamData?er():r.some(e=>200===e.type)||r.push({type:200}),e.flush&&X()}function ei(){return null===Z&&(en({flush:!0}),Z=new Promise(e=>{ee=e}),ey()),Z}function el(){let e=f.root;return void 0!==e?e:(ei(),null)}async function eu(){return void 0!==f.root?Promise.resolve({root:f.root}):(await ei(),{root:y(f.root)})}function ec(){return void 0===f.root?null===Z?"not-loaded":"loading":0===f.unacknowledgedOps.size?"synchronized":"synchronizing"}let ef=ec();function ey(){let e=ec();ef!==e&&(ef=e,E.storageStatus.notify(e))}function eT(){return null!==F.current}async function ew(){for(;!eT();){let{promise:e,resolve:t}=m(),r=eI.self.subscribeOnce(t),n=eI.status.subscribeOnce(t);await e,r(),n()}}function eP(){return null!==el()}async function eR(){for(;!eP();)await eu()}let eA=new ty(f.others,e=>e.map((e,t)=>t_(`Other ${t}`,e))),eI={status:E.status.observable,lostConnection:E.lostConnection.observable,customEvent:E.customEvent.observable,others:E.others.observable,self:E.self.observable,myPresence:E.myPresence.observable,error:E.error.observable,storage:E.storageBatch.observable,storageBatch:E.storageBatch.observable,history:E.history.observable,storageDidLoad:E.storageDidLoad.observable,storageStatus:E.storageStatus.observable,ydoc:E.ydoc.observable,comments:E.comments.observable};async function eC(e,t,r){return O(e,await u.authenticate(),r,t)}async function ex(e,t,r){let n;let i=await eC(e,r,t);if(!i.ok&&i.status>=400&&i.status<600){let e;try{let t=await i.json();e=new tg(t.message,i.status,t)}catch{e=new tg(i.statusText,i.status)}throw e}try{n=await i.json()}catch{n={}}return n}async function eM(e){let r=await eC(eO`/v2/c/rooms/${t.roomId}/threads`,{since:e?.since?.toISOString()},{headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();return{threads:{updated:e.data.map(em),deleted:e.deletedThreads.map(ev)},inboxNotifications:{updated:e.inboxNotifications.map(eg),deleted:e.deletedInboxNotifications.map(eb)},requestedAt:new Date(e.meta.requestedAt)}}if(404===r.status)return{threads:{updated:[],deleted:[]},inboxNotifications:{updated:[],deleted:[]},requestedAt:new Date};throw Error("There was an error while getting threads.")}async function eN(e){let r;e?.query&&(r=te(e.query));let n=await eC(eO`/v2/c/rooms/${t.roomId}/threads`,{cursor:e?.cursor,query:r,limit:50},{headers:{"Content-Type":"application/json"}});if(n.ok){let e=await n.json();return{threads:e.data.map(em),inboxNotifications:e.inboxNotifications.map(eg),nextCursor:e.meta.nextCursor,requestedAt:new Date(e.meta.requestedAt)}}if(404===n.status)return{threads:[],inboxNotifications:[],deletedThreads:[],deletedInboxNotifications:[],nextCursor:null,requestedAt:new Date};throw Error("There was an error while getting threads.")}async function ek(e){let r=await eC(eO`/v2/c/rooms/${t.roomId}/thread-with-notification/${e}`);if(r.ok){let e=await r.json();return{thread:em(e.thread),inboxNotification:e.inboxNotification?eg(e.inboxNotification):void 0}}if(404===r.status)return{thread:void 0,inboxNotification:void 0};throw Error(`There was an error while getting thread ${e}.`)}async function eD({metadata:e,body:r,commentId:n=e6("cm"),threadId:i=e6("th"),attachmentIds:o}){return em(await ex(eO`/v2/c/rooms/${t.roomId}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,comment:{id:n,body:r,attachmentIds:o},metadata:e})}))}async function eU(e){await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}`,{method:"DELETE"})}async function eL({metadata:e,threadId:r}){return await ex(eO`/v2/c/rooms/${t.roomId}/threads/${r}/metadata`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function eF(e){await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/mark-as-resolved`,{method:"POST"})}async function e$(e){await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/mark-as-unresolved`,{method:"POST"})}async function eB({threadId:e,commentId:r=e6("cm"),body:n,attachmentIds:i}){return e_(await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,body:n,attachmentIds:i})}))}async function eH({threadId:e,commentId:r,body:n,attachmentIds:i}){return e_(await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:n,attachmentIds:i})}))}async function eK({threadId:e,commentId:r}){await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}`,{method:"DELETE"})}async function ez({threadId:e,commentId:r,emoji:n}){var i;return{...i=await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:n})}),createdAt:new Date(i.createdAt)}}async function eW({threadId:e,commentId:r,emoji:n}){await ex(eO`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}/reactions/${n}`,{method:"DELETE"})}async function eG(e,r={}){let n=r.signal,i=n?new DOMException(`Upload of attachment ${e.id} was aborted.`,"AbortError"):void 0;if(n?.aborted)throw i;let o=e=>{if(n?.aborted)throw i;if(e instanceof tg&&413===e.status)throw e;return!1};if(e.size<=5242880)return e7(()=>ex(eO`/v2/c/rooms/${t.roomId}/attachments/${e.id}/upload/${encodeURIComponent(e.name)}`,{method:"PUT",body:e.file,signal:n},{fileSize:e.size}),10,tm,o);{let r;let a=[],s=await e7(()=>ex(eO`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${encodeURIComponent(e.name)}`,{method:"POST",signal:n},{fileSize:e.size}),10,tm,o);try{r=s.uploadId;let l=function(e){let t=[],r=0;for(;r<e.size;){let n=Math.min(r+5242880,e.size);t.push({partNumber:t.length+1,part:e.slice(r,n)}),r=n}return t}(e.file);if(n?.aborted)throw i;for(let r of function(e,t){let r=[];for(let t=0,n=e.length;t<n;t+=5)r.push(e.slice(t,t+5));return r}(l,0)){let i=[];for(let{part:a,partNumber:l}of r)i.push(e7(()=>ex(eO`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${s.uploadId}/${String(l)}`,{method:"PUT",body:a,signal:n}),10,tm,o));a.push(...await Promise.all(i))}if(n?.aborted)throw i;let u=a.sort((e,t)=>e.partNumber-t.partNumber);return ex(eO`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${r}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:u}),signal:n})}catch(n){if(r&&n?.name&&("AbortError"===n.name||"TimeoutError"===n.name))try{await eC(eO`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${r}`,void 0,{method:"DELETE"})}catch(e){}throw n}}}async function eq(e){let{urls:r}=await ex(eO`/v2/c/rooms/${t.roomId}/attachments/presigned-urls`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attachmentIds:e})});return r}let eV=new eh(async e=>{let t=e.flat();return(await eq(t)).map(e=>e??Error("There was an error while getting this attachment's URL"))},{delay:50}),eJ=ep(eV);async function eX(e,t){let r;let n=await u.authenticate(),i=await O(e,n,t);if(!i.ok&&i.status>=400&&i.status<600){let e;try{let t=await i.json();e=new tv(t.message,i.status,t)}catch{e=new tv(i.statusText,i.status)}throw e}try{r=await i.json()}catch{r={}}return r}async function eQ(e){await eX(eO`/v2/c/rooms/${t.roomId}/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:e})})}let e2=new eh(async e=>{let t=e.flat();return await eQ(t),t},{delay:50});async function e3(e){await e2.get(e)}return Object.defineProperty({[ed]:{get presenceBuffer(){return N(f.buffer.presenceUpdates?.data??null)},get undoStack(){return N(f.undoStack)},get nodeCount(){return f.nodes.size},getProvider:()=>f.provider,setProvider(e){f.provider=e,f.onProviderUpdate.notify()},onProviderUpdate:f.onProviderUpdate.observable,reportTextEditor:I,createTextMention:R,deleteTextMention:A,listTextVersions:C,getTextVersion:x,createTextVersion:D,getSelf_forDevTools:()=>B.current,getOthers_forDevTools:()=>eA.current,simulate:{explicitClose:e=>d._privateSendMachineEvent({type:"EXPLICIT_SOCKET_CLOSE",event:e}),rawSend:e=>d.send(e)},attachmentUrlsStore:eJ},id:t.roomId,subscribe:function(e,t,r){if("string"==typeof e&&("my-presence"===e||"others"===e||"event"===e||"error"===e||"history"===e||"status"===e||"storage-status"===e||"lost-connection"===e||"connection"===e||"comments"===e)){if("function"!=typeof t)throw Error("Second argument must be a callback function");switch(e){case"event":return eI.customEvent.subscribe(t);case"my-presence":return eI.myPresence.subscribe(t);case"others":return eI.others.subscribe(e=>{let{others:r,...n}=e;return t(r,n)});case"error":return eI.error.subscribe(t);case"status":return eI.status.subscribe(t);case"lost-connection":return eI.lostConnection.subscribe(t);case"history":return eI.history.subscribe(t);case"storage-status":return eI.storageStatus.subscribe(t);case"comments":return eI.comments.subscribe(t);default:return p(e,`"${String(e)}" is not a valid event name`)}}if(void 0===t||"function"==typeof e){if("function"==typeof e)return eI.storageBatch.subscribe(e);throw Error("Please specify a listener callback")}if(e0(e))return r?.isDeep?eI.storageBatch.subscribe(r=>{let n=r.filter(t=>(function e(t,r){return t===r||"HasParent"===t.parent.type&&e(t.parent.node,r)})(t.node,e));n.length>0&&t(n)}):eI.storageBatch.subscribe(r=>{for(let n of r)n.node._id===e._id&&t(n.node)});throw Error(`${String(e)} is not a value that can be subscribed to.`)},connect:()=>d.connect(),reconnect:()=>d.reconnect(),disconnect:()=>d.disconnect(),destroy:()=>{l(),d.destroy()},updatePresence:function(e,t){let r={};for(let t in null===f.buffer.presenceUpdates&&(f.buffer.presenceUpdates={type:"partial",data:{}}),e){let n=e[t];void 0!==n&&(f.buffer.presenceUpdates.data[t]=n,r[t]=f.myPresence.current[t])}f.myPresence.patch(e),f.activeBatch?(t?.addToHistory&&f.activeBatch.reverseOps.unshift({type:"presence",data:r}),f.activeBatch.updates.presence=!0):(X(),_(()=>{t?.addToHistory&&K([{type:"presence",data:r}],h),z({presence:!0},h)}))},updateYDoc:function(e,t){let r={type:301,update:e,guid:t};f.buffer.messages.push(r),E.ydoc.notify(r),X()},broadcastEvent:function(e,t={shouldQueueEventIfNotReady:!1}){("connected"===d.getStatus()||t.shouldQueueEventIfNotReady)&&(f.buffer.messages.push({type:103,event:e}),X())},batch:function(e){let t;return f.activeBatch?e():(_(()=>{f.activeBatch={ops:[],updates:{storageUpdates:new Map,presence:!1,others:[]},reverseOps:[]};try{t=e()}finally{let e=f.activeBatch;f.activeBatch=null,e.reverseOps.length>0&&K(e.reverseOps,h),e.ops.length>0&&(f.redoStack.length=0),e.ops.length>0&&Q(e.ops),z(e.updates,h),X()}}),t)},history:{undo:function(){if(f.activeBatch)throw Error("undo is not allowed during a batch");let e=f.undoStack.pop();if(void 0===e)return;f.pausedHistory=null;let t=G(e,!0);for(let e of(_(()=>{z(t.updates,h),f.redoStack.push(t.reverse),Y(h)}),t.ops))"presence"!==e.type&&f.buffer.storageOperations.push(e);X()},redo:function(){if(f.activeBatch)throw Error("redo is not allowed during a batch");let e=f.redoStack.pop();if(void 0===e)return;f.pausedHistory=null;let t=G(e,!0);for(let e of(_(()=>{z(t.updates,h),f.undoStack.push(t.reverse),Y(h)}),t.ops))"presence"!==e.type&&f.buffer.storageOperations.push(e);X()},canUndo:q,canRedo:V,clear:function(){f.undoStack.length=0,f.redoStack.length=0},pause:function(){null===f.pausedHistory&&(f.pausedHistory=[])},resume:function(){let e=f.pausedHistory;f.pausedHistory=null,null!==e&&e.length>0&&H(e,_)}},fetchYDoc:function(e,t){f.buffer.messages.find(r=>300===r.type&&r.vector===e&&r.guid===t)||f.buffer.messages.push({type:300,vector:e,guid:t}),X()},getStorage:eu,getStorageSnapshot:el,getStorageStatus:ec,isPresenceReady:eT,isStorageReady:eP,waitUntilPresenceReady:L(ew),waitUntilStorageReady:L(eR),events:eI,getStatus:()=>d.getStatus(),getSelf:()=>F.current,getPresence:()=>f.myPresence.current,getOthers:()=>f.others.current,getThreads:eN,getThreadsSince:eM,getThread:ek,createThread:eD,deleteThread:eU,editThreadMetadata:eL,markThreadAsResolved:eF,markThreadAsUnresolved:e$,createComment:eB,editComment:eH,deleteComment:eK,addReaction:ez,removeReaction:eW,prepareAttachment:function(e){return{type:"localAttachment",status:"idle",id:e6("at"),name:e.name,size:e.size,mimeType:e.type,file:e}},uploadAttachment:eG,getAttachmentUrl:function(e){return eV.get(e)},getNotificationSettings:function(){return eX(eO`/v2/c/rooms/${t.roomId}/notification-settings`)},updateNotificationSettings:function(e){return eX(eO`/v2/c/rooms/${t.roomId}/notification-settings`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})},markInboxNotificationAsRead:e3},ed,{enumerable:!1})}({initialPresence:("function"==typeof h.initialPresence?h.initialPresence(t):h.initialPresence)??{},initialStorage:("function"==typeof h.initialStorage?h.initialStorage(t):h.initialStorage)??{}},{roomId:t,throttleDelay:r,lostConnectionTimeout:n,backgroundKeepAliveTimeout:i,polyfills:e.polyfills,delegates:e.mockedDelegates??{createSocket:(d=e.polyfills?.WebSocket,e=>{let r=d??("undefined"==typeof WebSocket?void 0:WebSocket);if(void 0===r)throw new q("To use Liveblocks client in a non-DOM environment, you need to provide a WebSocket polyfill.");let n=new URL(o);if(n.protocol="http:"===n.protocol?"ws":"wss",n.pathname="/v7",n.searchParams.set("roomId",t),"secret"===e.type)n.searchParams.set("tok",e.token.raw);else{if("public"!==e.type)return p(e,"Unhandled case");n.searchParams.set("pubkey",e.publicApiKey)}return n.searchParams.set("version",c||"dev"),new r(n.toString())}),authenticate:async()=>a.getAuthValue({requestedScope:"room:read",roomId:t})},enableDebugLogging:e.enableDebugLogging,unstable_batchedUpdates:h?.unstable_batchedUpdates,baseUrl:o,unstable_fallbackToHTTP:!!e.unstable_fallbackToHTTP,unstable_streamData:!!e.unstable_streamData}),v={room:_,unsubs:new Set};if(s.set(t,v),h.autoConnect??!0){if("undefined"==typeof atob){if(e.polyfills?.atob===void 0)throw Error("You need to polyfill atob to use the client in your environment. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/atob-polyfill");global.atob=e.polyfills.atob}_.connect()}return l(v)},getRoom:function(e){return s.get(e)?.room||null},logout:function(){for(let{room:t}of(a.reset(),s.values())){var e;"initial"===(e=t.getStatus())||"disconnected"===e||t.reconnect()}},...d,[ed]:{currentUserIdStore:u,resolveMentionSuggestions:e.resolveMentionSuggestions,usersStore:_,roomsInfoStore:E,getRoomIds:()=>Array.from(s.keys()),getUserThreads_experimental:d.getUserThreads_experimental,getUserThreadsSince_experimental:d.getUserThreadsSince_experimental}},ed,{enumerable:!1})})(n),[]);return l.createElement(t9,{client:i},t)}var re=class extends Error{constructor(e,t){super("Update notification settings failed."),this.cause=e,this.context=t,this.name="UpdateNotificationSettingsError"}};function rt(e,t){t>=5||setTimeout(()=>{e()},5e3*Math.pow(2,t))}var rr=e=>e,rn=Object.freeze([]);function ri(){return rn}function ro(){return null}function ra(e){let t=`Request failed with status ${e.status}: ${e.message}`;if(e.details?.error==="FORBIDDEN"){let r=[t,e.details.suggestion,e.details.docs].filter(Boolean).join("\n");v.error(r)}return Error(t)}var rs=new WeakMap;function rl(e){let t=rs.get(e);return t||(t=function(e){let t=t7(e),r=new Map;async function n(e,{retryCount:i}={retryCount:0}){let o=tH(e.id),a=r.get(o);if(void 0!==a)return a;let s=e[ed].listTextVersions();r.set(o,s),t.setQuery4Loading(o);try{let n=await s,i=(await n.json()).versions.map(({createdAt:e,...t})=>({createdAt:new Date(e),...t}));t.updateRoomVersions(e.id,i,o),r.delete(o)}catch(a){r.delete(o),rt(()=>{n(e,{retryCount:i+1})},i),t.setQuery4Error(o,a)}}async function i(e,{retryCount:n}={retryCount:0}){let o=tB(e.id),a=r.get(o);if(void 0!==a)return a;try{let n=e.getNotificationSettings();r.set(o,n),t.setQuery3Loading(o);let i=await n;t.updateRoomInboxNotificationSettings(e.id,i,o)}catch(a){r.delete(o),rt(()=>{i(e,{retryCount:n+1})},n),t.setQuery3Error(o,a)}}let o=g();return{store:t,subscribeToRoomThreadsDeltaUpdates:function(e){let t=t7(e),r=function(e,t){let r={state:"stopped"};function n(){"running"===r.state&&i(),e()}function i(){r={state:"running",lastScheduledAt:performance.now(),timeoutHandle:setTimeout(n,3e5)}}return{enable:function(e){e?"running"!==r.state&&i():"stopped"!==r.state&&(r.timeoutHandle&&clearTimeout(r.timeoutHandle),r={state:"stopped"})}}}(async()=>{let r=e[ed].getRoomIds();await Promise.allSettled(r.map(r=>{let n=e.getRoom(r);if(null!==n)return t.fetchRoomThreadsDeltaUpdate(n.id)}))},0),n=0;return()=>(n++,r.enable(n>0),()=>{n--,r.enable(n>0)})}(e),commentsErrorEventSource:o,getInboxNotificationSettings:i,getRoomVersions:n,onMutationFailure:function(e,r,n){if(t.removeOptimisticUpdate(r),e instanceof tg){let t=ra(e);o.notify(n(t));return}if(e instanceof tv){ra(e);return}throw e}}}(e),rs.set(e,t)),t}function ru(e){let t=t6(),{id:r,stableEnterRoom:n}=e,i=tZ({initialPresence:e.initialPresence,initialStorage:e.initialStorage,unstable_batchedUpdates:e.unstable_batchedUpdates,autoConnect:e.autoConnect??"undefined"!=typeof window}),[{room:o},a]=l.useState(()=>n(r,{...i,autoConnect:!1}));return l.useEffect(()=>{let{store:e}=rl(t);async function r(t){if(t.type===F.THREAD_DELETED){e.deleteThread(t.threadId,null);return}let r=await o.getThread(t.threadId);if(!r.thread){e.deleteThread(t.threadId,null);return}let{thread:n,inboxNotification:i}=r,a=e.getFullState().threadsById[t.threadId];switch(t.type){case F.COMMENT_EDITED:case F.THREAD_METADATA_UPDATED:case F.THREAD_UPDATED:case F.COMMENT_REACTION_ADDED:case F.COMMENT_REACTION_REMOVED:case F.COMMENT_DELETED:if(!a)break;e.updateThreadAndNotification(n,i);break;case F.COMMENT_CREATED:e.updateThreadAndNotification(n,i)}}return o.events.comments.subscribe(e=>void r(e))},[t,o]),l.useEffect(()=>{rl(t).store.fetchRoomThreadsDeltaUpdate(o.id).catch(()=>{})},[t,o.id]),l.useEffect(()=>{function e(){rl(t).store.fetchRoomThreadsDeltaUpdate(o.id).catch(()=>{})}return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}},[t,o.id]),l.useEffect(()=>{let e=n(r,i);a(e);let{room:t,leave:o}=e;return i.autoConnect&&t.connect(),()=>{o()}},[r,i,n]),l.createElement(tx.Provider,{value:o},e.children)}function rd(){let e=tM();if(null===e)throw Error("RoomProvider is missing from the React tree.");return e}Symbol();function rc(){if("undefined"==typeof window)throw Error("You cannot use the Suspense version of this hook on the server side. Make sure to only call them on the client side.\nFor tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#suspense-avoid-ssr")}function rf(){rc(),t1(rd().waitUntilPresenceReady())}var rh=function(e){let t=t6(),[r]=l.useState(()=>new Map),n=l.useCallback((e,n)=>{let i=r.get(e);if(i)return i;let o=t.enterRoom(e,n),a=o.leave;return o.leave=()=>{a(),r.delete(e)},r.set(e,o),o},[t,r]);return l.createElement(ru,{...e,stableEnterRoom:n})},rp=rd;function ry(...e){return function(e,t){return rf(),function(e,t){let r=rd(),n=r.events.others.subscribe,i=r.getOthers;return(0,tj.useSyncExternalStoreWithSelector)(n,i,ri,e??rr,t)}(e,t)}(...e)}function r_(...e){return function(e,t){return rf(),function(e,t){let r=rd(),n=r.events.self.subscribe,i=r.getSelf,o=e??rr,a=l.useCallback(e=>null!==e?o(e):null,[o]);return(0,tj.useSyncExternalStoreWithSelector)(n,i,ro,a,t)}(e,t)}(...e)}},8285:(e,t,r)=>{"use strict";function n(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}r.r(t),r.d(t,{_:()=>n,_class_private_field_loose_base:()=>n})},8817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{_:()=>i,_class_private_field_loose_key:()=>i});var n=0;function i(e){return"__private_"+n+++"_"+e}},1174:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})},8374:(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}r.r(t),r.d(t,{_:()=>i,_interop_require_wildcard:()=>i})},3370:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})}};